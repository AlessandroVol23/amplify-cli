8062f52e6c259b3971fd78de265e948e
/* istanbul ignore next */var cov_az0w8xq45 = function () {var path = '/c/Users/Sandro/repo/amplify-cli/packages/amplify-codegen/src/walkthrough/changeAppSyncRegions.js',hash = '8664ce7a4750b45902cdf15108cdf50c1b19768a',Function = function () {}.constructor,global = new Function('return this')(),gcv = '__coverage__',coverageData = { path: '/c/Users/Sandro/repo/amplify-cli/packages/amplify-codegen/src/walkthrough/changeAppSyncRegions.js', statementMap: { '0': { start: { line: 1, column: 40 }, end: { line: 1, column: 75 } }, '1': { start: { line: 2, column: 21 }, end: { line: 2, column: 57 } }, '2': { start: { line: 5, column: 18 }, end: { line: 9, column: 3 } }, '3': { start: { line: 11, column: 22 }, end: { line: 11, column: 61 } }, '4': { start: { line: 12, column: 17 }, end: { line: 12, column: 76 } }, '5': { start: { line: 13, column: 2 }, end: { line: 16, column: 4 } }, '6': { start: { line: 19, column: 0 }, end: { line: 19, column: 37 } } }, fnMap: { '0': { name: 'changeAppSyncRegion', decl: { start: { line: 4, column: 15 }, end: { line: 4, column: 34 } }, loc: { start: { line: 4, column: 59 }, end: { line: 17, column: 1 } }, line: 4 } }, branchMap: { '0': { loc: { start: { line: 12, column: 17 }, end: { line: 12, column: 76 } }, type: 'binary-expr', locations: [{ start: { line: 12, column: 17 }, end: { line: 12, column: 28 } }, { start: { line: 12, column: 33 }, end: { line: 12, column: 75 } }], line: 12 } }, s: { '0': 0, '1': 0, '2': 0, '3': 0, '4': 0, '5': 0, '6': 0 }, f: { '0': 0 }, b: { '0': [0, 0] }, _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c' },coverage = global[gcv] || (global[gcv] = {});if (coverage[path] && coverage[path].hash === hash) {return coverage[path];}coverageData.hash = hash;return coverage[path] = coverageData;}();const askShouldTryWithDifferentRegion = /* istanbul ignore next */(cov_az0w8xq45.s[0]++, require('./questions/changeRegion'));
const changeRegion = /* istanbul ignore next */(cov_az0w8xq45.s[1]++, require('./questions/selectRegions'));

async function changeAppSyncRegion(context, currentRegion) {/* istanbul ignore next */cov_az0w8xq45.f[0]++;
  const regions = /* istanbul ignore next */(cov_az0w8xq45.s[2]++, await context.amplify.executeProviderUtils(
  context,
  'awscloudformation',
  'getRegionMappings'));


  const shouldRetry = /* istanbul ignore next */(cov_az0w8xq45.s[3]++, await askShouldTryWithDifferentRegion());
  const region = /* istanbul ignore next */(cov_az0w8xq45.s[4]++, /* istanbul ignore next */(cov_az0w8xq45.b[0][0]++, shouldRetry) && /* istanbul ignore next */(cov_az0w8xq45.b[0][1]++, await changeRegion(regions, currentRegion))); /* istanbul ignore next */cov_az0w8xq45.s[5]++;
  return {
    shouldRetry,
    region };

} /* istanbul ignore next */cov_az0w8xq45.s[6]++;

module.exports = changeAppSyncRegion;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYW5nZUFwcFN5bmNSZWdpb25zLmpzIl0sIm5hbWVzIjpbImFza1Nob3VsZFRyeVdpdGhEaWZmZXJlbnRSZWdpb24iLCJyZXF1aXJlIiwiY2hhbmdlUmVnaW9uIiwiY2hhbmdlQXBwU3luY1JlZ2lvbiIsImNvbnRleHQiLCJjdXJyZW50UmVnaW9uIiwicmVnaW9ucyIsImFtcGxpZnkiLCJleGVjdXRlUHJvdmlkZXJVdGlscyIsInNob3VsZFJldHJ5IiwicmVnaW9uIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IjB2REFBQSxNQUFNQSxtRkFBa0NDLFFBQVEsMEJBQVIsQ0FBbEMsQ0FBTjtBQUNBLE1BQU1DLGdFQUFlRCxRQUFRLDJCQUFSLENBQWYsQ0FBTjs7QUFFQSxlQUFlRSxtQkFBZixDQUFtQ0MsT0FBbkMsRUFBNENDLGFBQTVDLEVBQTJEO0FBQ3pELFFBQU1DLDJEQUFVLE1BQU1GLFFBQVFHLE9BQVIsQ0FBZ0JDLG9CQUFoQjtBQUNwQkosU0FEb0I7QUFFcEIscUJBRm9CO0FBR3BCLHFCQUhvQixDQUFoQixDQUFOOzs7QUFNQSxRQUFNSywrREFBYyxNQUFNVCxpQ0FBcEIsQ0FBTjtBQUNBLFFBQU1VLDBEQUFTLHdIQUFnQixNQUFNUixhQUFhSSxPQUFiLEVBQXNCRCxhQUF0QixDQUF0QixDQUFULENBQU4sQ0FSeUQ7QUFTekQsU0FBTztBQUNMSSxlQURLO0FBRUxDLFVBRkssRUFBUDs7QUFJRCxDOztBQUVEQyxPQUFPQyxPQUFQLEdBQWlCVCxtQkFBakIiLCJmaWxlIjoiY2hhbmdlQXBwU3luY1JlZ2lvbnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBhc2tTaG91bGRUcnlXaXRoRGlmZmVyZW50UmVnaW9uID0gcmVxdWlyZSgnLi9xdWVzdGlvbnMvY2hhbmdlUmVnaW9uJyk7XG5jb25zdCBjaGFuZ2VSZWdpb24gPSByZXF1aXJlKCcuL3F1ZXN0aW9ucy9zZWxlY3RSZWdpb25zJyk7XG5cbmFzeW5jIGZ1bmN0aW9uIGNoYW5nZUFwcFN5bmNSZWdpb24oY29udGV4dCwgY3VycmVudFJlZ2lvbikge1xuICBjb25zdCByZWdpb25zID0gYXdhaXQgY29udGV4dC5hbXBsaWZ5LmV4ZWN1dGVQcm92aWRlclV0aWxzKFxuICAgIGNvbnRleHQsXG4gICAgJ2F3c2Nsb3VkZm9ybWF0aW9uJyxcbiAgICAnZ2V0UmVnaW9uTWFwcGluZ3MnLFxuICApO1xuXG4gIGNvbnN0IHNob3VsZFJldHJ5ID0gYXdhaXQgYXNrU2hvdWxkVHJ5V2l0aERpZmZlcmVudFJlZ2lvbigpO1xuICBjb25zdCByZWdpb24gPSBzaG91bGRSZXRyeSAmJiAoYXdhaXQgY2hhbmdlUmVnaW9uKHJlZ2lvbnMsIGN1cnJlbnRSZWdpb24pKTtcbiAgcmV0dXJuIHtcbiAgICBzaG91bGRSZXRyeSxcbiAgICByZWdpb24sXG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2hhbmdlQXBwU3luY1JlZ2lvbjtcbiJdfQ==