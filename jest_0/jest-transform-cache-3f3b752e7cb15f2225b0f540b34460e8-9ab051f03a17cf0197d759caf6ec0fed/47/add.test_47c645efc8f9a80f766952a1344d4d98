bfa9af79ba50ec70dfac16cc0121d13a





















jest.mock('../../src/walkthrough/add');
jest.mock('../../src/walkthrough/changeAppSyncRegions');
jest.mock('../../src/commands/types');
jest.mock('../../src/commands/statements');
jest.mock('../../src/codegen-config');
jest.mock('../../src/utils');const loadConfig = require('../../src/codegen-config');const generateStatements = require('../../src/commands/statements');const generateTypes = require('../../src/commands/types');const addWalkthrough = require('../../src/walkthrough/add');const changeAppSyncRegions = require('../../src/walkthrough/changeAppSyncRegions');const { AmplifyCodeGenAPINotFoundError } = require('../../src/errors');const add = require('../../src/commands/add');const { downloadIntrospectionSchemaWithProgress, getAppSyncAPIDetails, getAppSyncAPIInfo, getProjectAwsRegion } = require('../../src/utils');const MOCK_CONTEXT = { print: { info: jest.fn() } };

const MOCK_INCLUDE_PATTERN = 'MOCK_INCLUDE';
const MOCK_EXCLUDE_PATTERN = 'MOCK_EXCLUDE';
const MOCK_SCHEMA_LOCATION = 'INTROSPECTION_SCHEMA.JSON';
const MOCK_TARGET = 'TYPE_SCRIPT_OR_FLOW_OR_ANY_OTHER_LANGUAGE';
const MOCK_GENERATED_FILE_NAME = 'API.TS';
const MOCK_API_ID = 'MOCK_API_ID';
const MOCK_DOCS_FILE_PATH = 'MOCK_DOCS_FILE_PATH';
const MOCK_ENDPOINT = 'MOCK_APPSYNC_ENDPOINT';
const MOCK_API_NAME = 'MOCK_API_NAME';
const MOCK_DOWNLOADED_SCHEMA_LOCATION = 'MOCK_DOWNLOADED_SCHEMA_LOCATION';
const MOCK_AWS_REGION = 'MOCK_AWS_PROJECT_REGION';

const MOCK_ANSWERS = {
  includePattern: MOCK_INCLUDE_PATTERN,
  excludePattern: MOCK_EXCLUDE_PATTERN,
  target: MOCK_TARGET,
  generatedFileName: MOCK_GENERATED_FILE_NAME,
  docsFilePath: MOCK_DOCS_FILE_PATH,
  schemaLocation: MOCK_SCHEMA_LOCATION,
  shouldGenerateDocs: true,
  shouldGenerateCode: true };


const MOCK_APPSYNC_API_DETAIL = {
  id: MOCK_API_ID,
  endpoint: MOCK_ENDPOINT,
  name: MOCK_API_NAME };


const LOAD_CONFIG_METHODS = {
  getProjects: jest.fn(),
  addProject: jest.fn(),
  save: jest.fn() };


describe('command - add', () => {
  beforeEach(() => {
    jest.resetAllMocks();
    LOAD_CONFIG_METHODS.getProjects.mockReturnValue([]);
    addWalkthrough.mockReturnValue(MOCK_ANSWERS);
    getAppSyncAPIDetails.mockReturnValue([MOCK_APPSYNC_API_DETAIL]);
    loadConfig.mockReturnValue(LOAD_CONFIG_METHODS);
    downloadIntrospectionSchemaWithProgress.mockReturnValue(MOCK_DOWNLOADED_SCHEMA_LOCATION);
    getProjectAwsRegion.mockReturnValue(MOCK_AWS_REGION);
  });

  it('should walkthrough add questions', async () => {
    await add(MOCK_CONTEXT);
    expect(getAppSyncAPIDetails).toHaveBeenCalledWith(MOCK_CONTEXT);
    expect(getAppSyncAPIInfo).not.toHaveBeenCalled();
    expect(LOAD_CONFIG_METHODS.getProjects).toHaveBeenCalledWith();
    expect(downloadIntrospectionSchemaWithProgress).toHaveBeenCalledWith(
    MOCK_CONTEXT,
    MOCK_API_ID,
    MOCK_SCHEMA_LOCATION,
    MOCK_AWS_REGION);

    expect(LOAD_CONFIG_METHODS.addProject).toHaveBeenCalled();
    const newProjectConfig = LOAD_CONFIG_METHODS.addProject.mock.calls[0][0];
    expect(newProjectConfig.projectName).toEqual(MOCK_API_NAME);
    expect(newProjectConfig.includes).toEqual(MOCK_INCLUDE_PATTERN);
    expect(newProjectConfig.excludes).toEqual(MOCK_EXCLUDE_PATTERN);
    expect(newProjectConfig.schema).toEqual(MOCK_DOWNLOADED_SCHEMA_LOCATION);
    expect(newProjectConfig.amplifyExtension.graphQLApiId).toEqual(MOCK_API_ID);
    expect(newProjectConfig.amplifyExtension.codeGenTarget).toEqual(MOCK_TARGET);
    expect(newProjectConfig.amplifyExtension.generatedFileName).toEqual(MOCK_GENERATED_FILE_NAME);
    expect(newProjectConfig.amplifyExtension.docsFilePath).toEqual(MOCK_DOCS_FILE_PATH);
    expect(newProjectConfig.endpoint).toEqual(MOCK_ENDPOINT);

    expect(generateStatements).toHaveBeenCalledWith(MOCK_CONTEXT, false);
    expect(generateTypes).toHaveBeenCalledWith(MOCK_CONTEXT, false);

    expect(LOAD_CONFIG_METHODS.save).toHaveBeenCalledWith();
  });

  it('should fetch the info from cloud if an apiId is passed', async () => {
    getAppSyncAPIInfo.mockReturnValue(MOCK_APPSYNC_API_DETAIL);
    await add(MOCK_CONTEXT, MOCK_API_ID);
    expect(getAppSyncAPIInfo).toHaveBeenCalledWith(MOCK_CONTEXT, MOCK_API_ID, MOCK_AWS_REGION);
    expect(getAppSyncAPIDetails).not.toHaveBeenCalled();
    expect(changeAppSyncRegions).not.toHaveBeenCalled();
  });

  describe('AppSync API in a different region', () => {
    it('should use the user provided region', async () => {
      const MOCK_NEW_REGION = 'NEW_AWS_REGION';
      getAppSyncAPIInfo.mockImplementationOnce(() => {
        getAppSyncAPIInfo.mockReturnValue(MOCK_APPSYNC_API_DETAIL);
        throw new AmplifyCodeGenAPINotFoundError();
      });
      changeAppSyncRegions.mockReturnValue({ shouldRetry: true, region: MOCK_NEW_REGION });
      await add(MOCK_CONTEXT, MOCK_API_ID);
      expect(getAppSyncAPIInfo).toHaveBeenCalledWith(MOCK_CONTEXT, MOCK_API_ID, MOCK_AWS_REGION);
      expect(changeAppSyncRegions).toHaveBeenCalledWith(MOCK_CONTEXT, MOCK_AWS_REGION);
      expect(getAppSyncAPIDetails).not.toHaveBeenCalled();
      expect(LOAD_CONFIG_METHODS.save).toHaveBeenCalledWith();
    });

    it('should not add if user chooses not change region', async () => {
      getAppSyncAPIInfo.mockImplementationOnce(() => {
        throw new AmplifyCodeGenAPINotFoundError();
      });
      changeAppSyncRegions.mockReturnValue({ shouldRetry: false });
      await add(MOCK_CONTEXT, MOCK_API_ID);
      expect(getAppSyncAPIInfo).toHaveBeenCalledWith(MOCK_CONTEXT, MOCK_API_ID, MOCK_AWS_REGION);
      expect(changeAppSyncRegions).toHaveBeenCalledWith(MOCK_CONTEXT, MOCK_AWS_REGION);
      expect(getAppSyncAPIDetails).not.toHaveBeenCalled();
      expect(LOAD_CONFIG_METHODS.save).not.toHaveBeenCalled();
    });
  });

  it('should throw an error if an AppSync API is already added', async () => {
    LOAD_CONFIG_METHODS.getProjects.mockReturnValue([{ id: MOCK_API_ID }]);
    await expect(add(MOCK_CONTEXT)).rejects.toBeInstanceOf(Error);
  });

  it('should throw an error if no AppSync APIs are available in project', async () => {
    getAppSyncAPIDetails.mockReturnValue([]);
    await expect(add(MOCK_CONTEXT)).rejects.toBeInstanceOf(Error);
  });

  it('should throw an error if no AppSync APIs is not pushed to cloud', async () => {
    getAppSyncAPIDetails.mockReturnValue([{ name: ' pending push' }]);
    await expect(add(MOCK_CONTEXT)).rejects.toBeInstanceOf(Error);
  });
  it('should not generate statements when user chooses not to', async () => {
    addWalkthrough.mockReturnValue({ ...MOCK_ANSWERS, shouldGenerateDocs: false });
    await add(MOCK_CONTEXT);
    expect(generateStatements).not.toHaveBeenCalled();
  });

  it('should not generate types when user chooses not to', async () => {
    addWalkthrough.mockReturnValue({ ...MOCK_ANSWERS, shouldGenerateCode: false });
    await add(MOCK_CONTEXT);
    expect(generateTypes).not.toHaveBeenCalled();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZC50ZXN0LmpzIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwibG9hZENvbmZpZyIsInJlcXVpcmUiLCJnZW5lcmF0ZVN0YXRlbWVudHMiLCJnZW5lcmF0ZVR5cGVzIiwiYWRkV2Fsa3Rocm91Z2giLCJjaGFuZ2VBcHBTeW5jUmVnaW9ucyIsIkFtcGxpZnlDb2RlR2VuQVBJTm90Rm91bmRFcnJvciIsImFkZCIsImRvd25sb2FkSW50cm9zcGVjdGlvblNjaGVtYVdpdGhQcm9ncmVzcyIsImdldEFwcFN5bmNBUElEZXRhaWxzIiwiZ2V0QXBwU3luY0FQSUluZm8iLCJnZXRQcm9qZWN0QXdzUmVnaW9uIiwiTU9DS19DT05URVhUIiwicHJpbnQiLCJpbmZvIiwiZm4iLCJNT0NLX0lOQ0xVREVfUEFUVEVSTiIsIk1PQ0tfRVhDTFVERV9QQVRURVJOIiwiTU9DS19TQ0hFTUFfTE9DQVRJT04iLCJNT0NLX1RBUkdFVCIsIk1PQ0tfR0VORVJBVEVEX0ZJTEVfTkFNRSIsIk1PQ0tfQVBJX0lEIiwiTU9DS19ET0NTX0ZJTEVfUEFUSCIsIk1PQ0tfRU5EUE9JTlQiLCJNT0NLX0FQSV9OQU1FIiwiTU9DS19ET1dOTE9BREVEX1NDSEVNQV9MT0NBVElPTiIsIk1PQ0tfQVdTX1JFR0lPTiIsIk1PQ0tfQU5TV0VSUyIsImluY2x1ZGVQYXR0ZXJuIiwiZXhjbHVkZVBhdHRlcm4iLCJ0YXJnZXQiLCJnZW5lcmF0ZWRGaWxlTmFtZSIsImRvY3NGaWxlUGF0aCIsInNjaGVtYUxvY2F0aW9uIiwic2hvdWxkR2VuZXJhdGVEb2NzIiwic2hvdWxkR2VuZXJhdGVDb2RlIiwiTU9DS19BUFBTWU5DX0FQSV9ERVRBSUwiLCJpZCIsImVuZHBvaW50IiwibmFtZSIsIkxPQURfQ09ORklHX01FVEhPRFMiLCJnZXRQcm9qZWN0cyIsImFkZFByb2plY3QiLCJzYXZlIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwicmVzZXRBbGxNb2NrcyIsIm1vY2tSZXR1cm5WYWx1ZSIsIml0IiwiZXhwZWN0IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJub3QiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwibmV3UHJvamVjdENvbmZpZyIsImNhbGxzIiwicHJvamVjdE5hbWUiLCJ0b0VxdWFsIiwiaW5jbHVkZXMiLCJleGNsdWRlcyIsInNjaGVtYSIsImFtcGxpZnlFeHRlbnNpb24iLCJncmFwaFFMQXBpSWQiLCJjb2RlR2VuVGFyZ2V0IiwiTU9DS19ORVdfUkVHSU9OIiwibW9ja0ltcGxlbWVudGF0aW9uT25jZSIsInNob3VsZFJldHJ5IiwicmVnaW9uIiwicmVqZWN0cyIsInRvQmVJbnN0YW5jZU9mIiwiRXJyb3IiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXFCQUEsS0FBS0MsSUFBTCxDQUFVLDJCQUFWO0FBQ0FELEtBQUtDLElBQUwsQ0FBVSw0Q0FBVjtBQUNBRCxLQUFLQyxJQUFMLENBQVUsMEJBQVY7QUFDQUQsS0FBS0MsSUFBTCxDQUFVLCtCQUFWO0FBQ0FELEtBQUtDLElBQUwsQ0FBVSwwQkFBVjtBQUNBRCxLQUFLQyxJQUFMLENBQVUsaUJBQVYsRUExQkEsTUFBTUMsYUFBYUMsUUFBUSwwQkFBUixDQUFuQixDQUNBLE1BQU1DLHFCQUFxQkQsUUFBUSwrQkFBUixDQUEzQixDQUNBLE1BQU1FLGdCQUFnQkYsUUFBUSwwQkFBUixDQUF0QixDQUNBLE1BQU1HLGlCQUFpQkgsUUFBUSwyQkFBUixDQUF2QixDQUNBLE1BQU1JLHVCQUF1QkosUUFBUSw0Q0FBUixDQUE3QixDQUNBLE1BQU0sRUFBRUssOEJBQUYsS0FBcUNMLFFBQVEsa0JBQVIsQ0FBM0MsQ0FFQSxNQUFNTSxNQUFNTixRQUFRLHdCQUFSLENBQVosQ0FFQSxNQUFNLEVBQ0pPLHVDQURJLEVBRUpDLG9CQUZJLEVBR0pDLGlCQUhJLEVBSUpDLG1CQUpJLEtBS0ZWLFFBQVEsaUJBQVIsQ0FMSixDQU9BLE1BQU1XLGVBQWUsRUFDbkJDLE9BQU8sRUFDTEMsTUFBTWhCLEtBQUtpQixFQUFMLEVBREQsRUFEWSxFQUFyQjs7QUFZQSxN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QUFDbEZ2Qyx5QkFBcUJzQyxlQUFyQixDQUFxQyxFQUFyQztBQUNBLFVBQU1FLE9BQU8xQyxJQUFJSyxZQUFKLENBQVAsRUFBMEJ1RCxPQUExQixDQUFrQ0MsY0FBbEMsQ0FBaURDLEtBQWpELENBQU47QUFDRCxHQUhEOztBQUtBckIsS0FBRyxpRUFBSCxFQUFzRSxZQUFZO0FBQ2hGdkMseUJBQXFCc0MsZUFBckIsQ0FBcUMsQ0FBQyxFQUFFUixNQUFNLGVBQVIsRUFBRCxDQUFyQztBQUNBLFVBQU1VLE9BQU8xQyxJQUFJSyxZQUFKLENBQVAsRUFBMEJ1RCxPQUExQixDQUFrQ0MsY0FBbEMsQ0FBaURDLEtBQWpELENBQU47QUFDRCxHQUhEO0FBSUFyQixLQUFHLHlEQUFILEVBQThELFlBQVk7QUFDeEU1QyxtQkFBZTJDLGVBQWYsQ0FBK0IsRUFBRSxHQUFHcEIsWUFBTCxFQUFtQk8sb0JBQW9CLEtBQXZDLEVBQS9CO0FBQ0EsVUFBTTNCLElBQUlLLFlBQUosQ0FBTjtBQUNBcUMsV0FBTy9DLGtCQUFQLEVBQTJCaUQsR0FBM0IsQ0FBK0JDLGdCQUEvQjtBQUNELEdBSkQ7O0FBTUFKLEtBQUcsb0RBQUgsRUFBeUQsWUFBWTtBQUNuRTVDLG1CQUFlMkMsZUFBZixDQUErQixFQUFFLEdBQUdwQixZQUFMLEVBQW1CUSxvQkFBb0IsS0FBdkMsRUFBL0I7QUFDQSxVQUFNNUIsSUFBSUssWUFBSixDQUFOO0FBQ0FxQyxXQUFPOUMsYUFBUCxFQUFzQmdELEdBQXRCLENBQTBCQyxnQkFBMUI7QUFDRCxHQUpEO0FBS0QsQ0FyR0QiLCJmaWxlIjoiYWRkLnRlc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBsb2FkQ29uZmlnID0gcmVxdWlyZSgnLi4vLi4vc3JjL2NvZGVnZW4tY29uZmlnJyk7XG5jb25zdCBnZW5lcmF0ZVN0YXRlbWVudHMgPSByZXF1aXJlKCcuLi8uLi9zcmMvY29tbWFuZHMvc3RhdGVtZW50cycpO1xuY29uc3QgZ2VuZXJhdGVUeXBlcyA9IHJlcXVpcmUoJy4uLy4uL3NyYy9jb21tYW5kcy90eXBlcycpO1xuY29uc3QgYWRkV2Fsa3Rocm91Z2ggPSByZXF1aXJlKCcuLi8uLi9zcmMvd2Fsa3Rocm91Z2gvYWRkJyk7XG5jb25zdCBjaGFuZ2VBcHBTeW5jUmVnaW9ucyA9IHJlcXVpcmUoJy4uLy4uL3NyYy93YWxrdGhyb3VnaC9jaGFuZ2VBcHBTeW5jUmVnaW9ucycpO1xuY29uc3QgeyBBbXBsaWZ5Q29kZUdlbkFQSU5vdEZvdW5kRXJyb3IgfSA9IHJlcXVpcmUoJy4uLy4uL3NyYy9lcnJvcnMnKTtcblxuY29uc3QgYWRkID0gcmVxdWlyZSgnLi4vLi4vc3JjL2NvbW1hbmRzL2FkZCcpO1xuXG5jb25zdCB7XG4gIGRvd25sb2FkSW50cm9zcGVjdGlvblNjaGVtYVdpdGhQcm9ncmVzcyxcbiAgZ2V0QXBwU3luY0FQSURldGFpbHMsXG4gIGdldEFwcFN5bmNBUElJbmZvLFxuICBnZXRQcm9qZWN0QXdzUmVnaW9uLFxufSA9IHJlcXVpcmUoJy4uLy4uL3NyYy91dGlscycpO1xuXG5jb25zdCBNT0NLX0NPTlRFWFQgPSB7XG4gIHByaW50OiB7XG4gICAgaW5mbzogamVzdC5mbigpLFxuICB9LFxufTtcbmplc3QubW9jaygnLi4vLi4vc3JjL3dhbGt0aHJvdWdoL2FkZCcpO1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvd2Fsa3Rocm91Z2gvY2hhbmdlQXBwU3luY1JlZ2lvbnMnKTtcbmplc3QubW9jaygnLi4vLi4vc3JjL2NvbW1hbmRzL3R5cGVzJyk7XG5qZXN0Lm1vY2soJy4uLy4uL3NyYy9jb21tYW5kcy9zdGF0ZW1lbnRzJyk7XG5qZXN0Lm1vY2soJy4uLy4uL3NyYy9jb2RlZ2VuLWNvbmZpZycpO1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvdXRpbHMnKTtcblxuY29uc3QgTU9DS19JTkNMVURFX1BBVFRFUk4gPSAnTU9DS19JTkNMVURFJztcbmNvbnN0IE1PQ0tfRVhDTFVERV9QQVRURVJOID0gJ01PQ0tfRVhDTFVERSc7XG5jb25zdCBNT0NLX1NDSEVNQV9MT0NBVElPTiA9ICdJTlRST1NQRUNUSU9OX1NDSEVNQS5KU09OJztcbmNvbnN0IE1PQ0tfVEFSR0VUID0gJ1RZUEVfU0NSSVBUX09SX0ZMT1dfT1JfQU5ZX09USEVSX0xBTkdVQUdFJztcbmNvbnN0IE1PQ0tfR0VORVJBVEVEX0ZJTEVfTkFNRSA9ICdBUEkuVFMnO1xuY29uc3QgTU9DS19BUElfSUQgPSAnTU9DS19BUElfSUQnO1xuY29uc3QgTU9DS19ET0NTX0ZJTEVfUEFUSCA9ICdNT0NLX0RPQ1NfRklMRV9QQVRIJztcbmNvbnN0IE1PQ0tfRU5EUE9JTlQgPSAnTU9DS19BUFBTWU5DX0VORFBPSU5UJztcbmNvbnN0IE1PQ0tfQVBJX05BTUUgPSAnTU9DS19BUElfTkFNRSc7XG5jb25zdCBNT0NLX0RPV05MT0FERURfU0NIRU1BX0xPQ0FUSU9OID0gJ01PQ0tfRE9XTkxPQURFRF9TQ0hFTUFfTE9DQVRJT04nO1xuY29uc3QgTU9DS19BV1NfUkVHSU9OID0gJ01PQ0tfQVdTX1BST0pFQ1RfUkVHSU9OJztcblxuY29uc3QgTU9DS19BTlNXRVJTID0ge1xuICBpbmNsdWRlUGF0dGVybjogTU9DS19JTkNMVURFX1BBVFRFUk4sXG4gIGV4Y2x1ZGVQYXR0ZXJuOiBNT0NLX0VYQ0xVREVfUEFUVEVSTixcbiAgdGFyZ2V0OiBNT0NLX1RBUkdFVCxcbiAgZ2VuZXJhdGVkRmlsZU5hbWU6IE1PQ0tfR0VORVJBVEVEX0ZJTEVfTkFNRSxcbiAgZG9jc0ZpbGVQYXRoOiBNT0NLX0RPQ1NfRklMRV9QQVRILFxuICBzY2hlbWFMb2NhdGlvbjogTU9DS19TQ0hFTUFfTE9DQVRJT04sXG4gIHNob3VsZEdlbmVyYXRlRG9jczogdHJ1ZSxcbiAgc2hvdWxkR2VuZXJhdGVDb2RlOiB0cnVlLFxufTtcblxuY29uc3QgTU9DS19BUFBTWU5DX0FQSV9ERVRBSUwgPSB7XG4gIGlkOiBNT0NLX0FQSV9JRCxcbiAgZW5kcG9pbnQ6IE1PQ0tfRU5EUE9JTlQsXG4gIG5hbWU6IE1PQ0tfQVBJX05BTUUsXG59O1xuXG5jb25zdCBMT0FEX0NPTkZJR19NRVRIT0RTID0ge1xuICBnZXRQcm9qZWN0czogamVzdC5mbigpLFxuICBhZGRQcm9qZWN0OiBqZXN0LmZuKCksXG4gIHNhdmU6IGplc3QuZm4oKSxcbn07XG5cbmRlc2NyaWJlKCdjb21tYW5kIC0gYWRkJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LnJlc2V0QWxsTW9ja3MoKTtcbiAgICBMT0FEX0NPTkZJR19NRVRIT0RTLmdldFByb2plY3RzLm1vY2tSZXR1cm5WYWx1ZShbXSk7XG4gICAgYWRkV2Fsa3Rocm91Z2gubW9ja1JldHVyblZhbHVlKE1PQ0tfQU5TV0VSUyk7XG4gICAgZ2V0QXBwU3luY0FQSURldGFpbHMubW9ja1JldHVyblZhbHVlKFtNT0NLX0FQUFNZTkNfQVBJX0RFVEFJTF0pO1xuICAgIGxvYWRDb25maWcubW9ja1JldHVyblZhbHVlKExPQURfQ09ORklHX01FVEhPRFMpO1xuICAgIGRvd25sb2FkSW50cm9zcGVjdGlvblNjaGVtYVdpdGhQcm9ncmVzcy5tb2NrUmV0dXJuVmFsdWUoTU9DS19ET1dOTE9BREVEX1NDSEVNQV9MT0NBVElPTik7XG4gICAgZ2V0UHJvamVjdEF3c1JlZ2lvbi5tb2NrUmV0dXJuVmFsdWUoTU9DS19BV1NfUkVHSU9OKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCB3YWxrdGhyb3VnaCBhZGQgcXVlc3Rpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGFkZChNT0NLX0NPTlRFWFQpO1xuICAgIGV4cGVjdChnZXRBcHBTeW5jQVBJRGV0YWlscykudG9IYXZlQmVlbkNhbGxlZFdpdGgoTU9DS19DT05URVhUKTtcbiAgICBleHBlY3QoZ2V0QXBwU3luY0FQSUluZm8pLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgZXhwZWN0KExPQURfQ09ORklHX01FVEhPRFMuZ2V0UHJvamVjdHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCk7XG4gICAgZXhwZWN0KGRvd25sb2FkSW50cm9zcGVjdGlvblNjaGVtYVdpdGhQcm9ncmVzcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICBNT0NLX0NPTlRFWFQsXG4gICAgICBNT0NLX0FQSV9JRCxcbiAgICAgIE1PQ0tfU0NIRU1BX0xPQ0FUSU9OLFxuICAgICAgTU9DS19BV1NfUkVHSU9OLFxuICAgICk7XG4gICAgZXhwZWN0KExPQURfQ09ORklHX01FVEhPRFMuYWRkUHJvamVjdCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIGNvbnN0IG5ld1Byb2plY3RDb25maWcgPSBMT0FEX0NPTkZJR19NRVRIT0RTLmFkZFByb2plY3QubW9jay5jYWxsc1swXVswXTtcbiAgICBleHBlY3QobmV3UHJvamVjdENvbmZpZy5wcm9qZWN0TmFtZSkudG9FcXVhbChNT0NLX0FQSV9OQU1FKTtcbiAgICBleHBlY3QobmV3UHJvamVjdENvbmZpZy5pbmNsdWRlcykudG9FcXVhbChNT0NLX0lOQ0xVREVfUEFUVEVSTik7XG4gICAgZXhwZWN0KG5ld1Byb2plY3RDb25maWcuZXhjbHVkZXMpLnRvRXF1YWwoTU9DS19FWENMVURFX1BBVFRFUk4pO1xuICAgIGV4cGVjdChuZXdQcm9qZWN0Q29uZmlnLnNjaGVtYSkudG9FcXVhbChNT0NLX0RPV05MT0FERURfU0NIRU1BX0xPQ0FUSU9OKTtcbiAgICBleHBlY3QobmV3UHJvamVjdENvbmZpZy5hbXBsaWZ5RXh0ZW5zaW9uLmdyYXBoUUxBcGlJZCkudG9FcXVhbChNT0NLX0FQSV9JRCk7XG4gICAgZXhwZWN0KG5ld1Byb2plY3RDb25maWcuYW1wbGlmeUV4dGVuc2lvbi5jb2RlR2VuVGFyZ2V0KS50b0VxdWFsKE1PQ0tfVEFSR0VUKTtcbiAgICBleHBlY3QobmV3UHJvamVjdENvbmZpZy5hbXBsaWZ5RXh0ZW5zaW9uLmdlbmVyYXRlZEZpbGVOYW1lKS50b0VxdWFsKE1PQ0tfR0VORVJBVEVEX0ZJTEVfTkFNRSk7XG4gICAgZXhwZWN0KG5ld1Byb2plY3RDb25maWcuYW1wbGlmeUV4dGVuc2lvbi5kb2NzRmlsZVBhdGgpLnRvRXF1YWwoTU9DS19ET0NTX0ZJTEVfUEFUSCk7XG4gICAgZXhwZWN0KG5ld1Byb2plY3RDb25maWcuZW5kcG9pbnQpLnRvRXF1YWwoTU9DS19FTkRQT0lOVCk7XG5cbiAgICBleHBlY3QoZ2VuZXJhdGVTdGF0ZW1lbnRzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChNT0NLX0NPTlRFWFQsIGZhbHNlKTtcbiAgICBleHBlY3QoZ2VuZXJhdGVUeXBlcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoTU9DS19DT05URVhULCBmYWxzZSk7XG5cbiAgICBleHBlY3QoTE9BRF9DT05GSUdfTUVUSE9EUy5zYXZlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGZldGNoIHRoZSBpbmZvIGZyb20gY2xvdWQgaWYgYW4gYXBpSWQgaXMgcGFzc2VkJywgYXN5bmMgKCkgPT4ge1xuICAgIGdldEFwcFN5bmNBUElJbmZvLm1vY2tSZXR1cm5WYWx1ZShNT0NLX0FQUFNZTkNfQVBJX0RFVEFJTCk7XG4gICAgYXdhaXQgYWRkKE1PQ0tfQ09OVEVYVCwgTU9DS19BUElfSUQpO1xuICAgIGV4cGVjdChnZXRBcHBTeW5jQVBJSW5mbykudG9IYXZlQmVlbkNhbGxlZFdpdGgoTU9DS19DT05URVhULCBNT0NLX0FQSV9JRCwgTU9DS19BV1NfUkVHSU9OKTtcbiAgICBleHBlY3QoZ2V0QXBwU3luY0FQSURldGFpbHMpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgZXhwZWN0KGNoYW5nZUFwcFN5bmNSZWdpb25zKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcblxuICBkZXNjcmliZSgnQXBwU3luYyBBUEkgaW4gYSBkaWZmZXJlbnQgcmVnaW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdXNlIHRoZSB1c2VyIHByb3ZpZGVkIHJlZ2lvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IE1PQ0tfTkVXX1JFR0lPTiA9ICdORVdfQVdTX1JFR0lPTic7XG4gICAgICBnZXRBcHBTeW5jQVBJSW5mby5tb2NrSW1wbGVtZW50YXRpb25PbmNlKCgpID0+IHtcbiAgICAgICAgZ2V0QXBwU3luY0FQSUluZm8ubW9ja1JldHVyblZhbHVlKE1PQ0tfQVBQU1lOQ19BUElfREVUQUlMKTtcbiAgICAgICAgdGhyb3cgbmV3IEFtcGxpZnlDb2RlR2VuQVBJTm90Rm91bmRFcnJvcigpO1xuICAgICAgfSk7XG4gICAgICBjaGFuZ2VBcHBTeW5jUmVnaW9ucy5tb2NrUmV0dXJuVmFsdWUoeyBzaG91bGRSZXRyeTogdHJ1ZSwgcmVnaW9uOiBNT0NLX05FV19SRUdJT04gfSk7XG4gICAgICBhd2FpdCBhZGQoTU9DS19DT05URVhULCBNT0NLX0FQSV9JRCk7XG4gICAgICBleHBlY3QoZ2V0QXBwU3luY0FQSUluZm8pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKE1PQ0tfQ09OVEVYVCwgTU9DS19BUElfSUQsIE1PQ0tfQVdTX1JFR0lPTik7XG4gICAgICBleHBlY3QoY2hhbmdlQXBwU3luY1JlZ2lvbnMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKE1PQ0tfQ09OVEVYVCwgTU9DS19BV1NfUkVHSU9OKTtcbiAgICAgIGV4cGVjdChnZXRBcHBTeW5jQVBJRGV0YWlscykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChMT0FEX0NPTkZJR19NRVRIT0RTLnNhdmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBhZGQgaWYgdXNlciBjaG9vc2VzIG5vdCBjaGFuZ2UgcmVnaW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZ2V0QXBwU3luY0FQSUluZm8ubW9ja0ltcGxlbWVudGF0aW9uT25jZSgoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBBbXBsaWZ5Q29kZUdlbkFQSU5vdEZvdW5kRXJyb3IoKTtcbiAgICAgIH0pO1xuICAgICAgY2hhbmdlQXBwU3luY1JlZ2lvbnMubW9ja1JldHVyblZhbHVlKHsgc2hvdWxkUmV0cnk6IGZhbHNlIH0pO1xuICAgICAgYXdhaXQgYWRkKE1PQ0tfQ09OVEVYVCwgTU9DS19BUElfSUQpO1xuICAgICAgZXhwZWN0KGdldEFwcFN5bmNBUElJbmZvKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChNT0NLX0NPTlRFWFQsIE1PQ0tfQVBJX0lELCBNT0NLX0FXU19SRUdJT04pO1xuICAgICAgZXhwZWN0KGNoYW5nZUFwcFN5bmNSZWdpb25zKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChNT0NLX0NPTlRFWFQsIE1PQ0tfQVdTX1JFR0lPTik7XG4gICAgICBleHBlY3QoZ2V0QXBwU3luY0FQSURldGFpbHMpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QoTE9BRF9DT05GSUdfTUVUSE9EUy5zYXZlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIGFuIEFwcFN5bmMgQVBJIGlzIGFscmVhZHkgYWRkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgTE9BRF9DT05GSUdfTUVUSE9EUy5nZXRQcm9qZWN0cy5tb2NrUmV0dXJuVmFsdWUoW3sgaWQ6IE1PQ0tfQVBJX0lEIH1dKTtcbiAgICBhd2FpdCBleHBlY3QoYWRkKE1PQ0tfQ09OVEVYVCkpLnJlamVjdHMudG9CZUluc3RhbmNlT2YoRXJyb3IpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIG5vIEFwcFN5bmMgQVBJcyBhcmUgYXZhaWxhYmxlIGluIHByb2plY3QnLCBhc3luYyAoKSA9PiB7XG4gICAgZ2V0QXBwU3luY0FQSURldGFpbHMubW9ja1JldHVyblZhbHVlKFtdKTtcbiAgICBhd2FpdCBleHBlY3QoYWRkKE1PQ0tfQ09OVEVYVCkpLnJlamVjdHMudG9CZUluc3RhbmNlT2YoRXJyb3IpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIG5vIEFwcFN5bmMgQVBJcyBpcyBub3QgcHVzaGVkIHRvIGNsb3VkJywgYXN5bmMgKCkgPT4ge1xuICAgIGdldEFwcFN5bmNBUElEZXRhaWxzLm1vY2tSZXR1cm5WYWx1ZShbeyBuYW1lOiAnIHBlbmRpbmcgcHVzaCcgfV0pO1xuICAgIGF3YWl0IGV4cGVjdChhZGQoTU9DS19DT05URVhUKSkucmVqZWN0cy50b0JlSW5zdGFuY2VPZihFcnJvcik7XG4gIH0pO1xuICBpdCgnc2hvdWxkIG5vdCBnZW5lcmF0ZSBzdGF0ZW1lbnRzIHdoZW4gdXNlciBjaG9vc2VzIG5vdCB0bycsIGFzeW5jICgpID0+IHtcbiAgICBhZGRXYWxrdGhyb3VnaC5tb2NrUmV0dXJuVmFsdWUoeyAuLi5NT0NLX0FOU1dFUlMsIHNob3VsZEdlbmVyYXRlRG9jczogZmFsc2UgfSk7XG4gICAgYXdhaXQgYWRkKE1PQ0tfQ09OVEVYVCk7XG4gICAgZXhwZWN0KGdlbmVyYXRlU3RhdGVtZW50cykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBub3QgZ2VuZXJhdGUgdHlwZXMgd2hlbiB1c2VyIGNob29zZXMgbm90IHRvJywgYXN5bmMgKCkgPT4ge1xuICAgIGFkZFdhbGt0aHJvdWdoLm1vY2tSZXR1cm5WYWx1ZSh7IC4uLk1PQ0tfQU5TV0VSUywgc2hvdWxkR2VuZXJhdGVDb2RlOiBmYWxzZSB9KTtcbiAgICBhd2FpdCBhZGQoTU9DS19DT05URVhUKTtcbiAgICBleHBlY3QoZ2VuZXJhdGVUeXBlcykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG59KTtcbiJdfQ==