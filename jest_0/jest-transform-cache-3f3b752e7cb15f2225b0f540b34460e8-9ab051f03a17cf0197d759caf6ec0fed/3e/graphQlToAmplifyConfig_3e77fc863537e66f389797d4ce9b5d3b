e132ab5f707cbd95998f21cbe03b0805
/* istanbul ignore next */var cov_1jz7iqplol = function () {var path = '/c/Users/Sandro/repo/amplify-cli/packages/amplify-codegen/src/codegen-config/utils/graphQlToAmplifyConfig.js',hash = 'c13224a1701b378bc476c501da610272eb1c5340',Function = function () {}.constructor,global = new Function('return this')(),gcv = '__coverage__',coverageData = { path: '/c/Users/Sandro/repo/amplify-cli/packages/amplify-codegen/src/codegen-config/utils/graphQlToAmplifyConfig.js', statementMap: { '0': { start: { line: 2, column: 24 }, end: { line: 2, column: 26 } }, '1': { start: { line: 3, column: 12 }, end: { line: 3, column: 46 } }, '2': { start: { line: 4, column: 2 }, end: { line: 6, column: 3 } }, '3': { start: { line: 5, column: 4 }, end: { line: 5, column: 51 } }, '4': { start: { line: 7, column: 19 }, end: { line: 7, column: 48 } }, '5': { start: { line: 9, column: 2 }, end: { line: 14, column: 5 } }, '6': { start: { line: 10, column: 20 }, end: { line: 10, column: 41 } }, '7': { start: { line: 11, column: 4 }, end: { line: 11, column: 43 } }, '8': { start: { line: 13, column: 4 }, end: { line: 13, column: 74 } }, '9': { start: { line: 13, column: 13 }, end: { line: 13, column: 74 } }, '10': { start: { line: 16, column: 2 }, end: { line: 16, column: 23 } }, '11': { start: { line: 20, column: 2 }, end: { line: 32, column: 3 } }, '12': { start: { line: 21, column: 4 }, end: { line: 23, column: 5 } }, '13': { start: { line: 22, column: 6 }, end: { line: 22, column: 42 } }, '14': { start: { line: 24, column: 4 }, end: { line: 31, column: 6 } }, '15': { start: { line: 35, column: 0 }, end: { line: 35, column: 40 } } }, fnMap: { '0': { name: 'graphQlToAmplifyConfig', decl: { start: { line: 1, column: 9 }, end: { line: 1, column: 31 } }, loc: { start: { line: 1, column: 43 }, end: { line: 17, column: 1 } }, line: 1 }, '1': { name: '(anonymous_1)', decl: { start: { line: 9, column: 32 }, end: { line: 9, column: 33 } }, loc: { start: { line: 9, column: 49 }, end: { line: 14, column: 3 } }, line: 9 }, '2': { name: 'getAmplifyConfig', decl: { start: { line: 19, column: 9 }, end: { line: 19, column: 25 } }, loc: { start: { line: 19, column: 39 }, end: { line: 33, column: 1 } }, line: 19 } }, branchMap: { '0': { loc: { start: { line: 4, column: 2 }, end: { line: 6, column: 3 } }, type: 'if', locations: [{ start: { line: 4, column: 2 }, end: { line: 6, column: 3 } }, { start: { line: 4, column: 2 }, end: { line: 6, column: 3 } }], line: 4 }, '1': { loc: { start: { line: 7, column: 19 }, end: { line: 7, column: 48 } }, type: 'binary-expr', locations: [{ start: { line: 7, column: 19 }, end: { line: 7, column: 42 } }, { start: { line: 7, column: 46 }, end: { line: 7, column: 48 } }], line: 7 }, '2': { loc: { start: { line: 13, column: 4 }, end: { line: 13, column: 74 } }, type: 'if', locations: [{ start: { line: 13, column: 4 }, end: { line: 13, column: 74 } }, { start: { line: 13, column: 4 }, end: { line: 13, column: 74 } }], line: 13 }, '3': { loc: { start: { line: 19, column: 26 }, end: { line: 19, column: 37 } }, type: 'default-arg', locations: [{ start: { line: 19, column: 35 }, end: { line: 19, column: 37 } }], line: 19 }, '4': { loc: { start: { line: 20, column: 2 }, end: { line: 32, column: 3 } }, type: 'if', locations: [{ start: { line: 20, column: 2 }, end: { line: 32, column: 3 } }, { start: { line: 20, column: 2 }, end: { line: 32, column: 3 } }], line: 20 }, '5': { loc: { start: { line: 20, column: 6 }, end: { line: 20, column: 81 } }, type: 'binary-expr', locations: [{ start: { line: 20, column: 6 }, end: { line: 20, column: 12 } }, { start: { line: 20, column: 16 }, end: { line: 20, column: 33 } }, { start: { line: 20, column: 37 }, end: { line: 20, column: 62 } }, { start: { line: 20, column: 66 }, end: { line: 20, column: 81 } }], line: 20 }, '6': { loc: { start: { line: 21, column: 4 }, end: { line: 23, column: 5 } }, type: 'if', locations: [{ start: { line: 21, column: 4 }, end: { line: 23, column: 5 } }, { start: { line: 21, column: 4 }, end: { line: 23, column: 5 } }], line: 21 }, '7': { loc: { start: { line: 27, column: 16 }, end: { line: 27, column: 39 } }, type: 'binary-expr', locations: [{ start: { line: 27, column: 16 }, end: { line: 27, column: 31 } }, { start: { line: 27, column: 35 }, end: { line: 27, column: 39 } }], line: 27 } }, s: { '0': 0, '1': 0, '2': 0, '3': 0, '4': 0, '5': 0, '6': 0, '7': 0, '8': 0, '9': 0, '10': 0, '11': 0, '12': 0, '13': 0, '14': 0, '15': 0 }, f: { '0': 0, '1': 0, '2': 0 }, b: { '0': [0, 0], '1': [0, 0], '2': [0, 0], '3': [0], '4': [0, 0], '5': [0, 0, 0, 0], '6': [0, 0], '7': [0, 0] }, _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c' },coverage = global[gcv] || (global[gcv] = {});if (coverage[path] && coverage[path].hash === hash) {return coverage[path];}coverageData.hash = hash;return coverage[path] = coverageData;}();function graphQlToAmplifyConfig(gqlConfig) {/* istanbul ignore next */cov_1jz7iqplol.f[0]++;
  const amplifyConfig = /* istanbul ignore next */(cov_1jz7iqplol.s[0]++, []);
  let cfg = /* istanbul ignore next */(cov_1jz7iqplol.s[1]++, getAmplifyConfig(gqlConfig.config)); /* istanbul ignore next */cov_1jz7iqplol.s[2]++;
  if (cfg) {/* istanbul ignore next */cov_1jz7iqplol.b[0][0]++;cov_1jz7iqplol.s[3]++;
    amplifyConfig.push({ ...cfg, __root__: true });
  } else /* istanbul ignore next */{cov_1jz7iqplol.b[0][1]++;}
  const projects = /* istanbul ignore next */(cov_1jz7iqplol.s[4]++, /* istanbul ignore next */(cov_1jz7iqplol.b[1][0]++, gqlConfig.getProjects()) || /* istanbul ignore next */(cov_1jz7iqplol.b[1][1]++, {})); /* istanbul ignore next */cov_1jz7iqplol.s[5]++;

  Object.keys(projects).forEach(projectName => {/* istanbul ignore next */cov_1jz7iqplol.f[1]++;
    const project = /* istanbul ignore next */(cov_1jz7iqplol.s[6]++, projects[projectName]); /* istanbul ignore next */cov_1jz7iqplol.s[7]++;
    cfg = getAmplifyConfig(project.config); /* istanbul ignore next */cov_1jz7iqplol.s[8]++;

    if (cfg) {/* istanbul ignore next */cov_1jz7iqplol.b[2][0]++;cov_1jz7iqplol.s[9]++;amplifyConfig.push({ ...cfg, __root__: false, projectName });} else /* istanbul ignore next */{cov_1jz7iqplol.b[2][1]++;}
  }); /* istanbul ignore next */cov_1jz7iqplol.s[10]++;

  return amplifyConfig;
}

function getAmplifyConfig(config = /* istanbul ignore next */(cov_1jz7iqplol.b[3][0]++, {})) {/* istanbul ignore next */cov_1jz7iqplol.f[2]++;cov_1jz7iqplol.s[11]++;
  if ( /* istanbul ignore next */(cov_1jz7iqplol.b[5][0]++, config) && /* istanbul ignore next */(cov_1jz7iqplol.b[5][1]++, config.extensions) && /* istanbul ignore next */(cov_1jz7iqplol.b[5][2]++, config.extensions.amplify) && /* istanbul ignore next */(cov_1jz7iqplol.b[5][3]++, config.includes)) {/* istanbul ignore next */cov_1jz7iqplol.b[4][0]++;cov_1jz7iqplol.s[12]++;
    if (typeof config.includes === 'string') {/* istanbul ignore next */cov_1jz7iqplol.b[6][0]++;cov_1jz7iqplol.s[13]++;
      config.includes = [config.includes];
    } else /* istanbul ignore next */{cov_1jz7iqplol.b[6][1]++;}cov_1jz7iqplol.s[14]++;
    return {
      schema: config.schemaPath,
      includes: config.includes,
      excludes: /* istanbul ignore next */(cov_1jz7iqplol.b[7][0]++, config.excludes) || /* istanbul ignore next */(cov_1jz7iqplol.b[7][1]++, null),
      amplifyExtension: {
        ...config.extensions.amplify } };


  } else /* istanbul ignore next */{cov_1jz7iqplol.b[4][1]++;}
} /* istanbul ignore next */cov_1jz7iqplol.s[15]++;

module.exports = graphQlToAmplifyConfig;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdyYXBoUWxUb0FtcGxpZnlDb25maWcuanMiXSwibmFtZXMiOlsiZ3JhcGhRbFRvQW1wbGlmeUNvbmZpZyIsImdxbENvbmZpZyIsImFtcGxpZnlDb25maWciLCJjZmciLCJnZXRBbXBsaWZ5Q29uZmlnIiwiY29uZmlnIiwicHVzaCIsIl9fcm9vdF9fIiwicHJvamVjdHMiLCJnZXRQcm9qZWN0cyIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwicHJvamVjdE5hbWUiLCJwcm9qZWN0IiwiZXh0ZW5zaW9ucyIsImFtcGxpZnkiLCJpbmNsdWRlcyIsInNjaGVtYSIsInNjaGVtYVBhdGgiLCJleGNsdWRlcyIsImFtcGxpZnlFeHRlbnNpb24iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiZ3ZKQUFBLFNBQVNBLHNCQUFULENBQWdDQyxTQUFoQyxFQUEyQztBQUN6QyxRQUFNQyxrRUFBZ0IsRUFBaEIsQ0FBTjtBQUNBLE1BQUlDLHdEQUFNQyxpQkFBaUJILFVBQVVJLE1BQTNCLENBQU4sQ0FBSixDQUZ5QztBQUd6QyxNQUFJRixHQUFKLEVBQVM7QUFDUEQsa0JBQWNJLElBQWQsQ0FBbUIsRUFBRSxHQUFHSCxHQUFMLEVBQVVJLFVBQVUsSUFBcEIsRUFBbkI7QUFDRCxHQUZEO0FBR0EsUUFBTUMsNkRBQVcsK0RBQVVDLFdBQVYsNERBQTJCLEVBQTNCLENBQVgsQ0FBTixDQU55Qzs7QUFRekNDLFNBQU9DLElBQVAsQ0FBWUgsUUFBWixFQUFzQkksT0FBdEIsQ0FBK0JDLFdBQUQsSUFBaUI7QUFDN0MsVUFBTUMsNERBQVVOLFNBQVNLLFdBQVQsQ0FBVixDQUFOLENBRDZDO0FBRTdDVixVQUFNQyxpQkFBaUJVLFFBQVFULE1BQXpCLENBQU4sQ0FGNkM7O0FBSTdDLFFBQUlGLEdBQUosRUFBUyx3RkFBY0csSUFBZCxDQUFtQixFQUFFLEdBQUdILEdBQUwsRUFBVUksVUFBVSxLQUFwQixFQUEyQk0sV0FBM0IsRUFBbkIsRUFBNkQsQ0FBdEU7QUFDRCxHQUxELEVBUnlDOztBQWV6QyxTQUFPWCxhQUFQO0FBQ0Q7O0FBRUQsU0FBU0UsZ0JBQVQsQ0FBMEJDLDhEQUFTLEVBQVQsQ0FBMUIsRUFBdUM7QUFDckMsTUFBSSxzSEFBVUEsT0FBT1UsVUFBakIsMERBQStCVixPQUFPVSxVQUFQLENBQWtCQyxPQUFqRCwwREFBNERYLE9BQU9ZLFFBQW5FLENBQUosRUFBaUY7QUFDL0UsUUFBSSxPQUFPWixPQUFPWSxRQUFkLEtBQTJCLFFBQS9CLEVBQXlDO0FBQ3ZDWixhQUFPWSxRQUFQLEdBQWtCLENBQUNaLE9BQU9ZLFFBQVIsQ0FBbEI7QUFDRCxLQUZELDJEQUQrRTtBQUkvRSxXQUFPO0FBQ0xDLGNBQVFiLE9BQU9jLFVBRFY7QUFFTEYsZ0JBQVVaLE9BQU9ZLFFBRlo7QUFHTEcsZ0JBQVUsNERBQU9BLFFBQVAsMERBQW1CLElBQW5CLENBSEw7QUFJTEMsd0JBQWtCO0FBQ2hCLFdBQUdoQixPQUFPVSxVQUFQLENBQWtCQyxPQURMLEVBSmIsRUFBUDs7O0FBUUQsR0FaRDtBQWFELEM7O0FBRURNLE9BQU9DLE9BQVAsR0FBaUJ2QixzQkFBakIiLCJmaWxlIjoiZ3JhcGhRbFRvQW1wbGlmeUNvbmZpZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGdyYXBoUWxUb0FtcGxpZnlDb25maWcoZ3FsQ29uZmlnKSB7XG4gIGNvbnN0IGFtcGxpZnlDb25maWcgPSBbXTtcbiAgbGV0IGNmZyA9IGdldEFtcGxpZnlDb25maWcoZ3FsQ29uZmlnLmNvbmZpZyk7XG4gIGlmIChjZmcpIHtcbiAgICBhbXBsaWZ5Q29uZmlnLnB1c2goeyAuLi5jZmcsIF9fcm9vdF9fOiB0cnVlIH0pO1xuICB9XG4gIGNvbnN0IHByb2plY3RzID0gZ3FsQ29uZmlnLmdldFByb2plY3RzKCkgfHwge307XG5cbiAgT2JqZWN0LmtleXMocHJvamVjdHMpLmZvckVhY2goKHByb2plY3ROYW1lKSA9PiB7XG4gICAgY29uc3QgcHJvamVjdCA9IHByb2plY3RzW3Byb2plY3ROYW1lXTtcbiAgICBjZmcgPSBnZXRBbXBsaWZ5Q29uZmlnKHByb2plY3QuY29uZmlnKTtcblxuICAgIGlmIChjZmcpIGFtcGxpZnlDb25maWcucHVzaCh7IC4uLmNmZywgX19yb290X186IGZhbHNlLCBwcm9qZWN0TmFtZSB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIGFtcGxpZnlDb25maWc7XG59XG5cbmZ1bmN0aW9uIGdldEFtcGxpZnlDb25maWcoY29uZmlnID0ge30pIHtcbiAgaWYgKGNvbmZpZyAmJiBjb25maWcuZXh0ZW5zaW9ucyAmJiBjb25maWcuZXh0ZW5zaW9ucy5hbXBsaWZ5ICYmIGNvbmZpZy5pbmNsdWRlcykge1xuICAgIGlmICh0eXBlb2YgY29uZmlnLmluY2x1ZGVzID09PSAnc3RyaW5nJykge1xuICAgICAgY29uZmlnLmluY2x1ZGVzID0gW2NvbmZpZy5pbmNsdWRlc107XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBzY2hlbWE6IGNvbmZpZy5zY2hlbWFQYXRoLFxuICAgICAgaW5jbHVkZXM6IGNvbmZpZy5pbmNsdWRlcyxcbiAgICAgIGV4Y2x1ZGVzOiBjb25maWcuZXhjbHVkZXMgfHwgbnVsbCxcbiAgICAgIGFtcGxpZnlFeHRlbnNpb246IHtcbiAgICAgICAgLi4uY29uZmlnLmV4dGVuc2lvbnMuYW1wbGlmeSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdyYXBoUWxUb0FtcGxpZnlDb25maWc7XG4iXX0=