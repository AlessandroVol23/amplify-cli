b3e8ed8b19c9227ac145fc475c648536














jest.mock('../../src/walkthrough/questions/languageTarget');
jest.mock('../../src/walkthrough/questions/queryFilePattern');
jest.mock('../../src/walkthrough/questions/generatedFileName');
jest.mock('../../src/utils');
jest.mock('../../src/walkthrough/questions/generateCode');
jest.mock('../../src/walkthrough/questions/generateDocs');
jest.mock('../../src/walkthrough/questions/maxDepth');const askCodegenTargetLanguage = require('../../src/walkthrough/questions/languageTarget');const askCodegneQueryFilePattern = require('../../src/walkthrough/questions/queryFilePattern');const askGeneratedFileName = require('../../src/walkthrough/questions/generatedFileName');const askGenerateCode = require('../../src/walkthrough/questions/generateCode');const askShouldGenerateDocs = require('../../src/walkthrough/questions/generateDocs');const askMaxDepth = require('../../src/walkthrough/questions/maxDepth');const { getGraphQLDocPath, getSchemaDownloadLocation, getFrontEndHandler, getIncludePattern } = require('../../src/utils');const add = require('../../src/walkthrough/add');

describe('Add walk-through', () => {
  const MOCK_TARGET_LANGUAGE = 'MOCK_TARGET_LANGUAGE';
  const MOCK_INCLUDE_PATTERN = 'MOCK_INCLUDE_PATTERN';
  const MOCK_CONTEXT = {
    exeInfo: {} };


  const MOCK_GENERATED_FILE_NAME = 'MOCK_FILE_NAME.ts';
  const MOCK_DOWNLOAD_LOCATION = 'MOCK_SCHEMA_DIR/graphql/schema.json';
  const MOCK_DOCS_FILE_PATH = 'mockDocFilesPath';
  const MOCK_FRONTEND_HANDLER = 'mockFrontEndHandler';
  const MOCK_MAX_DEPTH = 20;

  beforeEach(() => {
    jest.clearAllMocks();
    askCodegenTargetLanguage.mockReturnValue(MOCK_TARGET_LANGUAGE);
    askGeneratedFileName.mockReturnValue(MOCK_GENERATED_FILE_NAME);
    askGenerateCode.mockReturnValue(true);
    askShouldGenerateDocs.mockReturnValue(true);
    getSchemaDownloadLocation.mockReturnValue(MOCK_DOWNLOAD_LOCATION);
    askCodegneQueryFilePattern.mockReturnValue(MOCK_INCLUDE_PATTERN);
    getFrontEndHandler.mockReturnValue(MOCK_FRONTEND_HANDLER);
    getGraphQLDocPath.mockReturnValue(MOCK_DOCS_FILE_PATH);
    getIncludePattern.mockReturnValue({
      graphQLDirectory: 'src/graphql',
      graphQLExtension: '*.js' });

    askMaxDepth.mockReturnValue(MOCK_MAX_DEPTH);
  });

  it('should show questions in walkthrough', async () => {
    const results = await add(MOCK_CONTEXT);
    expect(askCodegenTargetLanguage).toHaveBeenCalledWith(MOCK_CONTEXT);
    expect(askCodegneQueryFilePattern).toHaveBeenCalledWith(['src/graphql/**/*.js']);
    expect(askGeneratedFileName).toHaveBeenCalledWith('API', MOCK_TARGET_LANGUAGE);
    expect(getGraphQLDocPath).toHaveBeenCalledWith(MOCK_FRONTEND_HANDLER, MOCK_DOWNLOAD_LOCATION);
    expect(results).toEqual({
      target: MOCK_TARGET_LANGUAGE,
      includePattern: MOCK_INCLUDE_PATTERN,
      excludePattern: ['./amplify/**'],
      generatedFileName: MOCK_GENERATED_FILE_NAME,
      shouldGenerateCode: true,
      schemaLocation: MOCK_DOWNLOAD_LOCATION,
      docsFilePath: MOCK_DOCS_FILE_PATH,
      shouldGenerateDocs: true,
      maxDepth: MOCK_MAX_DEPTH });

  });

  it('should not ask code generation specific questions in android projects', async () => {
    getFrontEndHandler.mockReturnValue('android');
    const results = await add(MOCK_CONTEXT);
    expect(askCodegenTargetLanguage).not.toHaveBeenCalled();
    expect(askCodegneQueryFilePattern).toHaveBeenCalledWith(['src/graphql/**/*.js']);
    expect(askGeneratedFileName).not.toHaveBeenCalled();
    expect(results).toEqual({
      includePattern: MOCK_INCLUDE_PATTERN,
      excludePattern: ['./amplify/**'],
      schemaLocation: MOCK_DOWNLOAD_LOCATION,
      docsFilePath: MOCK_DOCS_FILE_PATH,
      shouldGenerateDocs: true,
      maxDepth: MOCK_MAX_DEPTH });

  });

  it('should should skip includePattern when asked to skip', async () => {
    const skip = ['includePattern'];
    const results = await add(MOCK_CONTEXT, skip);
    expect(askCodegneQueryFilePattern).not.toHaveBeenCalled();
    expect(results).not.toHaveProperty('includePattern');
  });

  it('should should skip includePattern when asked to skip', async () => {
    const skip = ['targetLanguage'];
    const results = await add(MOCK_CONTEXT, skip);
    expect(askCodegenTargetLanguage).not.toHaveBeenCalled();
    expect(results).not.toHaveProperty('target');
  });

  it('should should skip generatedFileName when asked to skip', async () => {
    const skip = ['generatedFileName'];
    const results = await add(MOCK_CONTEXT, skip);
    expect(askGeneratedFileName).not.toHaveBeenCalled();
    expect(results).not.toHaveProperty('generatedFileName');
  });

  it('should should skip shouldGenerateCode when asked to skip', async () => {
    const skip = ['shouldGenerateCode'];
    const results = await add(MOCK_CONTEXT, skip);
    expect(askGenerateCode).not.toHaveBeenCalled();
    expect(results).not.toHaveProperty('shouldGenerateCode');
  });

  it('should should skip shouldGenerateDocs when asked to skip', async () => {
    const skip = ['shouldGenerateDocs'];
    const results = await add(MOCK_CONTEXT, skip);
    expect(askShouldGenerateDocs).not.toHaveBeenCalled();
    expect(results).not.toHaveProperty('shouldGenerateDocs');
    expect(results).not.toHaveProperty('docsFilePath');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZC50ZXN0LmpzIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwiYXNrQ29kZWdlblRhcmdldExhbmd1YWdlIiwicmVxdWlyZSIsImFza0NvZGVnbmVRdWVyeUZpbGVQYXR0ZXJuIiwiYXNrR2VuZXJhdGVkRmlsZU5hbWUiLCJhc2tHZW5lcmF0ZUNvZGUiLCJhc2tTaG91bGRHZW5lcmF0ZURvY3MiLCJhc2tNYXhEZXB0aCIsImdldEdyYXBoUUxEb2NQYXRoIiwiZ2V0U2NoZW1hRG93bmxvYWRMb2NhdGlvbiIsImdldEZyb250RW5kSGFuZGxlciIsImdldEluY2x1ZGVQYXR0ZXJuIiwiYWRkIiwiZGVzY3JpYmUiLCJNT0NLX1RBUkdFVF9MQU5HVUFHRSIsIk1PQ0tfSU5DTFVERV9QQVRURVJOIiwiTU9DS19DT05URVhUIiwiZXhlSW5mbyIsIk1PQ0tfR0VORVJBVEVEX0ZJTEVfTkFNRSIsIk1PQ0tfRE9XTkxPQURfTE9DQVRJT04iLCJNT0NLX0RPQ1NfRklMRV9QQVRIIiwiTU9DS19GUk9OVEVORF9IQU5ETEVSIiwiTU9DS19NQVhfREVQVEgiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSZXR1cm5WYWx1ZSIsImdyYXBoUUxEaXJlY3RvcnkiLCJncmFwaFFMRXh0ZW5zaW9uIiwiaXQiLCJyZXN1bHRzIiwiZXhwZWN0IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJ0b0VxdWFsIiwidGFyZ2V0IiwiaW5jbHVkZVBhdHRlcm4iLCJleGNsdWRlUGF0dGVybiIsImdlbmVyYXRlZEZpbGVOYW1lIiwic2hvdWxkR2VuZXJhdGVDb2RlIiwic2NoZW1hTG9jYXRpb24iLCJkb2NzRmlsZVBhdGgiLCJzaG91bGRHZW5lcmF0ZURvY3MiLCJtYXhEZXB0aCIsIm5vdCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJza2lwIiwidG9IYXZlUHJvcGVydHkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBY0FBLEtBQUtDLElBQUwsQ0FBVSxnREFBVjtBQUNBRCxL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TUFBTWpCLElBQUlJLFlBQUosRUFBa0I0QixJQUFsQixDQUF0QjtBQUNBZCxXQUFPMUIsb0JBQVAsRUFBNkJzQyxHQUE3QixDQUFpQ0MsZ0JBQWpDO0FBQ0FiLFdBQU9ELE9BQVAsRUFBZ0JhLEdBQWhCLENBQW9CRyxjQUFwQixDQUFtQyxtQkFBbkM7QUFDRCxHQUxEOztBQU9BakIsS0FBRywwREFBSCxFQUErRCxZQUFZO0FBQ3pFLFVBQU1nQixPQUFPLENBQUMsb0JBQUQsQ0FBYjtBQUNBLFVBQU1mLFVBQVUsTUFBTWpCLElBQUlJLFlBQUosRUFBa0I0QixJQUFsQixDQUF0QjtBQUNBZCxXQUFPekIsZUFBUCxFQUF3QnFDLEdBQXhCLENBQTRCQyxnQkFBNUI7QUFDQWIsV0FBT0QsT0FBUCxFQUFnQmEsR0FBaEIsQ0FBb0JHLGNBQXBCLENBQW1DLG9CQUFuQztBQUNELEdBTEQ7O0FBT0FqQixLQUFHLDBEQUFILEVBQStELFlBQVk7QUFDekUsVUFBTWdCLE9BQU8sQ0FBQyxvQkFBRCxDQUFiO0FBQ0EsVUFBTWYsVUFBVSxNQUFNakIsSUFBSUksWUFBSixFQUFrQjRCLElBQWxCLENBQXRCO0FBQ0FkLFdBQU94QixxQkFBUCxFQUE4Qm9DLEdBQTlCLENBQWtDQyxnQkFBbEM7QUFDQWIsV0FBT0QsT0FBUCxFQUFnQmEsR0FBaEIsQ0FBb0JHLGNBQXBCLENBQW1DLG9CQUFuQztBQUNBZixXQUFPRCxPQUFQLEVBQWdCYSxHQUFoQixDQUFvQkcsY0FBcEIsQ0FBbUMsY0FBbkM7QUFDRCxHQU5EO0FBT0QsQ0FwR0QiLCJmaWxlIjoiYWRkLnRlc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBhc2tDb2RlZ2VuVGFyZ2V0TGFuZ3VhZ2UgPSByZXF1aXJlKCcuLi8uLi9zcmMvd2Fsa3Rocm91Z2gvcXVlc3Rpb25zL2xhbmd1YWdlVGFyZ2V0Jyk7XG5jb25zdCBhc2tDb2RlZ25lUXVlcnlGaWxlUGF0dGVybiA9IHJlcXVpcmUoJy4uLy4uL3NyYy93YWxrdGhyb3VnaC9xdWVzdGlvbnMvcXVlcnlGaWxlUGF0dGVybicpO1xuY29uc3QgYXNrR2VuZXJhdGVkRmlsZU5hbWUgPSByZXF1aXJlKCcuLi8uLi9zcmMvd2Fsa3Rocm91Z2gvcXVlc3Rpb25zL2dlbmVyYXRlZEZpbGVOYW1lJyk7XG5jb25zdCBhc2tHZW5lcmF0ZUNvZGUgPSByZXF1aXJlKCcuLi8uLi9zcmMvd2Fsa3Rocm91Z2gvcXVlc3Rpb25zL2dlbmVyYXRlQ29kZScpO1xuY29uc3QgYXNrU2hvdWxkR2VuZXJhdGVEb2NzID0gcmVxdWlyZSgnLi4vLi4vc3JjL3dhbGt0aHJvdWdoL3F1ZXN0aW9ucy9nZW5lcmF0ZURvY3MnKTtcbmNvbnN0IGFza01heERlcHRoID0gcmVxdWlyZSgnLi4vLi4vc3JjL3dhbGt0aHJvdWdoL3F1ZXN0aW9ucy9tYXhEZXB0aCcpO1xuY29uc3Qge1xuICBnZXRHcmFwaFFMRG9jUGF0aCxcbiAgZ2V0U2NoZW1hRG93bmxvYWRMb2NhdGlvbixcbiAgZ2V0RnJvbnRFbmRIYW5kbGVyLFxuICBnZXRJbmNsdWRlUGF0dGVybixcbn0gPSByZXF1aXJlKCcuLi8uLi9zcmMvdXRpbHMnKTtcbmNvbnN0IGFkZCA9IHJlcXVpcmUoJy4uLy4uL3NyYy93YWxrdGhyb3VnaC9hZGQnKTtcblxuamVzdC5tb2NrKCcuLi8uLi9zcmMvd2Fsa3Rocm91Z2gvcXVlc3Rpb25zL2xhbmd1YWdlVGFyZ2V0Jyk7XG5qZXN0Lm1vY2soJy4uLy4uL3NyYy93YWxrdGhyb3VnaC9xdWVzdGlvbnMvcXVlcnlGaWxlUGF0dGVybicpO1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvd2Fsa3Rocm91Z2gvcXVlc3Rpb25zL2dlbmVyYXRlZEZpbGVOYW1lJyk7XG5qZXN0Lm1vY2soJy4uLy4uL3NyYy91dGlscycpO1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvd2Fsa3Rocm91Z2gvcXVlc3Rpb25zL2dlbmVyYXRlQ29kZScpO1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvd2Fsa3Rocm91Z2gvcXVlc3Rpb25zL2dlbmVyYXRlRG9jcycpO1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvd2Fsa3Rocm91Z2gvcXVlc3Rpb25zL21heERlcHRoJyk7XG5cbmRlc2NyaWJlKCdBZGQgd2Fsay10aHJvdWdoJywgKCkgPT4ge1xuICBjb25zdCBNT0NLX1RBUkdFVF9MQU5HVUFHRSA9ICdNT0NLX1RBUkdFVF9MQU5HVUFHRSc7XG4gIGNvbnN0IE1PQ0tfSU5DTFVERV9QQVRURVJOID0gJ01PQ0tfSU5DTFVERV9QQVRURVJOJztcbiAgY29uc3QgTU9DS19DT05URVhUID0ge1xuICAgIGV4ZUluZm86IHtcbiAgICB9LFxuICB9O1xuICBjb25zdCBNT0NLX0dFTkVSQVRFRF9GSUxFX05BTUUgPSAnTU9DS19GSUxFX05BTUUudHMnO1xuICBjb25zdCBNT0NLX0RPV05MT0FEX0xPQ0FUSU9OID0gJ01PQ0tfU0NIRU1BX0RJUi9ncmFwaHFsL3NjaGVtYS5qc29uJztcbiAgY29uc3QgTU9DS19ET0NTX0ZJTEVfUEFUSCA9ICdtb2NrRG9jRmlsZXNQYXRoJztcbiAgY29uc3QgTU9DS19GUk9OVEVORF9IQU5ETEVSID0gJ21vY2tGcm9udEVuZEhhbmRsZXInO1xuICBjb25zdCBNT0NLX01BWF9ERVBUSCA9IDIwO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIGFza0NvZGVnZW5UYXJnZXRMYW5ndWFnZS5tb2NrUmV0dXJuVmFsdWUoTU9DS19UQVJHRVRfTEFOR1VBR0UpO1xuICAgIGFza0dlbmVyYXRlZEZpbGVOYW1lLm1vY2tSZXR1cm5WYWx1ZShNT0NLX0dFTkVSQVRFRF9GSUxFX05BTUUpO1xuICAgIGFza0dlbmVyYXRlQ29kZS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSk7XG4gICAgYXNrU2hvdWxkR2VuZXJhdGVEb2NzLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcbiAgICBnZXRTY2hlbWFEb3dubG9hZExvY2F0aW9uLm1vY2tSZXR1cm5WYWx1ZShNT0NLX0RPV05MT0FEX0xPQ0FUSU9OKTtcbiAgICBhc2tDb2RlZ25lUXVlcnlGaWxlUGF0dGVybi5tb2NrUmV0dXJuVmFsdWUoTU9DS19JTkNMVURFX1BBVFRFUk4pO1xuICAgIGdldEZyb250RW5kSGFuZGxlci5tb2NrUmV0dXJuVmFsdWUoTU9DS19GUk9OVEVORF9IQU5ETEVSKTtcbiAgICBnZXRHcmFwaFFMRG9jUGF0aC5tb2NrUmV0dXJuVmFsdWUoTU9DS19ET0NTX0ZJTEVfUEFUSCk7XG4gICAgZ2V0SW5jbHVkZVBhdHRlcm4ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIGdyYXBoUUxEaXJlY3Rvcnk6ICdzcmMvZ3JhcGhxbCcsXG4gICAgICBncmFwaFFMRXh0ZW5zaW9uOiAnKi5qcycsXG4gICAgfSk7XG4gICAgYXNrTWF4RGVwdGgubW9ja1JldHVyblZhbHVlKE1PQ0tfTUFYX0RFUFRIKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBzaG93IHF1ZXN0aW9ucyBpbiB3YWxrdGhyb3VnaCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgYWRkKE1PQ0tfQ09OVEVYVCk7XG4gICAgZXhwZWN0KGFza0NvZGVnZW5UYXJnZXRMYW5ndWFnZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoTU9DS19DT05URVhUKTtcbiAgICBleHBlY3QoYXNrQ29kZWduZVF1ZXJ5RmlsZVBhdHRlcm4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFsnc3JjL2dyYXBocWwvKiovKi5qcyddKTtcbiAgICBleHBlY3QoYXNrR2VuZXJhdGVkRmlsZU5hbWUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdBUEknLCBNT0NLX1RBUkdFVF9MQU5HVUFHRSk7XG4gICAgZXhwZWN0KGdldEdyYXBoUUxEb2NQYXRoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChNT0NLX0ZST05URU5EX0hBTkRMRVIsIE1PQ0tfRE9XTkxPQURfTE9DQVRJT04pO1xuICAgIGV4cGVjdChyZXN1bHRzKS50b0VxdWFsKHtcbiAgICAgIHRhcmdldDogTU9DS19UQVJHRVRfTEFOR1VBR0UsXG4gICAgICBpbmNsdWRlUGF0dGVybjogTU9DS19JTkNMVURFX1BBVFRFUk4sXG4gICAgICBleGNsdWRlUGF0dGVybjogWycuL2FtcGxpZnkvKionXSxcbiAgICAgIGdlbmVyYXRlZEZpbGVOYW1lOiBNT0NLX0dFTkVSQVRFRF9GSUxFX05BTUUsXG4gICAgICBzaG91bGRHZW5lcmF0ZUNvZGU6IHRydWUsXG4gICAgICBzY2hlbWFMb2NhdGlvbjogTU9DS19ET1dOTE9BRF9MT0NBVElPTixcbiAgICAgIGRvY3NGaWxlUGF0aDogTU9DS19ET0NTX0ZJTEVfUEFUSCxcbiAgICAgIHNob3VsZEdlbmVyYXRlRG9jczogdHJ1ZSxcbiAgICAgIG1heERlcHRoOiBNT0NLX01BWF9ERVBUSCxcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBub3QgYXNrIGNvZGUgZ2VuZXJhdGlvbiBzcGVjaWZpYyBxdWVzdGlvbnMgaW4gYW5kcm9pZCBwcm9qZWN0cycsIGFzeW5jICgpID0+IHtcbiAgICBnZXRGcm9udEVuZEhhbmRsZXIubW9ja1JldHVyblZhbHVlKCdhbmRyb2lkJyk7XG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGFkZChNT0NLX0NPTlRFWFQpO1xuICAgIGV4cGVjdChhc2tDb2RlZ2VuVGFyZ2V0TGFuZ3VhZ2UpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgZXhwZWN0KGFza0NvZGVnbmVRdWVyeUZpbGVQYXR0ZXJuKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChbJ3NyYy9ncmFwaHFsLyoqLyouanMnXSk7XG4gICAgZXhwZWN0KGFza0dlbmVyYXRlZEZpbGVOYW1lKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIGV4cGVjdChyZXN1bHRzKS50b0VxdWFsKHtcbiAgICAgIGluY2x1ZGVQYXR0ZXJuOiBNT0NLX0lOQ0xVREVfUEFUVEVSTixcbiAgICAgIGV4Y2x1ZGVQYXR0ZXJuOiBbJy4vYW1wbGlmeS8qKiddLFxuICAgICAgc2NoZW1hTG9jYXRpb246IE1PQ0tfRE9XTkxPQURfTE9DQVRJT04sXG4gICAgICBkb2NzRmlsZVBhdGg6IE1PQ0tfRE9DU19GSUxFX1BBVEgsXG4gICAgICBzaG91bGRHZW5lcmF0ZURvY3M6IHRydWUsXG4gICAgICBtYXhEZXB0aDogTU9DS19NQVhfREVQVEgsXG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgc2hvdWxkIHNraXAgaW5jbHVkZVBhdHRlcm4gd2hlbiBhc2tlZCB0byBza2lwJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHNraXAgPSBbJ2luY2x1ZGVQYXR0ZXJuJ107XG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGFkZChNT0NLX0NPTlRFWFQsIHNraXApO1xuICAgIGV4cGVjdChhc2tDb2RlZ25lUXVlcnlGaWxlUGF0dGVybikubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICBleHBlY3QocmVzdWx0cykubm90LnRvSGF2ZVByb3BlcnR5KCdpbmNsdWRlUGF0dGVybicpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHNob3VsZCBza2lwIGluY2x1ZGVQYXR0ZXJuIHdoZW4gYXNrZWQgdG8gc2tpcCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBza2lwID0gWyd0YXJnZXRMYW5ndWFnZSddO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBhZGQoTU9DS19DT05URVhULCBza2lwKTtcbiAgICBleHBlY3QoYXNrQ29kZWdlblRhcmdldExhbmd1YWdlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIGV4cGVjdChyZXN1bHRzKS5ub3QudG9IYXZlUHJvcGVydHkoJ3RhcmdldCcpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHNob3VsZCBza2lwIGdlbmVyYXRlZEZpbGVOYW1lIHdoZW4gYXNrZWQgdG8gc2tpcCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBza2lwID0gWydnZW5lcmF0ZWRGaWxlTmFtZSddO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBhZGQoTU9DS19DT05URVhULCBza2lwKTtcbiAgICBleHBlY3QoYXNrR2VuZXJhdGVkRmlsZU5hbWUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgZXhwZWN0KHJlc3VsdHMpLm5vdC50b0hhdmVQcm9wZXJ0eSgnZ2VuZXJhdGVkRmlsZU5hbWUnKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBzaG91bGQgc2tpcCBzaG91bGRHZW5lcmF0ZUNvZGUgd2hlbiBhc2tlZCB0byBza2lwJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHNraXAgPSBbJ3Nob3VsZEdlbmVyYXRlQ29kZSddO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBhZGQoTU9DS19DT05URVhULCBza2lwKTtcbiAgICBleHBlY3QoYXNrR2VuZXJhdGVDb2RlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIGV4cGVjdChyZXN1bHRzKS5ub3QudG9IYXZlUHJvcGVydHkoJ3Nob3VsZEdlbmVyYXRlQ29kZScpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHNob3VsZCBza2lwIHNob3VsZEdlbmVyYXRlRG9jcyB3aGVuIGFza2VkIHRvIHNraXAnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgc2tpcCA9IFsnc2hvdWxkR2VuZXJhdGVEb2NzJ107XG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGFkZChNT0NLX0NPTlRFWFQsIHNraXApO1xuICAgIGV4cGVjdChhc2tTaG91bGRHZW5lcmF0ZURvY3MpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgZXhwZWN0KHJlc3VsdHMpLm5vdC50b0hhdmVQcm9wZXJ0eSgnc2hvdWxkR2VuZXJhdGVEb2NzJyk7XG4gICAgZXhwZWN0KHJlc3VsdHMpLm5vdC50b0hhdmVQcm9wZXJ0eSgnZG9jc0ZpbGVQYXRoJyk7XG4gIH0pO1xufSk7XG4iXX0=