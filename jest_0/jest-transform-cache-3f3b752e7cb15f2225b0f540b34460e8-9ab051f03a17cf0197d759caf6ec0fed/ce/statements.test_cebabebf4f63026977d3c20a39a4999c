4ece535715077755dd9432ab1c478baa















jest.mock('amplify-graphql-docs-generator');
jest.mock('../../src/codegen-config');
jest.mock('../../src/utils');
jest.mock('fs-jetpack');const path = require('path');const { default: generate } = require('amplify-graphql-docs-generator');const jetpack = require('fs-jetpack');const loadConfig = require('../../src/codegen-config');const generateStatements = require('../../src/commands/statements');const constants = require('../../src/constants');const { downloadIntrospectionSchemaWithProgress, getFrontEndHandler } = require('../../src/utils');const MOCK_CONTEXT = { print: { info: jest.fn() } };

const MOCK_INCLUDE_PATH = 'MOCK_INCLUDE';
const MOCK_STATEMENTS_PATH = 'MOCK_STATEMENTS_PATH';
const MOCK_SCHEMA = 'INTROSPECTION_SCHEMA.JSON';
const MOCK_TARGET_LANGUAGE = 'TYPE_SCRIPT_OR_FLOW_OR_ANY_OTHER_LANGUAGE';
const MOCK_GENERATED_FILE_NAME = 'API.TS';
const MOCK_API_ID = 'MOCK_API_ID';
const MOCK_REGION = 'MOCK_AWS_REGION';

const MOCK_PROJECT = {
  includes: [MOCK_INCLUDE_PATH],
  schema: MOCK_SCHEMA,
  amplifyExtension: {
    generatedFileName: MOCK_GENERATED_FILE_NAME,
    codeGenTarget: MOCK_TARGET_LANGUAGE,
    graphQLApiId: MOCK_API_ID,
    docsFilePath: MOCK_STATEMENTS_PATH,
    region: MOCK_REGION } };



getFrontEndHandler.mockReturnValue('javascript');

describe('command - statements', () => {
  beforeEach(() => {
    jest.clearAllMocks();
    jetpack.exists.mockReturnValue(true);
    getFrontEndHandler.mockReturnValue('javascript');
    loadConfig.mockReturnValue({
      getProjects: jest.fn().mockReturnValue([MOCK_PROJECT]) });

  });

  it('should generate statements', async () => {
    const forceDownload = false;
    await generateStatements(MOCK_CONTEXT, forceDownload);
    expect(getFrontEndHandler).toHaveBeenCalledWith(MOCK_CONTEXT);
    expect(loadConfig).toHaveBeenCalledWith(MOCK_CONTEXT);

    expect(jetpack.exists).toHaveBeenCalledWith(path.resolve(MOCK_SCHEMA));
    expect(generate).toHaveBeenCalledWith(
    path.resolve(MOCK_SCHEMA),
    MOCK_STATEMENTS_PATH,
    { separateFiles: true, language: MOCK_TARGET_LANGUAGE });

  });

  it('should generate graphql statements for non JS projects', async () => {
    getFrontEndHandler.mockReturnValue('ios');
    const forceDownload = false;
    await generateStatements(MOCK_CONTEXT, forceDownload);
    expect(generate).toHaveBeenCalledWith(
    path.resolve(MOCK_SCHEMA),
    MOCK_STATEMENTS_PATH,
    { separateFiles: true, language: 'graphql' });

  });

  it('should download the schema if forceDownload flag is passed', async () => {
    const forceDownload = true;
    await generateStatements(MOCK_CONTEXT, forceDownload);
    expect(downloadIntrospectionSchemaWithProgress).toHaveBeenCalledWith(
    MOCK_CONTEXT,
    MOCK_API_ID,
    MOCK_SCHEMA,
    MOCK_REGION);

  });

  it('should download the schema if the schema file is missing', async () => {
    jetpack.exists.mockReturnValue(false);
    const forceDownload = false;
    await generateStatements(MOCK_CONTEXT, forceDownload);
    expect(downloadIntrospectionSchemaWithProgress).toHaveBeenCalledWith(
    MOCK_CONTEXT,
    MOCK_API_ID,
    MOCK_SCHEMA,
    MOCK_REGION);

  });

  it('should show a warning if there are no projects configured', async () => {
    loadConfig.mockReturnValue({
      getProjects: jest.fn().mockReturnValue([]) });

    await generateStatements(MOCK_CONTEXT, false);
    expect(MOCK_CONTEXT.print.info).toHaveBeenCalledWith(constants.ERROR_CODEGEN_NO_API_CONFIGURED);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YXRlbWVudHMudGVzdC5qcyJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInBhdGgiLCJyZXF1aXJlIiwiZGVmYXVsdCIsImdlbmVyYXRlIiwiamV0cGFjayIsImxvYWRDb25maWciLCJnZW5lcmF0ZVN0YXRlbWVudHMiLCJjb25zdGFudHMiLCJkb3dubG9hZEludHJvc3BlY3Rpb25TY2hlbWFXaXRoUHJvZ3Jlc3MiLCJnZXRGcm9udEVuZEhhbmRsZXIiLCJNT0NLX0NPTlRFWFQiLCJwcmludCIsImluZm8iLCJmbiIsIk1PQ0tfSU5DTFVERV9QQVRIIiwiTU9DS19TVEFURU1FTlRTX1BBVEgiLCJNT0NLX1NDSEVNQSIsIk1PQ0tfVEFSR0VUX0xBTkdVQUdFIiwiTU9DS19HRU5FUkFURURfRklMRV9OQU1FIiwiTU9DS19BUElfSUQiLCJNT0NLX1JFR0lPTiIsIk1PQ0tfUFJPSkVDVCIsImluY2x1ZGVzIiwic2NoZW1hIiwiYW1wbGlmeUV4dGVuc2lvbiIsImdlbmVyYXRlZEZpbGVOYW1lIiwiY29kZUdlblRhcmdldCIsImdyYXBoUUxBcGlJZCIsImRvY3NGaWxlUGF0aCIsInJlZ2lvbiIsIm1vY2tSZXR1cm5WYWx1ZSIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJleGlzdHMiLCJnZXRQcm9qZWN0cyIsIml0IiwiZm9yY2VEb3dubG9hZCIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwicmVzb2x2ZSIsInNlcGFyYXRlRmlsZXMiLCJsYW5ndWFnZSIsIkVSUk9SX0NPREVHRU5fTk9fQVBJX0NPTkZJR1VSRUQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQWVBQSxLQUFLQyxJQUFMLENBQVUsZ0NBQVY7QUFDQUQsS0FBS0MsSUFBTCxDQUFVLDBCQUFWO0FBQ0FELEtBQUtDLElBQUwsQ0FBVSxpQkFBVjtBQUNBRCxLQUFLQyxJQUFMLENBQVUsWUFBVixFQWxCQSxNQUFNQyxPQUFPQyxRQUFRLE1BQVIsQ0FB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O0FBR0VILGVBSEY7QUFJRUksZUFKRjs7QUFNRCxHQVREOztBQVdBZ0IsS0FBRywwREFBSCxFQUErRCxZQUFZO0FBQ3pFaEMsWUFBUThCLE1BQVIsQ0FBZUosZUFBZixDQUErQixLQUEvQjtBQUNBLFVBQU1PLGdCQUFnQixLQUF0QjtBQUNBLFVBQU0vQixtQkFBbUJJLFlBQW5CLEVBQWlDMkIsYUFBakMsQ0FBTjtBQUNBQyxXQUFPOUIsdUNBQVAsRUFBZ0QrQixvQkFBaEQ7QUFDRTdCLGdCQURGO0FBRUVTLGVBRkY7QUFHRUgsZUFIRjtBQUlFSSxlQUpGOztBQU1ELEdBVkQ7O0FBWUFnQixLQUFHLDJEQUFILEVBQWdFLFlBQVk7QUFDMUUvQixlQUFXeUIsZUFBWCxDQUEyQjtBQUN6QkssbUJBQWFyQyxLQUFLZSxFQUFMLEdBQVVpQixlQUFWLENBQTBCLEVBQTFCLENBRFksRUFBM0I7O0FBR0EsVUFBTXhCLG1CQUFtQkksWUFBbkIsRUFBaUMsS0FBakMsQ0FBTjtBQUNBNEIsV0FBTzVCLGFBQWFDLEtBQWIsQ0FBbUJDLElBQTFCLEVBQWdDMkIsb0JBQWhDLENBQXFEaEMsVUFBVW9DLCtCQUEvRDtBQUNELEdBTkQ7QUFPRCxDQWpFRCIsImZpbGUiOiJzdGF0ZW1lbnRzLnRlc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgeyBkZWZhdWx0OiBnZW5lcmF0ZSB9ID0gcmVxdWlyZSgnYW1wbGlmeS1ncmFwaHFsLWRvY3MtZ2VuZXJhdG9yJyk7XG5jb25zdCBqZXRwYWNrID0gcmVxdWlyZSgnZnMtamV0cGFjaycpO1xuXG5jb25zdCBsb2FkQ29uZmlnID0gcmVxdWlyZSgnLi4vLi4vc3JjL2NvZGVnZW4tY29uZmlnJyk7XG5jb25zdCBnZW5lcmF0ZVN0YXRlbWVudHMgPSByZXF1aXJlKCcuLi8uLi9zcmMvY29tbWFuZHMvc3RhdGVtZW50cycpO1xuY29uc3QgY29uc3RhbnRzID0gcmVxdWlyZSgnLi4vLi4vc3JjL2NvbnN0YW50cycpO1xuY29uc3QgeyBkb3dubG9hZEludHJvc3BlY3Rpb25TY2hlbWFXaXRoUHJvZ3Jlc3MsIGdldEZyb250RW5kSGFuZGxlciB9ID0gcmVxdWlyZSgnLi4vLi4vc3JjL3V0aWxzJyk7XG5cbmNvbnN0IE1PQ0tfQ09OVEVYVCA9IHtcbiAgcHJpbnQ6IHtcbiAgICBpbmZvOiBqZXN0LmZuKCksXG4gIH0sXG59O1xuXG5qZXN0Lm1vY2soJ2FtcGxpZnktZ3JhcGhxbC1kb2NzLWdlbmVyYXRvcicpO1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvY29kZWdlbi1jb25maWcnKTtcbmplc3QubW9jaygnLi4vLi4vc3JjL3V0aWxzJyk7XG5qZXN0Lm1vY2soJ2ZzLWpldHBhY2snKTtcblxuY29uc3QgTU9DS19JTkNMVURFX1BBVEggPSAnTU9DS19JTkNMVURFJztcbmNvbnN0IE1PQ0tfU1RBVEVNRU5UU19QQVRIID0gJ01PQ0tfU1RBVEVNRU5UU19QQVRIJztcbmNvbnN0IE1PQ0tfU0NIRU1BID0gJ0lOVFJPU1BFQ1RJT05fU0NIRU1BLkpTT04nO1xuY29uc3QgTU9DS19UQVJHRVRfTEFOR1VBR0UgPSAnVFlQRV9TQ1JJUFRfT1JfRkxPV19PUl9BTllfT1RIRVJfTEFOR1VBR0UnO1xuY29uc3QgTU9DS19HRU5FUkFURURfRklMRV9OQU1FID0gJ0FQSS5UUyc7XG5jb25zdCBNT0NLX0FQSV9JRCA9ICdNT0NLX0FQSV9JRCc7XG5jb25zdCBNT0NLX1JFR0lPTiA9ICdNT0NLX0FXU19SRUdJT04nO1xuXG5jb25zdCBNT0NLX1BST0pFQ1QgPSB7XG4gIGluY2x1ZGVzOiBbTU9DS19JTkNMVURFX1BBVEhdLFxuICBzY2hlbWE6IE1PQ0tfU0NIRU1BLFxuICBhbXBsaWZ5RXh0ZW5zaW9uOiB7XG4gICAgZ2VuZXJhdGVkRmlsZU5hbWU6IE1PQ0tfR0VORVJBVEVEX0ZJTEVfTkFNRSxcbiAgICBjb2RlR2VuVGFyZ2V0OiBNT0NLX1RBUkdFVF9MQU5HVUFHRSxcbiAgICBncmFwaFFMQXBpSWQ6IE1PQ0tfQVBJX0lELFxuICAgIGRvY3NGaWxlUGF0aDogTU9DS19TVEFURU1FTlRTX1BBVEgsXG4gICAgcmVnaW9uOiBNT0NLX1JFR0lPTixcbiAgfSxcbn07XG5cbmdldEZyb250RW5kSGFuZGxlci5tb2NrUmV0dXJuVmFsdWUoJ2phdmFzY3JpcHQnKTtcblxuZGVzY3JpYmUoJ2NvbW1hbmQgLSBzdGF0ZW1lbnRzJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBqZXRwYWNrLmV4aXN0cy5tb2NrUmV0dXJuVmFsdWUodHJ1ZSk7XG4gICAgZ2V0RnJvbnRFbmRIYW5kbGVyLm1vY2tSZXR1cm5WYWx1ZSgnamF2YXNjcmlwdCcpO1xuICAgIGxvYWRDb25maWcubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIGdldFByb2plY3RzOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKFtNT0NLX1BST0pFQ1RdKSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBzdGF0ZW1lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGZvcmNlRG93bmxvYWQgPSBmYWxzZTtcbiAgICBhd2FpdCBnZW5lcmF0ZVN0YXRlbWVudHMoTU9DS19DT05URVhULCBmb3JjZURvd25sb2FkKTtcbiAgICBleHBlY3QoZ2V0RnJvbnRFbmRIYW5kbGVyKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChNT0NLX0NPTlRFWFQpO1xuICAgIGV4cGVjdChsb2FkQ29uZmlnKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChNT0NLX0NPTlRFWFQpO1xuXG4gICAgZXhwZWN0KGpldHBhY2suZXhpc3RzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChwYXRoLnJlc29sdmUoTU9DS19TQ0hFTUEpKTtcbiAgICBleHBlY3QoZ2VuZXJhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgcGF0aC5yZXNvbHZlKE1PQ0tfU0NIRU1BKSxcbiAgICAgIE1PQ0tfU1RBVEVNRU5UU19QQVRILFxuICAgICAgeyBzZXBhcmF0ZUZpbGVzOiB0cnVlLCBsYW5ndWFnZTogTU9DS19UQVJHRVRfTEFOR1VBR0UgfSxcbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGdlbmVyYXRlIGdyYXBocWwgc3RhdGVtZW50cyBmb3Igbm9uIEpTIHByb2plY3RzJywgYXN5bmMgKCkgPT4ge1xuICAgIGdldEZyb250RW5kSGFuZGxlci5tb2NrUmV0dXJuVmFsdWUoJ2lvcycpO1xuICAgIGNvbnN0IGZvcmNlRG93bmxvYWQgPSBmYWxzZTtcbiAgICBhd2FpdCBnZW5lcmF0ZVN0YXRlbWVudHMoTU9DS19DT05URVhULCBmb3JjZURvd25sb2FkKTtcbiAgICBleHBlY3QoZ2VuZXJhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgcGF0aC5yZXNvbHZlKE1PQ0tfU0NIRU1BKSxcbiAgICAgIE1PQ0tfU1RBVEVNRU5UU19QQVRILFxuICAgICAgeyBzZXBhcmF0ZUZpbGVzOiB0cnVlLCBsYW5ndWFnZTogJ2dyYXBocWwnIH0sXG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBkb3dubG9hZCB0aGUgc2NoZW1hIGlmIGZvcmNlRG93bmxvYWQgZmxhZyBpcyBwYXNzZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgZm9yY2VEb3dubG9hZCA9IHRydWU7XG4gICAgYXdhaXQgZ2VuZXJhdGVTdGF0ZW1lbnRzKE1PQ0tfQ09OVEVYVCwgZm9yY2VEb3dubG9hZCk7XG4gICAgZXhwZWN0KGRvd25sb2FkSW50cm9zcGVjdGlvblNjaGVtYVdpdGhQcm9ncmVzcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICBNT0NLX0NPTlRFWFQsXG4gICAgICBNT0NLX0FQSV9JRCxcbiAgICAgIE1PQ0tfU0NIRU1BLFxuICAgICAgTU9DS19SRUdJT04sXG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBkb3dubG9hZCB0aGUgc2NoZW1hIGlmIHRoZSBzY2hlbWEgZmlsZSBpcyBtaXNzaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgIGpldHBhY2suZXhpc3RzLm1vY2tSZXR1cm5WYWx1ZShmYWxzZSk7XG4gICAgY29uc3QgZm9yY2VEb3dubG9hZCA9IGZhbHNlO1xuICAgIGF3YWl0IGdlbmVyYXRlU3RhdGVtZW50cyhNT0NLX0NPTlRFWFQsIGZvcmNlRG93bmxvYWQpO1xuICAgIGV4cGVjdChkb3dubG9hZEludHJvc3BlY3Rpb25TY2hlbWFXaXRoUHJvZ3Jlc3MpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgTU9DS19DT05URVhULFxuICAgICAgTU9DS19BUElfSUQsXG4gICAgICBNT0NLX1NDSEVNQSxcbiAgICAgIE1PQ0tfUkVHSU9OLFxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgc2hvdyBhIHdhcm5pbmcgaWYgdGhlcmUgYXJlIG5vIHByb2plY3RzIGNvbmZpZ3VyZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgbG9hZENvbmZpZy5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgZ2V0UHJvamVjdHM6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoW10pLFxuICAgIH0pO1xuICAgIGF3YWl0IGdlbmVyYXRlU3RhdGVtZW50cyhNT0NLX0NPTlRFWFQsIGZhbHNlKTtcbiAgICBleHBlY3QoTU9DS19DT05URVhULnByaW50LmluZm8pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGNvbnN0YW50cy5FUlJPUl9DT0RFR0VOX05PX0FQSV9DT05GSUdVUkVEKTtcbiAgfSk7XG59KTtcbiJdfQ==