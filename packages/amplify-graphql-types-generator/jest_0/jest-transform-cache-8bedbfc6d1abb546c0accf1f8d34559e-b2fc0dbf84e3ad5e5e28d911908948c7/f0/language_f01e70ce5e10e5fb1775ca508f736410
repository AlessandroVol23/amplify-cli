34bdb7b15252e0a17370108362a03c15
'use strict';require('ts-jest').install("/c/Users/Sandro/repo/amplify-cli/packages/amplify-graphql-types-generator/src/swift/language.ts", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst CodeGenerator_1 = require(\"../utilities/CodeGenerator\");\nconst printing_1 = require(\"../utilities/printing\");\nfunction escapedString(string) {\n    return string.replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n');\n}\nexports.escapedString = escapedString;\nconst reservedKeywords = new Set(['associatedtype', 'class', 'deinit', 'enum', 'extension',\n    'fileprivate', 'func', 'import', 'init', 'inout', 'internal', 'let', 'open',\n    'operator', 'private', 'protocol', 'public', 'static', 'struct', 'subscript',\n    'typealias', 'var', 'break', 'case', 'continue', 'default', 'defer', 'do',\n    'else', 'fallthrough', 'for', 'guard', 'if', 'in', 'repeat', 'return',\n    'switch', 'where', 'while', 'as', 'Any', 'catch', 'false', 'is', 'nil',\n    'rethrows', 'super', 'self', 'Self', 'throw', 'throws', 'true', 'try',\n    'associativity', 'convenience', 'dynamic', 'didSet', 'final', 'get', 'infix',\n    'indirect', 'lazy', 'left', 'mutating', 'none', 'nonmutating', 'optional',\n    'override', 'postfix', 'precedence', 'prefix', 'Protocol', 'required', 'right',\n    'set', 'Type', 'unowned', 'weak', 'willSet']);\nfunction escapeIdentifierIfNeeded(identifier) {\n    if (reservedKeywords.has(identifier)) {\n        return '`' + identifier + '`';\n    }\n    else {\n        return identifier;\n    }\n}\nexports.escapeIdentifierIfNeeded = escapeIdentifierIfNeeded;\nclass SwiftGenerator extends CodeGenerator_1.default {\n    constructor(context) {\n        super(context);\n    }\n    multilineString(string) {\n        this.printOnNewline(`\"${escapedString(string)}\"`);\n    }\n    comment(comment) {\n        comment &&\n            comment.split('\\n').forEach(line => {\n                this.printOnNewline(`/// ${line.trim()}`);\n            });\n    }\n    deprecationAttributes(isDeprecated, deprecationReason) {\n        if (isDeprecated !== undefined && isDeprecated) {\n            deprecationReason = (deprecationReason !== undefined && deprecationReason.length > 0) ? deprecationReason : \"\";\n            this.printOnNewline(`@available(*, deprecated, message: \"${escapedString(deprecationReason)}\")`);\n        }\n    }\n    namespaceDeclaration(namespace, closure) {\n        if (namespace) {\n            this.printNewlineIfNeeded();\n            this.printOnNewline(`/// ${namespace} namespace`);\n            this.printOnNewline(`public enum ${namespace}`);\n            this.pushScope({ typeName: namespace });\n            this.withinBlock(closure);\n            this.popScope();\n        }\n        else {\n            if (closure) {\n                closure();\n            }\n        }\n    }\n    namespaceExtensionDeclaration(namespace, closure) {\n        if (namespace) {\n            this.printNewlineIfNeeded();\n            this.printOnNewline(`/// ${namespace} namespace`);\n            this.printOnNewline(`public extension ${namespace}`);\n            this.pushScope({ typeName: namespace });\n            this.withinBlock(closure);\n            this.popScope();\n        }\n        else {\n            if (closure) {\n                closure();\n            }\n        }\n    }\n    classDeclaration({ className, modifiers, superClass, adoptedProtocols = [] }, closure) {\n        this.printNewlineIfNeeded();\n        this.printOnNewline(printing_1.wrap('', printing_1.join(modifiers, ' '), ' ') + `class ${className}`);\n        this.print(printing_1.wrap(': ', printing_1.join([superClass, ...adoptedProtocols], ', ')));\n        this.pushScope({ typeName: className });\n        this.withinBlock(closure);\n        this.popScope();\n    }\n    structDeclaration({ structName, description, adoptedProtocols = [] }, closure) {\n        this.printNewlineIfNeeded();\n        this.comment(description);\n        this.printOnNewline(`public struct ${escapeIdentifierIfNeeded(structName)}`);\n        this.print(printing_1.wrap(': ', printing_1.join(adoptedProtocols, ', ')));\n        this.pushScope({ typeName: structName });\n        this.withinBlock(closure);\n        this.popScope();\n    }\n    propertyDeclaration({ propertyName, typeName, description }) {\n        this.comment(description);\n        this.printOnNewline(`public var ${escapeIdentifierIfNeeded(propertyName)}: ${typeName}`);\n    }\n    propertyDeclarations(properties) {\n        if (!properties)\n            return;\n        properties.forEach(property => this.propertyDeclaration(property));\n    }\n    protocolDeclaration({ protocolName, adoptedProtocols }, closure) {\n        this.printNewlineIfNeeded();\n        this.printOnNewline(`public protocol ${protocolName}`);\n        this.print(printing_1.wrap(': ', printing_1.join(adoptedProtocols, ', ')));\n        this.pushScope({ typeName: protocolName });\n        this.withinBlock(closure);\n        this.popScope();\n    }\n    protocolPropertyDeclaration({ propertyName, typeName }) {\n        this.printOnNewline(`var ${propertyName}: ${typeName} { get }`);\n    }\n    protocolPropertyDeclarations(properties) {\n        if (!properties)\n            return;\n        properties.forEach(property => this.protocolPropertyDeclaration(property));\n    }\n}\nexports.SwiftGenerator = SwiftGenerator;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGFuZ3VhZ2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJsYW5ndWFnZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDhEQUF1RDtBQUV2RCxvREFBbUQ7QUEyQm5ELHVCQUE4QixNQUFjO0lBQzFDLE9BQU8sTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztBQUMzRCxDQUFDO0FBRkQsc0NBRUM7QUFHRCxNQUFNLGdCQUFnQixHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsZ0JBQWdCLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsV0FBVztJQUN4RixhQUFhLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsTUFBTTtJQUMzRSxVQUFVLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxXQUFXO0lBQzVFLFdBQVcsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxJQUFJO0lBQ3pFLE1BQU0sRUFBRSxhQUFhLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxRQUFRO0lBQ3JFLFFBQVEsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsS0FBSztJQUN0RSxVQUFVLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsS0FBSztJQUNyRSxlQUFlLEVBQUUsYUFBYSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxP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QztJQUNsRSxDQUFDO0lBRUQsNEJBQTRCLENBQUMsVUFBc0I7UUFDakQsSUFBSSxDQUFDLFVBQVU7WUFBRSxPQUFPO1FBQ3hCLFVBQVUsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsMkJBQTJCLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUM3RSxDQUFDO0NBQ0Y7QUFuR0Qsd0NBbUdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvZGVHZW5lcmF0b3IgZnJvbSAnLi4vdXRpbGl0aWVzL0NvZGVHZW5lcmF0b3InO1xuXG5pbXBvcnQgeyBqb2luLCB3cmFwIH0gZnJvbSAnLi4vdXRpbGl0aWVzL3ByaW50aW5nJztcblxuZXhwb3J0IGludGVyZmFjZSBDbGFzcyB7XG4gIGNsYXNzTmFtZTogc3RyaW5nO1xuICBtb2RpZmllcnM6IHN0cmluZ1tdO1xuICBzdXBlckNsYXNzPzogc3RyaW5nO1xuICBhZG9wdGVkUHJvdG9jb2xzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RydWN0IHtcbiAgc3RydWN0TmFtZTogc3RyaW5nO1xuICBhZG9wdGVkUHJvdG9jb2xzPzogc3RyaW5nW107XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb3RvY29sIHtcbiAgcHJvdG9jb2xOYW1lOiBzdHJpbmc7XG4gIGFkb3B0ZWRQcm90b2NvbHM/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9wZXJ0eSB7XG4gIHByb3BlcnR5TmFtZTogc3RyaW5nO1xuICB0eXBlTmFtZTogc3RyaW5nO1xuICBpc09wdGlvbmFsPzogYm9vbGVhbjtcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVkU3RyaW5nKHN0cmluZzogc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpLnJlcGxhY2UoL1xcbi9nLCAnXFxcXG4nKTtcbn1cblxuLy8gcHJldHRpZXItaWdub3JlXG5jb25zdCByZXNlcnZlZEtleXdvcmRzID0gbmV3IFNldChbJ2Fzc29jaWF0ZWR0eXBlJywgJ2NsYXNzJywgJ2RlaW5pdCcsICdlbnVtJywgJ2V4dGVuc2lvbicsXG4gICdmaWxlcHJpdmF0ZScsICdmdW5jJywgJ2ltcG9ydCcsICdpbml0JywgJ2lub3V0JywgJ2ludGVybmFsJywgJ2xldCcsICdvcGVuJyxcbiAgJ29wZXJhdG9yJywgJ3ByaXZhdGUnLCAncHJvdG9jb2wnLCAncHVibGljJywgJ3N0YXRpYycsICdzdHJ1Y3QnLCAnc3Vic2NyaXB0JyxcbiAgJ3R5cGVhbGlhcycsICd2YXInLCAnYnJlYWsnLCAnY2FzZScsICdjb250aW51ZScsICdkZWZhdWx0JywgJ2RlZmVyJywgJ2RvJyxcbiAgJ2Vsc2UnLCAnZmFsbHRocm91Z2gnLCAnZm9yJywgJ2d1YXJkJywgJ2lmJywgJ2luJywgJ3JlcGVhdCcsICdyZXR1cm4nLFxuICAnc3dpdGNoJywgJ3doZXJlJywgJ3doaWxlJywgJ2FzJywgJ0FueScsICdjYXRjaCcsICdmYWxzZScsICdpcycsICduaWwnLFxuICAncmV0aHJvd3MnLCAnc3VwZXInLCAnc2VsZicsICdTZWxmJywgJ3Rocm93JywgJ3Rocm93cycsICd0cnVlJywgJ3RyeScsXG4gICdhc3NvY2lhdGl2aXR5JywgJ2NvbnZlbmllbmNlJywgJ2R5bmFtaWMnLCAnZGlkU2V0JywgJ2ZpbmFsJywgJ2dldCcsICdpbmZpeCcsXG4gICdpbmRpcmVjdCcsICdsYXp5JywgJ2xlZnQnLCAnbXV0YXRpbmcnLCAnbm9uZScsICdub25tdXRhdGluZycsICdvcHRpb25hbCcsXG4gICdvdmVycmlkZScsICdwb3N0Zml4JywgJ3ByZWNlZGVuY2UnLCAncHJlZml4JywgJ1Byb3RvY29sJywgJ3JlcXVpcmVkJywgJ3JpZ2h0JyxcbiAgJ3NldCcsICdUeXBlJywgJ3Vub3duZWQnLCAnd2VhaycsICd3aWxsU2V0J10pO1xuXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlSWRlbnRpZmllcklmTmVlZGVkKGlkZW50aWZpZXI6IHN0cmluZykge1xuICBpZiAocmVzZXJ2ZWRLZXl3b3Jkcy5oYXMoaWRlbnRpZmllcikpIHtcbiAgICByZXR1cm4gJ2AnICsgaWRlbnRpZmllciArICdgJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaWRlbnRpZmllcjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3dpZnRHZW5lcmF0b3I8Q29udGV4dD4gZXh0ZW5kcyBDb2RlR2VuZXJhdG9yPENvbnRleHQsIHsgdHlwZU5hbWU6IHN0cmluZyB9PiB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQ6IENvbnRleHQpIHtcbiAgICBzdXBlcihjb250ZXh0KTtcbiAgfVxuXG4gIG11bHRpbGluZVN0cmluZyhzdHJpbmc6IHN0cmluZykge1xuICAgIHRoaXMucHJpbnRPbk5ld2xpbmUoYFwiJHtlc2NhcGVkU3RyaW5nKHN0cmluZyl9XCJgKTtcbiAgfVxuXG4gIGNvbW1lbnQoY29tbWVudD86IHN0cmluZykge1xuICAgIGNvbW1lbnQgJiZcbiAgICAgIGNvbW1lbnQuc3BsaXQoJ1xcbicpLmZvckVhY2gobGluZSA9PiB7XG4gICAgICAgIHRoaXMucHJpbnRPbk5ld2xpbmUoYC8vLyAke2xpbmUudHJpbSgpfWApO1xuICAgICAgfSk7XG4gIH1cblxuICBkZXByZWNhdGlvbkF0dHJpYnV0ZXMoaXNEZXByZWNhdGVkOiBib29sZWFuIHwgdW5kZWZpbmVkLCBkZXByZWNhdGlvblJlYXNvbjogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgaWYgKGlzRGVwcmVjYXRlZCAhPT0gdW5kZWZpbmVkICYmIGlzRGVwcmVjYXRlZCkge1xuICAgICAgZGVwcmVjYXRpb25SZWFzb24gPSAoZGVwcmVjYXRpb25SZWFzb24gIT09IHVuZGVmaW5lZCAmJiBkZXByZWNhdGlvblJlYXNvbi5sZW5ndGggPiAwKSA/IGRlcHJlY2F0aW9uUmVhc29uIDogXCJcIlxuICAgICAgdGhpcy5wcmludE9uTmV3bGluZShgQGF2YWlsYWJsZSgqLCBkZXByZWNhdGVkLCBtZXNzYWdlOiBcIiR7ZXNjYXBlZFN0cmluZyhkZXByZWNhdGlvblJlYXNvbil9XCIpYClcbiAgICB9XG4gIH1cblxuICBuYW1lc3BhY2VEZWNsYXJhdGlvbihuYW1lc3BhY2U6IHN0cmluZyB8IHVuZGVmaW5lZCwgY2xvc3VyZTogRnVuY3Rpb24pIHtcbiAgICBpZiAobmFtZXNwYWNlKSB7XG4gICAgICB0aGlzLnByaW50TmV3bGluZUlmTmVlZGVkKCk7XG4gICAgICB0aGlzLnByaW50T25OZXdsaW5lKGAvLy8gJHtuYW1lc3BhY2V9IG5hbWVzcGFjZWApO1xuICAgICAgdGhpcy5wcmludE9uTmV3bGluZShgcHVibGljIGVudW0gJHtuYW1lc3BhY2V9YCk7XG4gICAgICB0aGlzLnB1c2hTY29wZSh7IHR5cGVOYW1lOiBuYW1lc3BhY2UgfSk7XG4gICAgICB0aGlzLndpdGhpbkJsb2NrKGNsb3N1cmUpO1xuICAgICAgdGhpcy5wb3BTY29wZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoY2xvc3VyZSkge1xuICAgICAgICBjbG9zdXJlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbmFtZXNwYWNlRXh0ZW5zaW9uRGVjbGFyYXRpb24obmFtZXNwYWNlOiBzdHJpbmcgfCB1bmRlZmluZWQsIGNsb3N1cmU6IEZ1bmN0aW9uKSB7XG4gICAgaWYgKG5hbWVzcGFjZSkge1xuICAgICAgdGhpcy5wcmludE5ld2xpbmVJZk5lZWRlZCgpO1xuICAgICAgdGhpcy5wcmludE9uTmV3bGluZShgLy8vICR7bmFtZXNwYWNlfSBuYW1lc3BhY2VgKTtcbiAgICAgIHRoaXMucHJpbnRPbk5ld2xpbmUoYHB1YmxpYyBleHRlbnNpb24gJHtuYW1lc3BhY2V9YCk7XG4gICAgICB0aGlzLnB1c2hTY29wZSh7IHR5cGVOYW1lOiBuYW1lc3BhY2UgfSk7XG4gICAgICB0aGlzLndpdGhpbkJsb2NrKGNsb3N1cmUpO1xuICAgICAgdGhpcy5wb3BTY29wZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoY2xvc3VyZSkge1xuICAgICAgICBjbG9zdXJlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY2xhc3NEZWNsYXJhdGlvbih7IGNsYXNzTmFtZSwgbW9kaWZpZXJzLCBzdXBlckNsYXNzLCBhZG9wdGVkUHJvdG9jb2xzID0gW10gfTogQ2xhc3MsIGNsb3N1cmU6IEZ1bmN0aW9uKSB7XG4gICAgdGhpcy5wcmludE5ld2xpbmVJZk5lZWRlZCgpO1xuICAgIHRoaXMucHJpbnRPbk5ld2xpbmUod3JhcCgnJywgam9pbihtb2RpZmllcnMsICcgJyksICcgJykgKyBgY2xhc3MgJHtjbGFzc05hbWV9YCk7XG4gICAgdGhpcy5wcmludCh3cmFwKCc6ICcsIGpvaW4oW3N1cGVyQ2xhc3MsIC4uLmFkb3B0ZWRQcm90b2NvbHNdLCAnLCAnKSkpO1xuICAgIHRoaXMucHVzaFNjb3BlKHsgdHlwZU5hbWU6IGNsYXNzTmFtZSB9KTtcbiAgICB0aGlzLndpdGhpbkJsb2NrKGNsb3N1cmUpO1xuICAgIHRoaXMucG9wU2NvcGUoKTtcbiAgfVxuXG4gIHN0cnVjdERlY2xhcmF0aW9uKHsgc3RydWN0TmFtZSwgZGVzY3JpcHRpb24sIGFkb3B0ZWRQcm90b2NvbHMgPSBbXSB9OiBTdHJ1Y3QsIGNsb3N1cmU6IEZ1bmN0aW9uKSB7XG4gICAgdGhpcy5wcmludE5ld2xpbmVJZk5lZWRlZCgpO1xuICAgIHRoaXMuY29tbWVudChkZXNjcmlwdGlvbik7XG4gICAgdGhpcy5wcmludE9uTmV3bGluZShgcHVibGljIHN0cnVjdCAke2VzY2FwZUlkZW50aWZpZXJJZk5lZWRlZChzdHJ1Y3ROYW1lKX1gKTtcbiAgICB0aGlzLnByaW50KHdyYXAoJzogJywgam9pbihhZG9wdGVkUHJvdG9jb2xzLCAnLCAnKSkpO1xuICAgIHRoaXMucHVzaFNjb3BlKHsgdHlwZU5hbWU6IHN0cnVjdE5hbWUgfSk7XG4gICAgdGhpcy53aXRoaW5CbG9jayhjbG9zdXJlKTtcbiAgICB0aGlzLnBvcFNjb3BlKCk7XG4gIH1cblxuICBwcm9wZXJ0eURlY2xhcmF0aW9uKHsgcHJvcGVydHlOYW1lLCB0eXBlTmFtZSwgZGVzY3JpcHRpb24gfTogUHJvcGVydHkpIHtcbiAgICB0aGlzLmNvbW1lbnQoZGVzY3JpcHRpb24pO1xuICAgIHRoaXMucHJpbnRPbk5ld2xpbmUoYHB1YmxpYyB2YXIgJHtlc2NhcGVJZGVudGlmaWVySWZOZWVkZWQocHJvcGVydHlOYW1lKX06ICR7dHlwZU5hbWV9YCk7XG4gIH1cblxuICBwcm9wZXJ0eURlY2xhcmF0aW9ucyhwcm9wZXJ0aWVzOiBQcm9wZXJ0eVtdKSB7XG4gICAgaWYgKCFwcm9wZXJ0aWVzKSByZXR1cm47XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKHByb3BlcnR5ID0+IHRoaXMucHJvcGVydHlEZWNsYXJhdGlvbihwcm9wZXJ0eSkpO1xuICB9XG5cbiAgcHJvdG9jb2xEZWNsYXJhdGlvbih7IHByb3RvY29sTmFtZSwgYWRvcHRlZFByb3RvY29scyB9OiBQcm90b2NvbCwgY2xvc3VyZTogRnVuY3Rpb24pIHtcbiAgICB0aGlzLnByaW50TmV3bGluZUlmTmVlZGVkKCk7XG4gICAgdGhpcy5wcmludE9uTmV3bGluZShgcHVibGljIHByb3RvY29sICR7cHJvdG9jb2xOYW1lfWApO1xuICAgIHRoaXMucHJpbnQod3JhcCgnOiAnLCBqb2luKGFkb3B0ZWRQcm90b2NvbHMsICcsICcpKSk7XG4gICAgdGhpcy5wdXNoU2NvcGUoeyB0eXBlTmFtZTogcHJvdG9jb2xOYW1lIH0pO1xuICAgIHRoaXMud2l0aGluQmxvY2soY2xvc3VyZSk7XG4gICAgdGhpcy5wb3BTY29wZSgpO1xuICB9XG5cbiAgcHJvdG9jb2xQcm9wZXJ0eURlY2xhcmF0aW9uKHsgcHJvcGVydHlOYW1lLCB0eXBlTmFtZSB9OiBQcm9wZXJ0eSkge1xuICAgIHRoaXMucHJpbnRPbk5ld2xpbmUoYHZhciAke3Byb3BlcnR5TmFtZX06ICR7dHlwZU5hbWV9IHsgZ2V0IH1gKTtcbiAgfVxuXG4gIHByb3RvY29sUHJvcGVydHlEZWNsYXJhdGlvbnMocHJvcGVydGllczogUHJvcGVydHlbXSkge1xuICAgIGlmICghcHJvcGVydGllcykgcmV0dXJuO1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChwcm9wZXJ0eSA9PiB0aGlzLnByb3RvY29sUHJvcGVydHlEZWNsYXJhdGlvbihwcm9wZXJ0eSkpO1xuICB9XG59XG4iXX0=");"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const CodeGenerator_1 = require("../utilities/CodeGenerator");
const printing_1 = require("../utilities/printing");
function escapedString(string) {
    return string.replace(/"/g, '\\"').replace(/\n/g, '\\n');
}
exports.escapedString = escapedString;
const reservedKeywords = new Set(['associatedtype', 'class', 'deinit', 'enum', 'extension',
'fileprivate', 'func', 'import', 'init', 'inout', 'internal', 'let', 'open',
'operator', 'private', 'protocol', 'public', 'static', 'struct', 'subscript',
'typealias', 'var', 'break', 'case', 'continue', 'default', 'defer', 'do',
'else', 'fallthrough', 'for', 'guard', 'if', 'in', 'repeat', 'return',
'switch', 'where', 'while', 'as', 'Any', 'catch', 'false', 'is', 'nil',
'rethrows', 'super', 'self', 'Self', 'throw', 'throws', 'true', 'try',
'associativity', 'convenience', 'dynamic', 'didSet', 'final', 'get', 'infix',
'indirect', 'lazy', 'left', 'mutating', 'none', 'nonmutating', 'optional',
'override', 'postfix', 'precedence', 'prefix', 'Protocol', 'required', 'right',
'set', 'Type', 'unowned', 'weak', 'willSet']);
function escapeIdentifierIfNeeded(identifier) {
    if (reservedKeywords.has(identifier)) {
        return '`' + identifier + '`';
    } else
    {
        return identifier;
    }
}
exports.escapeIdentifierIfNeeded = escapeIdentifierIfNeeded;
class SwiftGenerator extends CodeGenerator_1.default {
    constructor(context) {
        super(context);
    }
    multilineString(string) {
        this.printOnNewline(`"${escapedString(string)}"`);
    }
    comment(comment) {
        comment &&
        comment.split('\n').forEach(line => {
            this.printOnNewline(`/// ${line.trim()}`);
        });
    }
    deprecationAttributes(isDeprecated, deprecationReason) {
        if (isDeprecated !== undefined && isDeprecated) {
            deprecationReason = deprecationReason !== undefined && deprecationReason.length > 0 ? deprecationReason : "";
            this.printOnNewline(`@available(*, deprecated, message: "${escapedString(deprecationReason)}")`);
        }
    }
    namespaceDeclaration(namespace, closure) {
        if (namespace) {
            this.printNewlineIfNeeded();
            this.printOnNewline(`/// ${namespace} namespace`);
            this.printOnNewline(`public enum ${namespace}`);
            this.pushScope({ typeName: namespace });
            this.withinBlock(closure);
            this.popScope();
        } else
        {
            if (closure) {
                closure();
            }
        }
    }
    namespaceExtensionDeclaration(namespace, closure) {
        if (namespace) {
            this.printNewlineIfNeeded();
            this.printOnNewline(`/// ${namespace} namespace`);
            this.printOnNewline(`public extension ${namespace}`);
            this.pushScope({ typeName: namespace });
            this.withinBlock(closure);
            this.popScope();
        } else
        {
            if (closure) {
                closure();
            }
        }
    }
    classDeclaration({ className, modifiers, superClass, adoptedProtocols = [] }, closure) {
        this.printNewlineIfNeeded();
        this.printOnNewline(printing_1.wrap('', printing_1.join(modifiers, ' '), ' ') + `class ${className}`);
        this.print(printing_1.wrap(': ', printing_1.join([superClass, ...adoptedProtocols], ', ')));
        this.pushScope({ typeName: className });
        this.withinBlock(closure);
        this.popScope();
    }
    structDeclaration({ structName, description, adoptedProtocols = [] }, closure) {
        this.printNewlineIfNeeded();
        this.comment(description);
        this.printOnNewline(`public struct ${escapeIdentifierIfNeeded(structName)}`);
        this.print(printing_1.wrap(': ', printing_1.join(adoptedProtocols, ', ')));
        this.pushScope({ typeName: structName });
        this.withinBlock(closure);
        this.popScope();
    }
    propertyDeclaration({ propertyName, typeName, description }) {
        this.comment(description);
        this.printOnNewline(`public var ${escapeIdentifierIfNeeded(propertyName)}: ${typeName}`);
    }
    propertyDeclarations(properties) {
        if (!properties)
        return;
        properties.forEach(property => this.propertyDeclaration(property));
    }
    protocolDeclaration({ protocolName, adoptedProtocols }, closure) {
        this.printNewlineIfNeeded();
        this.printOnNewline(`public protocol ${protocolName}`);
        this.print(printing_1.wrap(': ', printing_1.join(adoptedProtocols, ', ')));
        this.pushScope({ typeName: protocolName });
        this.withinBlock(closure);
        this.popScope();
    }
    protocolPropertyDeclaration({ propertyName, typeName }) {
        this.printOnNewline(`var ${propertyName}: ${typeName} { get }`);
    }
    protocolPropertyDeclarations(properties) {
        if (!properties)
        return;
        properties.forEach(property => this.protocolPropertyDeclaration(property));
    }}

exports.SwiftGenerator = SwiftGenerator;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUw7QUFDQSxhQUFLLGNBQUwsQ0FBb0IsbUJBQW1CLFlBQVksRUFBbkQ7QUFDQSxhQUFLLEtBQUwsQ0FBVyxXQUFBLElBQUEsQ0FBSyxJQUFMLEVBQVcsV0FBQSxJQUFBLENBQUssZ0JBQUwsRUFBdUIsSUFBdkIsQ0FBWCxDQUFYO0FBQ0EsYUFBSyxTQUFMLENBQWUsRUFBRSxVQUFVLFlBQVosRUFBZjtBQUNBLGFBQUssV0FBTCxDQUFpQixPQUFqQjtBQUNBLGFBQUssUUFBTDtBQUNEO0FBRUQsZ0NBQTRCLEVBQUUsWUFBRixFQUFnQixRQUFoQixFQUE1QixFQUFnRTtBQUM5RCxhQUFLLGNBQUwsQ0FBb0IsT0FBTyxZQUFZLEtBQUssUUFBUSxVQUFwRDtBQUNEO0FBRUQsaUNBQTZCLFVBQTdCLEVBQW1EO0FBQ2pELFlBQUksQ0FBQyxVQUFMO0FBQWlCO0FBQ2pCLG1CQUFXLE9BQVgsQ0FBbUIsWUFBWSxLQUFLLDJCQUFMLENBQWlDLFFBQWpDLENBQS9CO0FBQ0QsS0FsR3NGOztBQUF6RixRQUFBLGNBQUEsR0FBQSxjQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvZGVHZW5lcmF0b3IgZnJvbSAnLi4vdXRpbGl0aWVzL0NvZGVHZW5lcmF0b3InO1xuXG5pbXBvcnQgeyBqb2luLCB3cmFwIH0gZnJvbSAnLi4vdXRpbGl0aWVzL3ByaW50aW5nJztcblxuZXhwb3J0IGludGVyZmFjZSBDbGFzcyB7XG4gIGNsYXNzTmFtZTogc3RyaW5nO1xuICBtb2RpZmllcnM6IHN0cmluZ1tdO1xuICBzdXBlckNsYXNzPzogc3RyaW5nO1xuICBhZG9wdGVkUHJvdG9jb2xzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RydWN0IHtcbiAgc3RydWN0TmFtZTogc3RyaW5nO1xuICBhZG9wdGVkUHJvdG9jb2xzPzogc3RyaW5nW107XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb3RvY29sIHtcbiAgcHJvdG9jb2xOYW1lOiBzdHJpbmc7XG4gIGFkb3B0ZWRQcm90b2NvbHM/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9wZXJ0eSB7XG4gIHByb3BlcnR5TmFtZTogc3RyaW5nO1xuICB0eXBlTmFtZTogc3RyaW5nO1xuICBpc09wdGlvbmFsPzogYm9vbGVhbjtcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVkU3RyaW5nKHN0cmluZzogc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpLnJlcGxhY2UoL1xcbi9nLCAnXFxcXG4nKTtcbn1cblxuLy8gcHJldHRpZXItaWdub3JlXG5jb25zdCByZXNlcnZlZEtleXdvcmRzID0gbmV3IFNldChbJ2Fzc29jaWF0ZWR0eXBlJywgJ2NsYXNzJywgJ2RlaW5pdCcsICdlbnVtJywgJ2V4dGVuc2lvbicsXG4gICdmaWxlcHJpdmF0ZScsICdmdW5jJywgJ2ltcG9ydCcsICdpbml0JywgJ2lub3V0JywgJ2ludGVybmFsJywgJ2xldCcsICdvcGVuJyxcbiAgJ29wZXJhdG9yJywgJ3ByaXZhdGUnLCAncHJvdG9jb2wnLCAncHVibGljJywgJ3N0YXRpYycsICdzdHJ1Y3QnLCAnc3Vic2NyaXB0JyxcbiAgJ3R5cGVhbGlhcycsICd2YXInLCAnYnJlYWsnLCAnY2FzZScsICdjb250aW51ZScsICdkZWZhdWx0JywgJ2RlZmVyJywgJ2RvJyxcbiAgJ2Vsc2UnLCAnZmFsbHRocm91Z2gnLCAnZm9yJywgJ2d1YXJkJywgJ2lmJywgJ2luJywgJ3JlcGVhdCcsICdyZXR1cm4nLFxuICAnc3dpdGNoJywgJ3doZXJlJywgJ3doaWxlJywgJ2FzJywgJ0FueScsICdjYXRjaCcsICdmYWxzZScsICdpcycsICduaWwnLFxuICAncmV0aHJvd3MnLCAnc3VwZXInLCAnc2VsZicsICdTZWxmJywgJ3Rocm93JywgJ3Rocm93cycsICd0cnVlJywgJ3RyeScsXG4gICdhc3NvY2lhdGl2aXR5JywgJ2NvbnZlbmllbmNlJywgJ2R5bmFtaWMnLCAnZGlkU2V0JywgJ2ZpbmFsJywgJ2dldCcsICdpbmZpeCcsXG4gICdpbmRpcmVjdCcsICdsYXp5JywgJ2xlZnQnLCAnbXV0YXRpbmcnLCAnbm9uZScsICdub25tdXRhdGluZycsICdvcHRpb25hbCcsXG4gICdvdmVycmlkZScsICdwb3N0Zml4JywgJ3ByZWNlZGVuY2UnLCAncHJlZml4JywgJ1Byb3RvY29sJywgJ3JlcXVpcmVkJywgJ3JpZ2h0JyxcbiAgJ3NldCcsICdUeXBlJywgJ3Vub3duZWQnLCAnd2VhaycsICd3aWxsU2V0J10pO1xuXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlSWRlbnRpZmllcklmTmVlZGVkKGlkZW50aWZpZXI6IHN0cmluZykge1xuICBpZiAocmVzZXJ2ZWRLZXl3b3Jkcy5oYXMoaWRlbnRpZmllcikpIHtcbiAgICByZXR1cm4gJ2AnICsgaWRlbnRpZmllciArICdgJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaWRlbnRpZmllcjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3dpZnRHZW5lcmF0b3I8Q29udGV4dD4gZXh0ZW5kcyBDb2RlR2VuZXJhdG9yPENvbnRleHQsIHsgdHlwZU5hbWU6IHN0cmluZyB9PiB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQ6IENvbnRleHQpIHtcbiAgICBzdXBlcihjb250ZXh0KTtcbiAgfVxuXG4gIG11bHRpbGluZVN0cmluZyhzdHJpbmc6IHN0cmluZykge1xuICAgIHRoaXMucHJpbnRPbk5ld2xpbmUoYFwiJHtlc2NhcGVkU3RyaW5nKHN0cmluZyl9XCJgKTtcbiAgfVxuXG4gIGNvbW1lbnQoY29tbWVudD86IHN0cmluZykge1xuICAgIGNvbW1lbnQgJiZcbiAgICAgIGNvbW1lbnQuc3BsaXQoJ1xcbicpLmZvckVhY2gobGluZSA9PiB7XG4gICAgICAgIHRoaXMucHJpbnRPbk5ld2xpbmUoYC8vLyAke2xpbmUudHJpbSgpfWApO1xuICAgICAgfSk7XG4gIH1cblxuICBkZXByZWNhdGlvbkF0dHJpYnV0ZXMoaXNEZXByZWNhdGVkOiBib29sZWFuIHwgdW5kZWZpbmVkLCBkZXByZWNhdGlvblJlYXNvbjogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgaWYgKGlzRGVwcmVjYXRlZCAhPT0gdW5kZWZpbmVkICYmIGlzRGVwcmVjYXRlZCkge1xuICAgICAgZGVwcmVjYXRpb25SZWFzb24gPSAoZGVwcmVjYXRpb25SZWFzb24gIT09IHVuZGVmaW5lZCAmJiBkZXByZWNhdGlvblJlYXNvbi5sZW5ndGggPiAwKSA/IGRlcHJlY2F0aW9uUmVhc29uIDogXCJcIlxuICAgICAgdGhpcy5wcmludE9uTmV3bGluZShgQGF2YWlsYWJsZSgqLCBkZXByZWNhdGVkLCBtZXNzYWdlOiBcIiR7ZXNjYXBlZFN0cmluZyhkZXByZWNhdGlvblJlYXNvbil9XCIpYClcbiAgICB9XG4gIH1cblxuICBuYW1lc3BhY2VEZWNsYXJhdGlvbihuYW1lc3BhY2U6IHN0cmluZyB8IHVuZGVmaW5lZCwgY2xvc3VyZTogRnVuY3Rpb24pIHtcbiAgICBpZiAobmFtZXNwYWNlKSB7XG4gICAgICB0aGlzLnByaW50TmV3bGluZUlmTmVlZGVkKCk7XG4gICAgICB0aGlzLnByaW50T25OZXdsaW5lKGAvLy8gJHtuYW1lc3BhY2V9IG5hbWVzcGFjZWApO1xuICAgICAgdGhpcy5wcmludE9uTmV3bGluZShgcHVibGljIGVudW0gJHtuYW1lc3BhY2V9YCk7XG4gICAgICB0aGlzLnB1c2hTY29wZSh7IHR5cGVOYW1lOiBuYW1lc3BhY2UgfSk7XG4gICAgICB0aGlzLndpdGhpbkJsb2NrKGNsb3N1cmUpO1xuICAgICAgdGhpcy5wb3BTY29wZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoY2xvc3VyZSkge1xuICAgICAgICBjbG9zdXJlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbmFtZXNwYWNlRXh0ZW5zaW9uRGVjbGFyYXRpb24obmFtZXNwYWNlOiBzdHJpbmcgfCB1bmRlZmluZWQsIGNsb3N1cmU6IEZ1bmN0aW9uKSB7XG4gICAgaWYgKG5hbWVzcGFjZSkge1xuICAgICAgdGhpcy5wcmludE5ld2xpbmVJZk5lZWRlZCgpO1xuICAgICAgdGhpcy5wcmludE9uTmV3bGluZShgLy8vICR7bmFtZXNwYWNlfSBuYW1lc3BhY2VgKTtcbiAgICAgIHRoaXMucHJpbnRPbk5ld2xpbmUoYHB1YmxpYyBleHRlbnNpb24gJHtuYW1lc3BhY2V9YCk7XG4gICAgICB0aGlzLnB1c2hTY29wZSh7IHR5cGVOYW1lOiBuYW1lc3BhY2UgfSk7XG4gICAgICB0aGlzLndpdGhpbkJsb2NrKGNsb3N1cmUpO1xuICAgICAgdGhpcy5wb3BTY29wZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoY2xvc3VyZSkge1xuICAgICAgICBjbG9zdXJlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY2xhc3NEZWNsYXJhdGlvbih7IGNsYXNzTmFtZSwgbW9kaWZpZXJzLCBzdXBlckNsYXNzLCBhZG9wdGVkUHJvdG9jb2xzID0gW10gfTogQ2xhc3MsIGNsb3N1cmU6IEZ1bmN0aW9uKSB7XG4gICAgdGhpcy5wcmludE5ld2xpbmVJZk5lZWRlZCgpO1xuICAgIHRoaXMucHJpbnRPbk5ld2xpbmUod3JhcCgnJywgam9pbihtb2RpZmllcnMsICcgJyksICcgJykgKyBgY2xhc3MgJHtjbGFzc05hbWV9YCk7XG4gICAgdGhpcy5wcmludCh3cmFwKCc6ICcsIGpvaW4oW3N1cGVyQ2xhc3MsIC4uLmFkb3B0ZWRQcm90b2NvbHNdLCAnLCAnKSkpO1xuICAgIHRoaXMucHVzaFNjb3BlKHsgdHlwZU5hbWU6IGNsYXNzTmFtZSB9KTtcbiAgICB0aGlzLndpdGhpbkJsb2NrKGNsb3N1cmUpO1xuICAgIHRoaXMucG9wU2NvcGUoKTtcbiAgfVxuXG4gIHN0cnVjdERlY2xhcmF0aW9uKHsgc3RydWN0TmFtZSwgZGVzY3JpcHRpb24sIGFkb3B0ZWRQcm90b2NvbHMgPSBbXSB9OiBTdHJ1Y3QsIGNsb3N1cmU6IEZ1bmN0aW9uKSB7XG4gICAgdGhpcy5wcmludE5ld2xpbmVJZk5lZWRlZCgpO1xuICAgIHRoaXMuY29tbWVudChkZXNjcmlwdGlvbik7XG4gICAgdGhpcy5wcmludE9uTmV3bGluZShgcHVibGljIHN0cnVjdCAke2VzY2FwZUlkZW50aWZpZXJJZk5lZWRlZChzdHJ1Y3ROYW1lKX1gKTtcbiAgICB0aGlzLnByaW50KHdyYXAoJzogJywgam9pbihhZG9wdGVkUHJvdG9jb2xzLCAnLCAnKSkpO1xuICAgIHRoaXMucHVzaFNjb3BlKHsgdHlwZU5hbWU6IHN0cnVjdE5hbWUgfSk7XG4gICAgdGhpcy53aXRoaW5CbG9jayhjbG9zdXJlKTtcbiAgICB0aGlzLnBvcFNjb3BlKCk7XG4gIH1cblxuICBwcm9wZXJ0eURlY2xhcmF0aW9uKHsgcHJvcGVydHlOYW1lLCB0eXBlTmFtZSwgZGVzY3JpcHRpb24gfTogUHJvcGVydHkpIHtcbiAgICB0aGlzLmNvbW1lbnQoZGVzY3JpcHRpb24pO1xuICAgIHRoaXMucHJpbnRPbk5ld2xpbmUoYHB1YmxpYyB2YXIgJHtlc2NhcGVJZGVudGlmaWVySWZOZWVkZWQocHJvcGVydHlOYW1lKX06ICR7dHlwZU5hbWV9YCk7XG4gIH1cblxuICBwcm9wZXJ0eURlY2xhcmF0aW9ucyhwcm9wZXJ0aWVzOiBQcm9wZXJ0eVtdKSB7XG4gICAgaWYgKCFwcm9wZXJ0aWVzKSByZXR1cm47XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKHByb3BlcnR5ID0+IHRoaXMucHJvcGVydHlEZWNsYXJhdGlvbihwcm9wZXJ0eSkpO1xuICB9XG5cbiAgcHJvdG9jb2xEZWNsYXJhdGlvbih7IHByb3RvY29sTmFtZSwgYWRvcHRlZFByb3RvY29scyB9OiBQcm90b2NvbCwgY2xvc3VyZTogRnVuY3Rpb24pIHtcbiAgICB0aGlzLnByaW50TmV3bGluZUlmTmVlZGVkKCk7XG4gICAgdGhpcy5wcmludE9uTmV3bGluZShgcHVibGljIHByb3RvY29sICR7cHJvdG9jb2xOYW1lfWApO1xuICAgIHRoaXMucHJpbnQod3JhcCgnOiAnLCBqb2luKGFkb3B0ZWRQcm90b2NvbHMsICcsICcpKSk7XG4gICAgdGhpcy5wdXNoU2NvcGUoeyB0eXBlTmFtZTogcHJvdG9jb2xOYW1lIH0pO1xuICAgIHRoaXMud2l0aGluQmxvY2soY2xvc3VyZSk7XG4gICAgdGhpcy5wb3BTY29wZSgpO1xuICB9XG5cbiAgcHJvdG9jb2xQcm9wZXJ0eURlY2xhcmF0aW9uKHsgcHJvcGVydHlOYW1lLCB0eXBlTmFtZSB9OiBQcm9wZXJ0eSkge1xuICAgIHRoaXMucHJpbnRPbk5ld2xpbmUoYHZhciAke3Byb3BlcnR5TmFtZX06ICR7dHlwZU5hbWV9IHsgZ2V0IH1gKTtcbiAgfVxuXG4gIHByb3RvY29sUHJvcGVydHlEZWNsYXJhdGlvbnMocHJvcGVydGllczogUHJvcGVydHlbXSkge1xuICAgIGlmICghcHJvcGVydGllcykgcmV0dXJuO1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChwcm9wZXJ0eSA9PiB0aGlzLnByb3RvY29sUHJvcGVydHlEZWNsYXJhdGlvbihwcm9wZXJ0eSkpO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9