6d169a8ebae67cc6431d1a1b4b2a500d
'use strict';require('ts-jest').install("/c/Users/Sandro/repo/amplify-cli/packages/amplify-graphql-types-generator/src/compiler/visitors/collectFragmentsReferenced.ts", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction collectFragmentsReferenced(selectionSet, fragments, fragmentsReferenced = new Set()) {\n    for (const selection of selectionSet.selections) {\n        switch (selection.kind) {\n            case 'FragmentSpread':\n                fragmentsReferenced.add(selection.fragmentName);\n                const fragment = fragments[selection.fragmentName];\n                if (!fragment) {\n                    throw new Error(`Cannot find fragment \"${selection.fragmentName}\"`);\n                }\n                collectFragmentsReferenced(fragment.selectionSet, fragments, fragmentsReferenced);\n                break;\n            case 'Field':\n            case 'TypeCondition':\n            case 'BooleanCondition':\n                if (selection.selectionSet) {\n                    collectFragmentsReferenced(selection.selectionSet, fragments, fragmentsReferenced);\n                }\n                break;\n        }\n    }\n    return fragmentsReferenced;\n}\nexports.collectFragmentsReferenced = collectFragmentsReferenced;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sbGVjdEZyYWdtZW50c1JlZmVyZW5jZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjb2xsZWN0RnJhZ21lbnRzUmVmZXJlbmNlZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUVBLG9DQUNFLFlBQTBCLEVBQzFCLFNBQStDLEVBQy9DLHNCQUFtQyxJQUFJLEdBQUcsRUFBRTtJQUU1QyxLQUFLLE1BQU0sU0FBUyxJQUFJLFlBQVksQ0FBQyxVQUFVLEVBQUU7UUFDL0MsUUFBUSxTQUFTLENBQUMsSUFBSSxFQUFFO1lBQ3RCLEtBQUssZ0JBQWdCO2dCQUNuQixtQkFBbUIsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUVoRCxNQUFNLFFBQVEsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUNuRCxJQUFJLENBQUMsUUFBUSxFQUFFO29CQUNiLE1BQU0sSUFBSSxLQUFLLENBQUMseUJBQXlCLFNBQVMsQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDO2lCQUNyRTtnQkFFRCwwQkFBMEIsQ0FBQyxRQUFRLENBQUMsWUFBWSxFQUFFLFNBQVMsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO2dCQUNsRixNQUFNO1lBQ1IsS0FBSyxPQUFPLENBQUM7WUFDYixLQUFLLGVBQWUsQ0FBQztZQUNyQixLQUFLLGtCQUFrQjtnQkFDckIsSUFBSSxTQUFTLENBQUMsWUFBWSxFQUFFO29CQUMxQiwwQkFBMEIsQ0FBQyxTQUFTLENBQUMsWUFBWSxFQUFFLFNBQVMsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO2lCQUNwRjtnQkFDRCxNQUFNO1NBQ1Q7S0FDRjtJQUVELE9BQU8sbUJBQW1CLENBQUM7QUFDN0IsQ0FBQztBQTVCRCxnRUE0QkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTZWxlY3Rpb25TZXQsIEZyYWdtZW50IH0gZnJvbSAnLi4vJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbGxlY3RGcmFnbWVudHNSZWZlcmVuY2VkKFxuICBzZWxlY3Rpb25TZXQ6IFNlbGVjdGlvblNldCxcbiAgZnJhZ21lbnRzOiB7IFtmcmFnbWVudE5hbWU6IHN0cmluZ106IEZyYWdtZW50IH0sXG4gIGZyYWdtZW50c1JlZmVyZW5jZWQ6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpXG4pOiBTZXQ8c3RyaW5nPiB7XG4gIGZvciAoY29uc3Qgc2VsZWN0aW9uIG9mIHNlbGVjdGlvblNldC5zZWxlY3Rpb25zKSB7XG4gICAgc3dpdGNoIChzZWxlY3Rpb24ua2luZCkge1xuICAgICAgY2FzZSAnRnJhZ21lbnRTcHJlYWQnOlxuICAgICAgICBmcmFnbWVudHNSZWZlcmVuY2VkLmFkZChzZWxlY3Rpb24uZnJhZ21lbnROYW1lKTtcblxuICAgICAgICBjb25zdCBmcmFnbWVudCA9IGZyYWdtZW50c1tzZWxlY3Rpb24uZnJhZ21lbnROYW1lXTtcbiAgICAgICAgaWYgKCFmcmFnbWVudCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGZpbmQgZnJhZ21lbnQgXCIke3NlbGVjdGlvbi5mcmFnbWVudE5hbWV9XCJgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbGxlY3RGcmFnbWVudHNSZWZlcmVuY2VkKGZyYWdtZW50LnNlbGVjdGlvblNldCwgZnJhZ21lbnRzLCBmcmFnbWVudHNSZWZlcmVuY2VkKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGaWVsZCc6XG4gICAgICBjYXNlICdUeXBlQ29uZGl0aW9uJzpcbiAgICAgIGNhc2UgJ0Jvb2xlYW5Db25kaXRpb24nOlxuICAgICAgICBpZiAoc2VsZWN0aW9uLnNlbGVjdGlvblNldCkge1xuICAgICAgICAgIGNvbGxlY3RGcmFnbWVudHNSZWZlcmVuY2VkKHNlbGVjdGlvbi5zZWxlY3Rpb25TZXQsIGZyYWdtZW50cywgZnJhZ21lbnRzUmVmZXJlbmNlZCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZyYWdtZW50c1JlZmVyZW5jZWQ7XG59XG4iXX0=");"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function collectFragmentsReferenced(selectionSet, fragments, fragmentsReferenced = new Set()) {
    for (const selection of selectionSet.selections) {
        switch (selection.kind) {
            case 'FragmentSpread':
                fragmentsReferenced.add(selection.fragmentName);
                const fragment = fragments[selection.fragmentName];
                if (!fragment) {
                    throw new Error(`Cannot find fragment "${selection.fragmentName}"`);
                }
                collectFragmentsReferenced(fragment.selectionSet, fragments, fragmentsReferenced);
                break;
            case 'Field':
            case 'TypeCondition':
            case 'BooleanCondition':
                if (selection.selectionSet) {
                    collectFragmentsReferenced(selection.selectionSet, fragments, fragmentsReferenced);
                }
                break;}

    }
    return fragmentsReferenced;
}
exports.collectFragmentsReferenced = collectFragmentsReferenced;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbGxlY3RGcmFnbWVudHNSZWZlcmVuY2VkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsU0FBQSwwQkFBQSxDQUNFLFlBREYsRUFFRSxTQUZGLEVBR0Usc0JBQW1DLElBQUksR0FBSixFQUhyQyxFQUc4QztBQUU1QyxTQUFLLE1BQU0sU0FBWCxJQUF3QixhQUFhLFVBQXJDLEVBQWlEO0FBQy9DLGdCQUFRLFVBQVUsSUFBbEI7QUFDRSxpQkFBSyxnQkFBTDtBQUNFLG9DQUFvQixHQUFwQixDQUF3QixVQUFVLFlBQWxDO0FBRUEsc0JBQU0sV0FBVyxVQUFVLFVBQVUsWUFBcEIsQ0FBakI7QUFDQSxvQkFBSSxDQUFDLFFBQUwsRUFBZTtBQUNiLDBCQUFNLElBQUksS0FBSixDQUFVLHlCQUF5QixVQUFVLFlBQVksR0FBekQsQ0FBTjtBQUNEO0FBRUQsMkNBQTJCLFNBQVMsWUFBcEMsRUFBa0QsU0FBbEQsRUFBNkQsbUJBQTdEO0FBQ0E7QUFDRixpQkFBSyxPQUFMO0FBQ0EsaUJBQUssZUFBTDtBQUNBLGlCQUFLLGtCQUFMO0FBQ0Usb0JBQUksVUFBVSxZQUFkLEVBQTRCO0FBQzFCLCtDQUEyQixVQUFVLFlBQXJDLEVBQW1ELFNBQW5ELEVBQThELG1CQUE5RDtBQUNEO0FBQ0Qsc0JBakJKOztBQW1CRDtBQUVELFdBQU8sbUJBQVA7QUFDRDtBQTVCRCxRQUFBLDBCQUFBLEdBQUEsMEJBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTZWxlY3Rpb25TZXQsIEZyYWdtZW50IH0gZnJvbSAnLi4vJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbGxlY3RGcmFnbWVudHNSZWZlcmVuY2VkKFxuICBzZWxlY3Rpb25TZXQ6IFNlbGVjdGlvblNldCxcbiAgZnJhZ21lbnRzOiB7IFtmcmFnbWVudE5hbWU6IHN0cmluZ106IEZyYWdtZW50IH0sXG4gIGZyYWdtZW50c1JlZmVyZW5jZWQ6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpXG4pOiBTZXQ8c3RyaW5nPiB7XG4gIGZvciAoY29uc3Qgc2VsZWN0aW9uIG9mIHNlbGVjdGlvblNldC5zZWxlY3Rpb25zKSB7XG4gICAgc3dpdGNoIChzZWxlY3Rpb24ua2luZCkge1xuICAgICAgY2FzZSAnRnJhZ21lbnRTcHJlYWQnOlxuICAgICAgICBmcmFnbWVudHNSZWZlcmVuY2VkLmFkZChzZWxlY3Rpb24uZnJhZ21lbnROYW1lKTtcblxuICAgICAgICBjb25zdCBmcmFnbWVudCA9IGZyYWdtZW50c1tzZWxlY3Rpb24uZnJhZ21lbnROYW1lXTtcbiAgICAgICAgaWYgKCFmcmFnbWVudCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGZpbmQgZnJhZ21lbnQgXCIke3NlbGVjdGlvbi5mcmFnbWVudE5hbWV9XCJgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbGxlY3RGcmFnbWVudHNSZWZlcmVuY2VkKGZyYWdtZW50LnNlbGVjdGlvblNldCwgZnJhZ21lbnRzLCBmcmFnbWVudHNSZWZlcmVuY2VkKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGaWVsZCc6XG4gICAgICBjYXNlICdUeXBlQ29uZGl0aW9uJzpcbiAgICAgIGNhc2UgJ0Jvb2xlYW5Db25kaXRpb24nOlxuICAgICAgICBpZiAoc2VsZWN0aW9uLnNlbGVjdGlvblNldCkge1xuICAgICAgICAgIGNvbGxlY3RGcmFnbWVudHNSZWZlcmVuY2VkKHNlbGVjdGlvbi5zZWxlY3Rpb25TZXQsIGZyYWdtZW50cywgZnJhZ21lbnRzUmVmZXJlbmNlZCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZyYWdtZW50c1JlZmVyZW5jZWQ7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9