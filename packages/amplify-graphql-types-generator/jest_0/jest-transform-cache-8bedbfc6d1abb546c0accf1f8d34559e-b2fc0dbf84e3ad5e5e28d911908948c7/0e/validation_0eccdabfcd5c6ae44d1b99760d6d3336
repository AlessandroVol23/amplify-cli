2f3a1d73b7b34500d994a26441276d9c
'use strict';require('ts-jest').install("/c/Users/Sandro/repo/amplify-cli/packages/amplify-graphql-types-generator/test/validation.ts", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst path = require(\"path\");\nconst loading_1 = require(\"../src/loading\");\nconst validation_1 = require(\"../src/validation\");\nconst schema = loading_1.loadSchema(require.resolve('./fixtures/starwars/schema.json'));\ndescribe('Validation', () => {\n    function loadQueryDocument(filename) {\n        return loading_1.loadAndMergeQueryDocuments([\n            path.join(__dirname, './fixtures/starwars', filename),\n        ]);\n    }\n    test(`should throw an error for AnonymousQuery.graphql`, () => {\n        const document = loadQueryDocument('AnonymousQuery.graphql');\n        expect(() => validation_1.validateQueryDocument(schema, document)).toThrow('Validation of GraphQL query document failed');\n    });\n    test(`should throw an error for TypenameAlias.graphql`, () => {\n        const document = loadQueryDocument('TypenameAlias.graphql');\n        expect(() => validation_1.validateQueryDocument(schema, document)).toThrow('Validation of GraphQL query document failed');\n    });\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsaWRhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInZhbGlkYXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw2QkFBNkI7QUFFN0IsNENBQXdFO0FBRXhFLGtEQUEwRDtBQUUxRCxNQUFNLE1BQU0sR0FBRyxvQkFBVSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsaUNBQWlDLENBQUMsQ0FBQyxDQUFDO0FBRTlFLFFBQVEsQ0FBQyxZQUFZLEVBQUUsR0FBRyxFQUFFO0lBQzFCLDJCQUEyQixRQUFnQjtRQUN6QyxPQUFPLG9DQUEwQixDQUFDO1lBQ2hDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLHFCQUFxQixFQUFFLFFBQVEsQ0FBQztTQUN0RCxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsSUFBSSxDQUFDLGtEQUFrRCxFQUFFLEdBQUcsRUFBRTtRQUM1RCxNQUFNLFFBQVEsR0FBRyxpQkFBaUIsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1FBRTdELE1BQU0sQ0FDSixHQUFHLEVBQUUsQ0FBQyxrQ0FBcUIsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQzlDLENBQUMsT0FBTyxDQUNQLDZDQUE2QyxDQUM5QyxDQUFDO0lBQ0osQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMsaURBQWlELEVBQUUsR0FBRyxFQUFFO1FBQzNELE1BQU0sUUFBUSxHQUFHLGlCQUFpQixDQUFDLHVCQUF1QixDQUFDLENBQUM7UUFFNUQsTUFBTSxDQUNKLEdBQUcsRUFBRSxDQUFDLGtDQUFxQixDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FDOUMsQ0FBQyxPQUFPLENBQ1AsNkNBQTZDLENBQzlDLENBQUM7SUFDSixDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcblxuaW1wb3J0IHsgbG9hZFNjaGVtYSwgbG9hZEFuZE1lcmdlUXVlcnlEb2N1bWVudHMgfSBmcm9tICcuLi9zcmMvbG9hZGluZyc7XG5cbmltcG9ydCB7IHZhbGlkYXRlUXVlcnlEb2N1bWVudCB9IGZyb20gJy4uL3NyYy92YWxpZGF0aW9uJztcblxuY29uc3Qgc2NoZW1hID0gbG9hZFNjaGVtYShyZXF1aXJlLnJlc29sdmUoJy4vZml4dHVyZXMvc3RhcndhcnMvc2NoZW1hLmpzb24nKSk7XG5cbmRlc2NyaWJlKCdWYWxpZGF0aW9uJywgKCkgPT4ge1xuICBmdW5jdGlvbiBsb2FkUXVlcnlEb2N1bWVudChmaWxlbmFtZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGxvYWRBbmRNZXJnZVF1ZXJ5RG9jdW1lbnRzKFtcbiAgICAgIHBhdGguam9pbihfX2Rpcm5hbWUsICcuL2ZpeHR1cmVzL3N0YXJ3YXJzJywgZmlsZW5hbWUpLFxuICAgIF0pO1xuICB9XG5cbiAgdGVzdChgc2hvdWxkIHRocm93IGFuIGVycm9yIGZvciBBbm9ueW1vdXNRdWVyeS5ncmFwaHFsYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gbG9hZFF1ZXJ5RG9jdW1lbnQoJ0Fub255bW91c1F1ZXJ5LmdyYXBocWwnKTtcblxuICAgIGV4cGVjdChcbiAgICAgICgpID0+IHZhbGlkYXRlUXVlcnlEb2N1bWVudChzY2hlbWEsIGRvY3VtZW50KVxuICAgICkudG9UaHJvdyhcbiAgICAgICdWYWxpZGF0aW9uIG9mIEdyYXBoUUwgcXVlcnkgZG9jdW1lbnQgZmFpbGVkJ1xuICAgICk7XG4gIH0pO1xuXG4gIHRlc3QoYHNob3VsZCB0aHJvdyBhbiBlcnJvciBmb3IgVHlwZW5hbWVBbGlhcy5ncmFwaHFsYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gbG9hZFF1ZXJ5RG9jdW1lbnQoJ1R5cGVuYW1lQWxpYXMuZ3JhcGhxbCcpO1xuXG4gICAgZXhwZWN0KFxuICAgICAgKCkgPT4gdmFsaWRhdGVRdWVyeURvY3VtZW50KHNjaGVtYSwgZG9jdW1lbnQpXG4gICAgKS50b1Rocm93KFxuICAgICAgJ1ZhbGlkYXRpb24gb2YgR3JhcGhRTCBxdWVyeSBkb2N1bWVudCBmYWlsZWQnXG4gICAgKTtcbiAgfSk7XG59KTtcbiJdfQ==");"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path = require("path");
const loading_1 = require("../src/loading");
const validation_1 = require("../src/validation");
const schema = loading_1.loadSchema(require.resolve('./fixtures/starwars/schema.json'));
describe('Validation', () => {
    function loadQueryDocument(filename) {
        return loading_1.loadAndMergeQueryDocuments([
        path.join(__dirname, './fixtures/starwars', filename)]);

    }
    test(`should throw an error for AnonymousQuery.graphql`, () => {
        const document = loadQueryDocument('AnonymousQuery.graphql');
        expect(() => validation_1.validateQueryDocument(schema, document)).toThrow('Validation of GraphQL query document failed');
    });
    test(`should throw an error for TypenameAlias.graphql`, () => {
        const document = loadQueryDocument('TypenameAlias.graphql');
        expect(() => validation_1.validateQueryDocument(schema, document)).toThrow('Validation of GraphQL query document failed');
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZhbGlkYXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFBLE9BQUEsUUFBQSxNQUFBLENBQUE7QUFFQSxNQUFBLFlBQUEsUUFBQSxnQkFBQSxDQUFBO0FBRUEsTUFBQSxlQUFBLFFBQUEsbUJBQUEsQ0FBQTtBQUVBLE1BQU0sU0FBUyxVQUFBLFVBQUEsQ0FBVyxRQUFRLE9BQVIsQ0FBZ0IsaUNBQWhCLENBQVgsQ0FBZjtBQUVBLFNBQVMsWUFBVCxFQUF1QixNQUFLO0FBQzFCLGFBQUEsaUJBQUEsQ0FBMkIsUUFBM0IsRUFBMkM7QUFDekMsZUFBTyxVQUFBLDBCQUFBLENBQTJCO0FBQ2hDLGFBQUssSUFBTCxDQUFVLFNBQVYsRUFBcUIscUJBQXJCLEVBQTRDLFFBQTVDLENBRGdDLENBQTNCLENBQVA7O0FBR0Q7QUFFRCxTQUFLLGtEQUFMLEVBQXlELE1BQUs7QUFDNUQsY0FBTSxXQUFXLGtCQUFrQix3QkFBbEIsQ0FBakI7QUFFQSxlQUNFLE1BQU0sYUFBQSxxQkFBQSxDQUFzQixNQUF0QixFQUE4QixRQUE5QixDQURSLEVBRUUsT0FGRixDQUdFLDZDQUhGO0FBS0QsS0FSRDtBQVVBLFNBQUssaURBQUwsRUFBd0QsTUFBSztBQUMzRCxjQUFNLFdBQVcsa0JBQWtCLHVCQUFsQixDQUFqQjtBQUVBLGVBQ0UsTUFBTSxhQUFBLHFCQUFBLENBQXNCLE1BQXRCLEVBQThCLFFBQTlCLENBRFIsRUFFRSxPQUZGLENBR0UsNkNBSEY7QUFLRCxLQVJEO0FBU0QsQ0ExQkQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuXG5pbXBvcnQgeyBsb2FkU2NoZW1hLCBsb2FkQW5kTWVyZ2VRdWVyeURvY3VtZW50cyB9IGZyb20gJy4uL3NyYy9sb2FkaW5nJztcblxuaW1wb3J0IHsgdmFsaWRhdGVRdWVyeURvY3VtZW50IH0gZnJvbSAnLi4vc3JjL3ZhbGlkYXRpb24nO1xuXG5jb25zdCBzY2hlbWEgPSBsb2FkU2NoZW1hKHJlcXVpcmUucmVzb2x2ZSgnLi9maXh0dXJlcy9zdGFyd2Fycy9zY2hlbWEuanNvbicpKTtcblxuZGVzY3JpYmUoJ1ZhbGlkYXRpb24nLCAoKSA9PiB7XG4gIGZ1bmN0aW9uIGxvYWRRdWVyeURvY3VtZW50KGZpbGVuYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gbG9hZEFuZE1lcmdlUXVlcnlEb2N1bWVudHMoW1xuICAgICAgcGF0aC5qb2luKF9fZGlybmFtZSwgJy4vZml4dHVyZXMvc3RhcndhcnMnLCBmaWxlbmFtZSksXG4gICAgXSk7XG4gIH1cblxuICB0ZXN0KGBzaG91bGQgdGhyb3cgYW4gZXJyb3IgZm9yIEFub255bW91c1F1ZXJ5LmdyYXBocWxgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBsb2FkUXVlcnlEb2N1bWVudCgnQW5vbnltb3VzUXVlcnkuZ3JhcGhxbCcpO1xuXG4gICAgZXhwZWN0KFxuICAgICAgKCkgPT4gdmFsaWRhdGVRdWVyeURvY3VtZW50KHNjaGVtYSwgZG9jdW1lbnQpXG4gICAgKS50b1Rocm93KFxuICAgICAgJ1ZhbGlkYXRpb24gb2YgR3JhcGhRTCBxdWVyeSBkb2N1bWVudCBmYWlsZWQnXG4gICAgKTtcbiAgfSk7XG5cbiAgdGVzdChgc2hvdWxkIHRocm93IGFuIGVycm9yIGZvciBUeXBlbmFtZUFsaWFzLmdyYXBocWxgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBsb2FkUXVlcnlEb2N1bWVudCgnVHlwZW5hbWVBbGlhcy5ncmFwaHFsJyk7XG5cbiAgICBleHBlY3QoXG4gICAgICAoKSA9PiB2YWxpZGF0ZVF1ZXJ5RG9jdW1lbnQoc2NoZW1hLCBkb2N1bWVudClcbiAgICApLnRvVGhyb3coXG4gICAgICAnVmFsaWRhdGlvbiBvZiBHcmFwaFFMIHF1ZXJ5IGRvY3VtZW50IGZhaWxlZCdcbiAgICApO1xuICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==