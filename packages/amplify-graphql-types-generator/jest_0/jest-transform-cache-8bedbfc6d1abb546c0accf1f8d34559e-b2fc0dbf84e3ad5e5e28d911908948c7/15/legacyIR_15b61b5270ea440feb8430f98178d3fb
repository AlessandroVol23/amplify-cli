5b5c869bcfd6541873e3038490cb2d63
'use strict';require('ts-jest').install("/c/Users/Sandro/repo/amplify-cli/packages/amplify-graphql-types-generator/test/compiler/legacyIR.js", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst common_tags_1 = require(\"common-tags\");\nconst graphql_1 = require(\"graphql\");\nconst loading_1 = require(\"../../src/loading\");\nconst legacyIR_1 = require(\"../../src/compiler/legacyIR\");\nconst serializeToJSON_1 = require(\"../../src/serializeToJSON\");\nfunction withStringifiedTypes(ir) {\n    return JSON.parse(serializeToJSON_1.serializeAST(ir));\n}\nconst schema = loading_1.loadSchema(require.resolve('../fixtures/starwars/schema.json'));\ndescribe('Compiling query documents to the legacy IR', () => {\n    it(`should include variables defined in operations`, () => {\n        const document = graphql_1.parse(`\n      query HeroName($episode: Episode) {\n        hero(episode: $episode) {\n          name\n        }\n      }\n\n      query Search($text: String!) {\n        search(text: $text) {\n          ... on Character {\n            name\n          }\n        }\n      }\n\n      mutation CreateReviewForEpisode($episode: Episode!, $review: ReviewInput!) {\n        createReview(episode: $episode, review: $review) {\n          stars\n          commentary\n        }\n      }\n    `);\n        const { operations } = withStringifiedTypes(legacyIR_1.compileToLegacyIR(schema, document));\n        expect(operations['HeroName'].variables).toEqual([\n            { name: 'episode', type: 'Episode' }\n        ]);\n        expect(operations['Search'].variables).toEqual([\n            { name: 'text', type: 'String!' }\n        ]);\n        expect(operations['CreateReviewForEpisode'].variables).toEqual([\n            { name: 'episode', type: 'Episode!' },\n            { name: 'review', type: 'ReviewInput!' }\n        ]);\n    });\n    it(`should keep track of enums and input object types used in variables`, () => {\n        const document = graphql_1.parse(`\n      query HeroName($episode: Episode) {\n        hero(episode: $episode) {\n          name\n        }\n      }\n\n      query Search($text: String) {\n        search(text: $text) {\n          ... on Character {\n            name\n          }\n        }\n      }\n\n      mutation CreateReviewForEpisode($episode: Episode!, $review: ReviewInput!) {\n        createReview(episode: $episode, review: $review) {\n          stars\n          commentary\n        }\n      }\n    `);\n        const { typesUsed } = withStringifiedTypes(legacyIR_1.compileToLegacyIR(schema, document));\n        expect(typesUsed).toEqual(['Episode', 'ReviewInput', 'ColorInput']);\n    });\n    it(`should keep track of enums used in fields`, () => {\n        const document = graphql_1.parse(`\n      query Hero {\n        hero {\n          name\n          appearsIn\n        }\n\n        droid(id: \"2001\") {\n          appearsIn\n        }\n      }\n    `);\n        const { typesUsed } = withStringifiedTypes(legacyIR_1.compileToLegacyIR(schema, document));\n        expect(typesUsed).toEqual(['Episode']);\n    });\n    it(`should keep track of types used in fields of input objects`, () => {\n        const document = graphql_1.parse(`\n      mutation FieldArgumentsWithInputObjects($review: ReviewInput!) {\n        createReview(episode: JEDI, review: $review) {\n          commentary\n        }\n      }\n      `);\n        const { typesUsed } = withStringifiedTypes(legacyIR_1.compileToLegacyIR(schema, document));\n        expect(typesUsed).toContain('ReviewInput');\n        expect(typesUsed).toContain('ColorInput');\n    });\n    it(`should include the original field name for an aliased field`, () => {\n        const document = graphql_1.parse(`\n      query HeroName {\n        r2: hero {\n          name\n        }\n        luke: hero(episode: EMPIRE) {\n          name\n        }\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HeroName'].fields[0].fieldName).toBe(\"hero\");\n    });\n    it(`should include field arguments`, () => {\n        const document = graphql_1.parse(`\n      query HeroName {\n        hero(episode: EMPIRE) {\n          name\n        }\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HeroName'].fields[0].args)\n            .toEqual([{ name: \"episode\", value: \"EMPIRE\", type: schema.getType(\"Episode\") }]);\n    });\n    it(`should include isConditional if a field has skip or include directives with variables`, () => {\n        const document = graphql_1.parse(`\n      query HeroNameConditionalInclusion($includeName: Boolean!) {\n        hero {\n          name @include(if: $includeName)\n        }\n      }\n\n      query HeroNameConditionalExclusion($skipName: Boolean!) {\n        hero {\n          name @skip(if: $skipName)\n        }\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HeroNameConditionalInclusion'].fields[0].fields[0]).toMatchObject({\n            fieldName: 'name',\n            isConditional: true\n        });\n        expect(operations['HeroNameConditionalExclusion'].fields[0].fields[0]).toMatchObject({\n            fieldName: 'name',\n            isConditional: true\n        });\n    });\n    it(`should not include isConditional if a field has skip or include directives with a boolean literal that always passes`, () => {\n        const document = graphql_1.parse(`\n      query HeroNameConditionalInclusion {\n        hero {\n          name @include(if: true)\n        }\n      }\n\n      query HeroNameConditionalExclusion {\n        hero {\n          name @skip(if: false)\n        }\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HeroNameConditionalInclusion'].fields[0].fields[0]).toMatchObject({\n            fieldName: 'name',\n            isConditional: false\n        });\n        expect(operations['HeroNameConditionalExclusion'].fields[0].fields[0]).toMatchObject({\n            fieldName: 'name',\n            isConditional: false\n        });\n    });\n    it(`should not include field if it has skip or include directives with a boolean literal that always fails`, () => {\n        const document = graphql_1.parse(`\n      query HeroNameConditionalInclusion {\n        hero {\n          name @include(if: false)\n        }\n      }\n\n      query HeroNameConditionalExclusion {\n        hero {\n          name @skip(if: true)\n        }\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HeroNameConditionalInclusion'].fields[0].fields).toHaveLength(0);\n        expect(operations['HeroNameConditionalExclusion'].fields[0].fields).toHaveLength(0);\n    });\n    it(`should include isConditional if a field in inside an inline fragment with skip or include directives with variables`, () => {\n        const document = graphql_1.parse(`\n      query HeroNameConditionalInclusion($includeName: Boolean!) {\n        hero {\n          ... @include(if: $includeName) {\n            name\n          }\n        }\n      }\n\n      query HeroNameConditionalExclusion($skipName: Boolean!) {\n        hero {\n          ... @skip(if: $skipName) {\n            name\n          }\n        }\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HeroNameConditionalInclusion'].fields[0].fields[0]).toMatchObject({\n            fieldName: 'name',\n            isConditional: true\n        });\n        expect(operations['HeroNameConditionalExclusion'].fields[0].fields[0]).toMatchObject({\n            fieldName: 'name',\n            isConditional: true\n        });\n    });\n    it(`should include isConditional if a field in inside a fragment spread with skip or include directives with variables`, () => {\n        const document = graphql_1.parse(`\n      query HeroNameConditionalInclusion($includeName: Boolean!) {\n        hero {\n          ...HeroName @include(if: $includeName)\n        }\n      }\n\n      query HeroNameConditionalExclusion($skipName: Boolean!) {\n        hero {\n          ...HeroName @skip(if: $skipName)\n        }\n      }\n\n      fragment HeroName on Character {\n        name\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HeroNameConditionalInclusion'].fields[0].fields[0]).toMatchObject({\n            fieldName: 'name',\n            isConditional: true\n        });\n        expect(operations['HeroNameConditionalExclusion'].fields[0].fields[0]).toMatchObject({\n            fieldName: 'name',\n            isConditional: true\n        });\n        expect(operations['HeroNameConditionalInclusion'].fragmentsReferenced).toEqual(['HeroName']);\n        expect(operations['HeroNameConditionalInclusion'].fields[0].fragmentSpreads).toEqual(['HeroName']);\n        expect(operations['HeroNameConditionalExclusion'].fragmentsReferenced).toEqual(['HeroName']);\n        expect(operations['HeroNameConditionalExclusion'].fields[0].fragmentSpreads).toEqual(['HeroName']);\n    });\n    it(`should recursively flatten inline fragments with type conditions that match the parent type`, () => {\n        const document = graphql_1.parse(`\n      query Hero {\n        hero {\n          id\n          ... on Character {\n            name\n            ... on Character {\n              id\n              appearsIn\n            }\n            id\n          }\n        }\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['Hero'].fields[0].fields.map(field => field.fieldName))\n            .toEqual(['id', 'name', 'appearsIn']);\n    });\n    it(`should recursively include fragment spreads with type conditions that match the parent type`, () => {\n        const document = graphql_1.parse(`\n      query Hero {\n        hero {\n          id\n          ...HeroDetails\n        }\n      }\n\n      fragment HeroDetails on Character {\n        name\n        ...MoreHeroDetails\n        id\n      }\n\n      fragment MoreHeroDetails on Character {\n        appearsIn\n      }\n    `);\n        const { operations, fragments } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['Hero'].fields[0].fields.map(field => field.fieldName))\n            .toEqual(['id', 'name', 'appearsIn']);\n        expect(fragments['HeroDetails'].fields.map(field => field.fieldName))\n            .toEqual(['name', 'appearsIn', 'id']);\n        expect(fragments['MoreHeroDetails'].fields.map(field => field.fieldName))\n            .toEqual(['appearsIn']);\n        expect(operations['Hero'].fragmentsReferenced).toEqual(['HeroDetails', 'MoreHeroDetails']);\n        expect(operations['Hero'].fields[0].fragmentSpreads).toEqual(['HeroDetails']);\n        expect(fragments['HeroDetails'].fragmentSpreads).toEqual(['MoreHeroDetails']);\n    });\n    it(`should include fragment spreads from subselections`, () => {\n        const document = graphql_1.parse(`\n      query HeroAndFriends {\n        hero {\n          ...HeroDetails\n          appearsIn\n          id\n          friends {\n            id\n            ...HeroDetails\n          }\n        }\n      }\n\n      fragment HeroDetails on Character {\n      \tname\n        id\n      }\n    `);\n        const { operations, fragments } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HeroAndFriends'].fields[0].fields.map(field => field.fieldName))\n            .toEqual(['name', 'id', 'appearsIn', 'friends']);\n        expect(operations['HeroAndFriends'].fields[0].fields[3].fields.map(field => field.fieldName))\n            .toEqual(['id', 'name']);\n        expect(fragments['HeroDetails'].fields.map(field => field.fieldName))\n            .toEqual(['name', 'id']);\n        expect(operations['HeroAndFriends'].fragmentsReferenced).toEqual(['HeroDetails']);\n        expect(operations['HeroAndFriends'].fields[0].fragmentSpreads).toEqual(['HeroDetails']);\n    });\n    it(`should include type conditions with merged fields for inline fragments`, () => {\n        const document = graphql_1.parse(`\n      query Hero {\n        hero {\n          name\n          ... on Droid {\n            primaryFunction\n          }\n          ... on Human {\n            height\n          }\n        }\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['Hero'].fields[0].fields.map(field => field.fieldName))\n            .toEqual(['name']);\n        return;\n        expect(operations['Hero'].fields[0].inlineFragments[\"Droid\"].typeCondition.toString()).toEqual('Droid');\n        expect(operations['Hero'].fields[0].inlineFragments[\"Droid\"].fields.map(field => field.fieldName))\n            .toEqual(['name', 'primaryFunction']);\n        expect(operations['Hero'].fields[0].inlineFragments[\"Human\"].typeCondition.toString()).toEqual('Human');\n        expect(operations['Hero'].fields[0].inlineFragments[\"Human\"].fields.map(field => field.fieldName))\n            .toEqual(['name', 'height']);\n    });\n    it(`should include fragment spreads with type conditions`, () => {\n        const document = graphql_1.parse(`\n      query Hero {\n        hero {\n          name\n          ...DroidDetails\n          ...HumanDetails\n        }\n      }\n\n      fragment DroidDetails on Droid {\n        primaryFunction\n      }\n\n      fragment HumanDetails on Human {\n        height\n      }\n    `);\n        const { operations, fragments } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['Hero'].fields[0].fields.map(field => field.fieldName))\n            .toEqual(['name']);\n        expect(operations['Hero'].fields[0].inlineFragments[\"Droid\"].typeCondition.toString()).toEqual('Droid');\n        expect(operations['Hero'].fields[0].inlineFragments[\"Droid\"].fields.map(field => field.fieldName))\n            .toEqual(['name', 'primaryFunction']);\n        expect(operations['Hero'].fields[0].inlineFragments['Human'].typeCondition.toString()).toEqual('Human');\n        expect(operations['Hero'].fields[0].inlineFragments['Human'].fields.map(field => field.fieldName))\n            .toEqual(['name', 'height']);\n        expect(operations['Hero'].fragmentsReferenced).toEqual(['DroidDetails', 'HumanDetails']);\n        expect(operations['Hero'].fields[0].fragmentSpreads).toEqual(['DroidDetails', 'HumanDetails']);\n    });\n    it(`should not include type conditions for fragment spreads with type conditions that match the parent type`, () => {\n        const document = graphql_1.parse(`\n      query Hero {\n        hero {\n          name\n          ...HeroDetails\n        }\n      }\n\n      fragment HeroDetails on Character {\n        name\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['Hero'].fields[0].fields.map(field => field.fieldName))\n            .toEqual(['name']);\n        expect(operations['Hero'].fields[0].inlineFragments).toEqual([]);\n    });\n    it(`should include type conditions for inline fragments in fragments`, () => {\n        const document = graphql_1.parse(`\n      query Hero {\n        hero {\n          ...HeroDetails\n        }\n      }\n\n      fragment HeroDetails on Character {\n        name\n        ... on Droid {\n          primaryFunction\n        }\n        ... on Human {\n          height\n        }\n      }\n    `);\n        const { operations, fragments } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['Hero'].fields[0].fields.map(field => field.fieldName))\n            .toEqual(['name']);\n        expect(operations['Hero'].fields[0].inlineFragments['Droid'].typeCondition.toString()).toEqual('Droid');\n        expect(operations['Hero'].fields[0].inlineFragments['Droid'].fields.map(field => field.fieldName))\n            .toEqual(['name', 'primaryFunction']);\n        expect(operations['Hero'].fields[0].inlineFragments['Human'].typeCondition.toString()).toEqual('Human');\n        expect(operations['Hero'].fields[0].inlineFragments['Human'].fields.map(field => field.fieldName))\n            .toEqual(['name', 'height']);\n        expect(operations['Hero'].fragmentsReferenced).toEqual(['HeroDetails']);\n        expect(operations['Hero'].fields[0].fragmentSpreads).toEqual(['HeroDetails']);\n    });\n    it(`should inherit type condition when nesting an inline fragment in an inline fragment with a more specific type condition`, () => {\n        const document = graphql_1.parse(`\n      query HeroName {\n        hero {\n          ... on Droid {\n            ... on Character {\n              name\n            }\n          }\n        }\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HeroName'].fields[0].fields.map(field => field.fieldName))\n            .toEqual([]);\n        expect(operations['HeroName'].fields[0].inlineFragments['Droid'].typeCondition.toString()).toEqual('Droid');\n        expect(operations['HeroName'].fields[0].inlineFragments['Droid'].fields.map(field => field.fieldName))\n            .toEqual(['name']);\n    });\n    it(`should not inherit type condition when nesting an inline fragment in an inline fragment with a less specific type condition`, () => {\n        const document = graphql_1.parse(`\n      query HeroName {\n        hero {\n          ... on Character {\n            ... on Droid {\n              name\n            }\n          }\n        }\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HeroName'].fields[0].fields.map(field => field.fieldName))\n            .toEqual([]);\n        expect(operations['HeroName'].fields[0].inlineFragments['Droid'].typeCondition.toString()).toEqual('Droid');\n        expect(operations['HeroName'].fields[0].inlineFragments['Droid'].fields.map(field => field.fieldName))\n            .toEqual(['name']);\n    });\n    it(`should inherit type condition when nesting a fragment spread in an inline fragment with a more specific type condition`, () => {\n        const document = graphql_1.parse(`\n      query HeroName {\n        hero {\n          ... on Droid {\n            ...CharacterName\n          }\n        }\n      }\n\n      fragment CharacterName on Character {\n        name\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HeroName'].fields[0].fields.map(field => field.fieldName))\n            .toEqual([]);\n        expect(operations['HeroName'].fields[0].inlineFragments[\"Droid\"].typeCondition.toString()).toEqual('Droid');\n        expect(operations['HeroName'].fields[0].inlineFragments[\"Droid\"].fields.map(field => field.fieldName))\n            .toEqual(['name']);\n        expect(operations['HeroName'].fields[0].inlineFragments[\"Droid\"].fragmentSpreads).toEqual(['CharacterName']);\n        expect(operations['HeroName'].fragmentsReferenced).toEqual(['CharacterName']);\n        expect(operations['HeroName'].fields[0].fragmentSpreads).toEqual([]);\n    });\n    it(`should not inherit type condition when nesting a fragment spread in an inline fragment with a less specific type condition`, () => {\n        const document = graphql_1.parse(`\n      query HeroName {\n        hero {\n          ... on Character {\n            ...DroidName\n          }\n        }\n      }\n\n      fragment DroidName on Droid {\n        name\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HeroName'].fields[0].fields.map(field => field.fieldName))\n            .toEqual([]);\n        expect(operations['HeroName'].fields[0].inlineFragments[\"Droid\"].typeCondition.toString()).toEqual('Droid');\n        expect(operations['HeroName'].fields[0].inlineFragments[\"Droid\"].fields.map(field => field.fieldName))\n            .toEqual(['name']);\n        expect(operations['HeroName'].fields[0].inlineFragments[\"Droid\"].fragmentSpreads).toEqual(['DroidName']);\n        expect(operations['HeroName'].fragmentsReferenced).toEqual(['DroidName']);\n        expect(operations['HeroName'].fields[0].fragmentSpreads).toEqual(['DroidName']);\n    });\n    it(`should ignore inline fragment when the type condition does not overlap with the currently effective type`, () => {\n        const document = graphql_1.parse(`\n      fragment CharacterDetails on Character {\n        ... on Droid {\n          primaryFunction\n        }\n        ... on Human {\n          height\n        }\n      }\n\n      query HumanAndDroid {\n        human(id: \"human\") {\n          ...CharacterDetails\n        }\n        droid(id: \"droid\") {\n          ...CharacterDetails\n        }\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HumanAndDroid'].fields.map(field => field.fieldName))\n            .toEqual(['human', 'droid']);\n        expect(operations['HumanAndDroid'].fields[0].fields.map(field => field.fieldName))\n            .toEqual(['height']);\n        expect(operations['HumanAndDroid'].fields[0].inlineFragments).toEqual([]);\n        expect(operations['HumanAndDroid'].fields[1].fields.map(field => field.fieldName))\n            .toEqual(['primaryFunction']);\n        expect(operations['HumanAndDroid'].fields[1].inlineFragments).toEqual([]);\n    });\n    it(`should ignore fragment spread when the type condition does not overlap with the currently effective type`, () => {\n        const document = graphql_1.parse(`\n      fragment DroidPrimaryFunction on Droid {\n        primaryFunction\n      }\n\n      fragment HumanHeight on Human {\n        height\n      }\n\n      fragment CharacterDetails on Character {\n        ...DroidPrimaryFunction\n        ...HumanHeight\n      }\n\n      query HumanAndDroid {\n        human(id: \"human\") {\n          ...CharacterDetails\n        }\n        droid(id: \"droid\") {\n          ...CharacterDetails\n        }\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HumanAndDroid'].fields.map(field => field.fieldName))\n            .toEqual(['human', 'droid']);\n        expect(operations['HumanAndDroid'].fields[0].fields.map(field => field.fieldName))\n            .toEqual(['height']);\n        expect(operations['HumanAndDroid'].fields[0].inlineFragments).toEqual([]);\n        expect(operations['HumanAndDroid'].fields[1].fields.map(field => field.fieldName))\n            .toEqual(['primaryFunction']);\n        expect(operations['HumanAndDroid'].fields[1].inlineFragments).toEqual([]);\n    });\n    it(`should include type conditions for inline fragments on a union type`, () => {\n        const document = graphql_1.parse(`\n      query Search {\n        search(text: \"an\") {\n          ... on Character {\n            name\n          }\n          ... on Droid {\n            primaryFunction\n          }\n          ... on Human {\n            height\n          }\n        }\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['Search'].fields[0].fields.map(field => field.fieldName))\n            .toEqual([]);\n        expect(operations['Search'].fields[0].inlineFragments[\"Droid\"].typeCondition.toString()).toEqual('Droid');\n        expect(operations['Search'].fields[0].inlineFragments[\"Droid\"].fields.map(field => field.fieldName))\n            .toEqual(['name', 'primaryFunction']);\n        expect(operations['Search'].fields[0].inlineFragments[\"Human\"].typeCondition.toString()).toEqual('Human');\n        expect(operations['Search'].fields[0].inlineFragments[\"Human\"].fields.map(field => field.fieldName))\n            .toEqual(['name', 'height']);\n    });\n    it(`should keep correct field ordering even if fragment is visited multiple times`, () => {\n        const document = graphql_1.parse(`\n      query Hero {\n        hero {\n          ...HeroName\n          appearsIn\n          ...HeroName\n        }\n      }\n\n      fragment HeroName on Character {\n        name\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['Hero'].fields[0].fields.map(field => field.fieldName))\n            .toEqual(['name', 'appearsIn']);\n    });\n    it(`should keep correct field ordering even if field has been visited before for other type condition`, () => {\n        const document = graphql_1.parse(`\n      fragment HeroDetails on Character {\n        ... on Human {\n          appearsIn\n        }\n\n        ... on Droid {\n          name\n          appearsIn\n        }\n      }\n    `);\n        const { fragments } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(fragments['HeroDetails'].inlineFragments['Droid'].typeCondition.toString()).toEqual('Droid');\n        expect(fragments['HeroDetails'].inlineFragments['Droid'].fields.map(field => field.fieldName))\n            .toEqual(['name', 'appearsIn']);\n    });\n    it(`should keep track of fragments referenced in a subselection`, () => {\n        const document = graphql_1.parse(`\n      query HeroAndFriends {\n        hero {\n          name\n          friends {\n            ...HeroDetails\n          }\n        }\n      }\n\n      fragment HeroDetails on Character {\n        name\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HeroAndFriends'].fragmentsReferenced).toEqual(['HeroDetails']);\n    });\n    it(`should keep track of fragments referenced in a fragment within a subselection`, () => {\n        const document = graphql_1.parse(`\n      query HeroAndFriends {\n        hero {\n          ...HeroDetails\n        }\n      }\n\n      fragment HeroDetails on Character {\n        friends {\n          ...HeroName\n        }\n      }\n\n      fragment HeroName on Character {\n        name\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HeroAndFriends'].fragmentsReferenced).toEqual(['HeroDetails', 'HeroName']);\n    });\n    it(`should keep track of fragments referenced in a subselection nested in an inline fragment`, () => {\n        const document = graphql_1.parse(`\n      query HeroAndFriends {\n        hero {\n          name\n          ... on Droid {\n            friends {\n              ...HeroDetails\n            }\n          }\n        }\n      }\n\n      fragment HeroDetails on Character {\n        name\n      }\n    `);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HeroAndFriends'].fragmentsReferenced).toEqual(['HeroDetails']);\n    });\n    describe(\"with mergeInFieldsFromFragmentSpreads set to false\", () => {\n        it(`should not morge fields from recursively included fragment spreads with type conditions that match the parent type`, () => {\n            const document = graphql_1.parse(`\n        query Hero {\n          hero {\n            id\n            ...HeroDetails\n          }\n        }\n\n        fragment HeroDetails on Character {\n          name\n          ...MoreHeroDetails\n          id\n        }\n\n        fragment MoreHeroDetails on Character {\n          appearsIn\n        }\n      `);\n            const { operations, fragments } = legacyIR_1.compileToLegacyIR(schema, document, { mergeInFieldsFromFragmentSpreads: false });\n            expect(operations['Hero'].fields[0].fields.map(field => field.fieldName))\n                .toEqual(['id']);\n            expect(fragments['HeroDetails'].fields.map(field => field.fieldName))\n                .toEqual(['name', 'id']);\n            expect(fragments['MoreHeroDetails'].fields.map(field => field.fieldName))\n                .toEqual(['appearsIn']);\n            expect(operations['Hero'].fragmentsReferenced).toEqual(['HeroDetails', 'MoreHeroDetails']);\n            expect(operations['Hero'].fields[0].fragmentSpreads).toEqual(['HeroDetails']);\n            expect(fragments['HeroDetails'].fragmentSpreads).toEqual(['MoreHeroDetails']);\n        });\n        it(`should not merge fields from fragment spreads from subselections`, () => {\n            const document = graphql_1.parse(`\n        query HeroAndFriends {\n          hero {\n            ...HeroDetails\n            appearsIn\n            id\n            friends {\n              id\n              ...HeroDetails\n            }\n          }\n        }\n\n        fragment HeroDetails on Character {\n          name\n          id\n        }\n      `);\n            const { operations, fragments } = legacyIR_1.compileToLegacyIR(schema, document, { mergeInFieldsFromFragmentSpreads: false });\n            expect(operations['HeroAndFriends'].fields[0].fields.map(field => field.fieldName))\n                .toEqual(['appearsIn', 'id', 'friends']);\n            expect(operations['HeroAndFriends'].fields[0].fields[2].fields.map(field => field.fieldName))\n                .toEqual(['id']);\n            expect(fragments['HeroDetails'].fields.map(field => field.fieldName))\n                .toEqual(['name', 'id']);\n            expect(operations['HeroAndFriends'].fragmentsReferenced).toEqual(['HeroDetails']);\n            expect(operations['HeroAndFriends'].fields[0].fragmentSpreads).toEqual(['HeroDetails']);\n        });\n        it(`should not merge fields from fragment spreads with type conditions`, () => {\n            const document = graphql_1.parse(`\n        query Hero {\n          hero {\n            name\n            ...DroidDetails\n            ...HumanDetails\n          }\n        }\n\n        fragment DroidDetails on Droid {\n          primaryFunction\n        }\n\n        fragment HumanDetails on Human {\n          height\n        }\n      `);\n            const { operations, fragments } = legacyIR_1.compileToLegacyIR(schema, document, { mergeInFieldsFromFragmentSpreads: false });\n            expect(operations['Hero'].fields[0].fields.map(field => field.fieldName))\n                .toEqual(['name']);\n            expect(operations['Hero'].fields[0].inlineFragment).toBeUndefined();\n            expect(operations['Hero'].fragmentsReferenced).toEqual(['DroidDetails', 'HumanDetails']);\n            expect(operations['Hero'].fields[0].fragmentSpreads).toEqual(['DroidDetails', 'HumanDetails']);\n        });\n    });\n    it(`should include the source of operations`, () => {\n        const source = common_tags_1.stripIndent `\n      query HeroName {\n        hero {\n          name\n        }\n      }\n    `;\n        const document = graphql_1.parse(source);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HeroName'].source).toBe(source);\n    });\n    it(`should include the source of fragments`, () => {\n        const source = common_tags_1.stripIndent `\n      fragment HeroDetails on Character {\n        name\n      }\n    `;\n        const document = graphql_1.parse(source);\n        const { fragments } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(fragments['HeroDetails'].source).toBe(source);\n    });\n    it(`should include the source of operations with __typename added when addTypename is true`, () => {\n        const source = common_tags_1.stripIndent `\n      query HeroName {\n        hero {\n          name\n        }\n      }\n    `;\n        const document = graphql_1.parse(source);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document, { addTypename: true });\n        expect(operations['HeroName'].source).toBe(common_tags_1.stripIndent `\n      query HeroName {\n        hero {\n          __typename\n          name\n        }\n      }\n    `);\n    });\n    it(`should include the source of fragments with __typename added when addTypename is true`, () => {\n        const source = common_tags_1.stripIndent `\n      fragment HeroDetails on Character {\n        name\n      }\n    `;\n        const document = graphql_1.parse(source);\n        const { fragments } = legacyIR_1.compileToLegacyIR(schema, document, { addTypename: true });\n        expect(fragments['HeroDetails'].source).toBe(common_tags_1.stripIndent `\n      fragment HeroDetails on Character {\n        __typename\n        name\n      }\n    `);\n    });\n    it(`should include the operationType for a query`, () => {\n        const source = common_tags_1.stripIndent `\n      query HeroName {\n        hero {\n          name\n        }\n      }\n    `;\n        const document = graphql_1.parse(source);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['HeroName'].operationType).toBe('query');\n    });\n    it(`should include the operationType for a mutation`, () => {\n        const source = common_tags_1.stripIndent `\n      mutation CreateReview {\n        createReview {\n          stars\n          commentary\n        }\n      }\n    `;\n        const document = graphql_1.parse(source);\n        const { operations } = legacyIR_1.compileToLegacyIR(schema, document);\n        expect(operations['CreateReview'].operationType).toBe('mutation');\n    });\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGVnYWN5SVIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJsZWdhY3lJUi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDZDQUF5QztBQUV6QyxxQ0FPaUI7QUFFakIsK0NBQThDO0FBRTlDLDBEQUErRDtBQUMvRCwrREFBd0Q7QUFFeEQsOEJBQThCLEVBQUU7SUFDOUIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLDhCQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN0QyxDQUFDO0FBRUQsTUFBTSxNQUFNLEdBQUcsb0JBQVUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGtDQUFrQyxDQUFDLENBQUMsQ0FBQztBQUUvRSxRQUFRLENBQUMsNENBQTRDLEVBQUUsR0FBRyxFQUFFO0lBQzFELEVBQUUsQ0FBQyxnREFBZ0QsRUFBRSxHQUFHLEVBQUU7UUFDeEQsTUFBTSxRQUFRLEdBQUcsZUFBSyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0FxQnRCLENBQUMsQ0FBQztRQUVILE1BQU0sRUFBRSxVQUFVLEVBQUUsR0FBRyxvQkFBb0IsQ0FBQyw0QkFBaUIsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUVqRixNQUFNLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FDOUM7WUFDRSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRTtTQUNyQyxDQUNGLENBQUM7UUFFRixNQUFNLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FDNUM7WUFDRSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRTtTQUNsQyxDQUNGLENBQUM7UUFFRixNQUFNLENBQUMsVUFBVSxDQUFDLHdCQUF3QixDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsT0FBTyxDQUM1RDtZQUNFLEVBQUUs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LEVBQUUsUUFBUSxDQUFDLENBQUM7UUFFM0QsTUFBTSxDQUFDLFVBQVUsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUM7WUFDbkYsU0FBUyxFQUFFLE1BQU07WUFDakIsYUFBYSxFQUFFLElBQUk7U0FDcEIsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLFVBQVUsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUM7WUFDbkYsU0FBUyxFQUFFLE1BQU07WUFDakIsYUFBYSxFQUFFLElBQUk7U0FDcEIsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsc0hBQXNILEVBQUUsR0FBRyxFQUFFO1FBQzlILE1BQU0sUUFBUSxHQUFHLGVBQUssQ0FBQzs7Ozs7Ozs7Ozs7O0tBWXRCLENBQUMsQ0FBQztRQUVILE1BQU0sRUFBRSxVQUFVLEVBQUUsR0FBRyw0QkFBaUIsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFFM0QsTUFBTSxDQUFDLFVBQVUsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUM7WUFDbkYsU0FBUyxFQUFFLE1BQU07WUFDakIsYUFBYSxFQUFFLEtBQUs7U0FDckIsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLFVBQVUsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUM7WUFDbkYsU0FBUyxFQUFFLE1BQU07WUFDakIsYUFBYSxFQUFFLEtBQUs7U0FDckIsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMs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QUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzdELENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLGlEQUFpRCxFQUFFLEdBQUcsRUFBRTtRQUN6RCxNQUFNLE1BQU0sR0FBRyx5QkFBVyxDQUFBOzs7Ozs7O0tBT3pCLENBQUE7UUFDRCxNQUFNLFFBQVEsR0FBRyxlQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7UUFFL0IsTUFBTSxFQUFFLFVBQVUsRUFBRSxHQUFHLDRCQUFpQixDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQztRQUUzRCxNQUFNLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNwRSxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3RyaXBJbmRlbnQgfSBmcm9tICdjb21tb24tdGFncydcblxuaW1wb3J0IHtcbiAgcGFyc2UsXG4gIGlzVHlwZSxcbiAgR3JhcGhRTElELFxuICBHcmFwaFFMU3RyaW5nLFxuICBHcmFwaFFMTGlzdCxcbiAgR3JhcGhRTE5vbk51bGxcbn0gZnJvbSAnZ3JhcGhxbCc7XG5cbmltcG9ydCB7IGxvYWRTY2hlbWEgfSBmcm9tICcuLi8uLi9zcmMvbG9hZGluZydcblxuaW1wb3J0IHsgY29tcGlsZVRvTGVnYWN5SVIgfSBmcm9tICcuLi8uLi9zcmMvY29tcGlsZXIvbGVnYWN5SVInXG5pbXBvcnQgeyBzZXJpYWxpemVBU1QgfSBmcm9tICcuLi8uLi9zcmMvc2VyaWFsaXplVG9KU09OJ1xuXG5mdW5jdGlvbiB3aXRoU3RyaW5naWZpZWRUeXBlcyhpcikge1xuICByZXR1cm4gSlNPTi5wYXJzZShzZXJpYWxpemVBU1QoaXIpKTtcbn1cblxuY29uc3Qgc2NoZW1hID0gbG9hZFNjaGVtYShyZXF1aXJlLnJlc29sdmUoJy4uL2ZpeHR1cmVzL3N0YXJ3YXJzL3NjaGVtYS5qc29uJykpO1xuXG5kZXNjcmliZSgnQ29tcGlsaW5nIHF1ZXJ5IGRvY3VtZW50cyB0byB0aGUgbGVnYWN5IElSJywgKCkgPT4ge1xuICBpdChgc2hvdWxkIGluY2x1ZGUgdmFyaWFibGVzIGRlZmluZWQgaW4gb3BlcmF0aW9uc2AsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIHF1ZXJ5IEhlcm9OYW1lKCRlcGlzb2RlOiBFcGlzb2RlKSB7XG4gICAgICAgIGhlcm8oZXBpc29kZTogJGVwaXNvZGUpIHtcbiAgICAgICAgICBuYW1lXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcXVlcnkgU2VhcmNoKCR0ZXh0OiBTdHJpbmchKSB7XG4gICAgICAgIHNlYXJjaCh0ZXh0OiAkdGV4dCkge1xuICAgICAgICAgIC4uLiBvbiBDaGFyYWN0ZXIge1xuICAgICAgICAgICAgbmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtdXRhdGlvbiBDcmVhdGVSZXZpZXdGb3JFcGlzb2RlKCRlcGlzb2RlOiBFcGlzb2RlISwgJHJldmlldzogUmV2aWV3SW5wdXQhKSB7XG4gICAgICAgIGNyZWF0ZVJldmlldyhlcGlzb2RlOiAkZXBpc29kZSwgcmV2aWV3OiAkcmV2aWV3KSB7XG4gICAgICAgICAgc3RhcnNcbiAgICAgICAgICBjb21tZW50YXJ5XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gd2l0aFN0cmluZ2lmaWVkVHlwZXMoY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCkpO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10udmFyaWFibGVzKS50b0VxdWFsKFxuICAgICAgW1xuICAgICAgICB7IG5hbWU6ICdlcGlzb2RlJywgdHlwZTogJ0VwaXNvZGUnIH1cbiAgICAgIF1cbiAgICApO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ1NlYXJjaCddLnZhcmlhYmxlcykudG9FcXVhbChcbiAgICAgIFtcbiAgICAgICAgeyBuYW1lOiAndGV4dCcsIHR5cGU6ICdTdHJpbmchJyB9XG4gICAgICBdXG4gICAgKTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydDcmVhdGVSZXZpZXdGb3JFcGlzb2RlJ10udmFyaWFibGVzKS50b0VxdWFsKFxuICAgICAgW1xuICAgICAgICB7IG5hbWU6ICdlcGlzb2RlJywgdHlwZTogJ0VwaXNvZGUhJyB9LFxuICAgICAgICB7IG5hbWU6ICdyZXZpZXcnLCB0eXBlOiAnUmV2aWV3SW5wdXQhJyB9XG4gICAgICBdXG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBrZWVwIHRyYWNrIG9mIGVudW1zIGFuZCBpbnB1dCBvYmplY3QgdHlwZXMgdXNlZCBpbiB2YXJpYWJsZXNgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvTmFtZSgkZXBpc29kZTogRXBpc29kZSkge1xuICAgICAgICBoZXJvKGVwaXNvZGU6ICRlcGlzb2RlKSB7XG4gICAgICAgICAgbmFtZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHF1ZXJ5IFNlYXJjaCgkdGV4dDogU3RyaW5nKSB7XG4gICAgICAgIHNlYXJjaCh0ZXh0OiAkdGV4dCkge1xuICAgICAgICAgIC4uLiBvbiBDaGFyYWN0ZXIge1xuICAgICAgICAgICAgbmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtdXRhdGlvbiBDcmVhdGVSZXZpZXdGb3JFcGlzb2RlKCRlcGlzb2RlOiBFcGlzb2RlISwgJHJldmlldzogUmV2aWV3SW5wdXQhKSB7XG4gICAgICAgIGNyZWF0ZVJldmlldyhlcGlzb2RlOiAkZXBpc29kZSwgcmV2aWV3OiAkcmV2aWV3KSB7XG4gICAgICAgICAgc3RhcnNcbiAgICAgICAgICBjb21tZW50YXJ5XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgdHlwZXNVc2VkIH0gPSB3aXRoU3RyaW5naWZpZWRUeXBlcyhjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KSk7XG5cbiAgICBleHBlY3QodHlwZXNVc2VkKS50b0VxdWFsKFsnRXBpc29kZScsICdSZXZpZXdJbnB1dCcsICdDb2xvcklucHV0J10pO1xuICB9KTtcblxuICBpdChgc2hvdWxkIGtlZXAgdHJhY2sgb2YgZW51bXMgdXNlZCBpbiBmaWVsZHNgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgbmFtZVxuICAgICAgICAgIGFwcGVhcnNJblxuICAgICAgICB9XG5cbiAgICAgICAgZHJvaWQoaWQ6IFwiMjAwMVwiKSB7XG4gICAgICAgICAgYXBwZWFyc0luXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgdHlwZXNVc2VkIH0gPSB3aXRoU3RyaW5naWZpZWRUeXBlcyhjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KSk7XG5cbiAgICBleHBlY3QodHlwZXNVc2VkKS50b0VxdWFsKFsnRXBpc29kZSddKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBrZWVwIHRyYWNrIG9mIHR5cGVzIHVzZWQgaW4gZmllbGRzIG9mIGlucHV0IG9iamVjdHNgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBtdXRhdGlvbiBGaWVsZEFyZ3VtZW50c1dpdGhJbnB1dE9iamVjdHMoJHJldmlldzogUmV2aWV3SW5wdXQhKSB7XG4gICAgICAgIGNyZWF0ZVJldmlldyhlcGlzb2RlOiBKRURJLCByZXZpZXc6ICRyZXZpZXcpIHtcbiAgICAgICAgICBjb21tZW50YXJ5XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGApO1xuXG4gICAgY29uc3QgeyB0eXBlc1VzZWQgfSA9IHdpdGhTdHJpbmdpZmllZFR5cGVzKGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpKTtcblxuICAgIGV4cGVjdCh0eXBlc1VzZWQpLnRvQ29udGFpbignUmV2aWV3SW5wdXQnKTtcbiAgICBleHBlY3QodHlwZXNVc2VkKS50b0NvbnRhaW4oJ0NvbG9ySW5wdXQnKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBpbmNsdWRlIHRoZSBvcmlnaW5hbCBmaWVsZCBuYW1lIGZvciBhbiBhbGlhc2VkIGZpZWxkYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgcXVlcnkgSGVyb05hbWUge1xuICAgICAgICByMjogaGVybyB7XG4gICAgICAgICAgbmFtZVxuICAgICAgICB9XG4gICAgICAgIGx1a2U6IGhlcm8oZXBpc29kZTogRU1QSVJFKSB7XG4gICAgICAgICAgbmFtZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYCk7XG5cbiAgICBjb25zdCB7IG9wZXJhdGlvbnMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uZmllbGRzWzBdLmZpZWxkTmFtZSkudG9CZShcImhlcm9cIik7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgaW5jbHVkZSBmaWVsZCBhcmd1bWVudHNgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvTmFtZSB7XG4gICAgICAgIGhlcm8oZXBpc29kZTogRU1QSVJFKSB7XG4gICAgICAgICAgbmFtZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYCk7XG5cbiAgICBjb25zdCB7IG9wZXJhdGlvbnMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uZmllbGRzWzBdLmFyZ3MpXG4gICAgICAudG9FcXVhbChbeyBuYW1lOiBcImVwaXNvZGVcIiwgdmFsdWU6IFwiRU1QSVJFXCIsIHR5cGU6IHNjaGVtYS5nZXRUeXBlKFwiRXBpc29kZVwiKSB9XSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgaW5jbHVkZSBpc0NvbmRpdGlvbmFsIGlmIGEgZmllbGQgaGFzIHNraXAgb3IgaW5jbHVkZSBkaXJlY3RpdmVzIHdpdGggdmFyaWFibGVzYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgcXVlcnkgSGVyb05hbWVDb25kaXRpb25hbEluY2x1c2lvbigkaW5jbHVkZU5hbWU6IEJvb2xlYW4hKSB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIG5hbWUgQGluY2x1ZGUoaWY6ICRpbmNsdWRlTmFtZSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBxdWVyeSBIZXJvTmFtZUNvbmRpdGlvbmFsRXhjbHVzaW9uKCRza2lwTmFtZTogQm9vbGVhbiEpIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgbmFtZSBAc2tpcChpZjogJHNraXBOYW1lKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYCk7XG5cbiAgICBjb25zdCB7IG9wZXJhdGlvbnMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lQ29uZGl0aW9uYWxJbmNsdXNpb24nXS5maWVsZHNbMF0uZmllbGRzWzBdKS50b01hdGNoT2JqZWN0KHtcbiAgICAgIGZpZWxkTmFtZTogJ25hbWUnLFxuICAgICAgaXNDb25kaXRpb25hbDogdHJ1ZVxuICAgIH0pO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lQ29uZGl0aW9uYWxFeGNsdXNpb24nXS5maWVsZHNbMF0uZmllbGRzWzBdKS50b01hdGNoT2JqZWN0KHtcbiAgICAgIGZpZWxkTmFtZTogJ25hbWUnLFxuICAgICAgaXNDb25kaXRpb25hbDogdHJ1ZVxuICAgIH0pO1xuICB9KTtcblxuICBpdChgc2hvdWxkIG5vdCBpbmNsdWRlIGlzQ29uZGl0aW9uYWwgaWYgYSBmaWVsZCBoYXMgc2tpcCBvciBpbmNsdWRlIGRpcmVjdGl2ZXMgd2l0aCBhIGJvb2xlYW4gbGl0ZXJhbCB0aGF0IGFsd2F5cyBwYXNzZXNgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvTmFtZUNvbmRpdGlvbmFsSW5jbHVzaW9uIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgbmFtZSBAaW5jbHVkZShpZjogdHJ1ZSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBxdWVyeSBIZXJvTmFtZUNvbmRpdGlvbmFsRXhjbHVzaW9uIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgbmFtZSBAc2tpcChpZjogZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWVDb25kaXRpb25hbEluY2x1c2lvbiddLmZpZWxkc1swXS5maWVsZHNbMF0pLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgZmllbGROYW1lOiAnbmFtZScsXG4gICAgICBpc0NvbmRpdGlvbmFsOiBmYWxzZVxuICAgIH0pO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lQ29uZGl0aW9uYWxFeGNsdXNpb24nXS5maWVsZHNbMF0uZmllbGRzWzBdKS50b01hdGNoT2JqZWN0KHtcbiAgICAgIGZpZWxkTmFtZTogJ25hbWUnLFxuICAgICAgaXNDb25kaXRpb25hbDogZmFsc2VcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBub3QgaW5jbHVkZSBmaWVsZCBpZiBpdCBoYXMgc2tpcCBvciBpbmNsdWRlIGRpcmVjdGl2ZXMgd2l0aCBhIGJvb2xlYW4gbGl0ZXJhbCB0aGF0IGFsd2F5cyBmYWlsc2AsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIHF1ZXJ5IEhlcm9OYW1lQ29uZGl0aW9uYWxJbmNsdXNpb24ge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICBuYW1lIEBpbmNsdWRlKGlmOiBmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBxdWVyeSBIZXJvTmFtZUNvbmRpdGlvbmFsRXhjbHVzaW9uIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgbmFtZSBAc2tpcChpZjogdHJ1ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZUNvbmRpdGlvbmFsSW5jbHVzaW9uJ10uZmllbGRzWzBdLmZpZWxkcykudG9IYXZlTGVuZ3RoKDApO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZUNvbmRpdGlvbmFsRXhjbHVzaW9uJ10uZmllbGRzWzBdLmZpZWxkcykudG9IYXZlTGVuZ3RoKDApO1xuICB9KTtcblxuICAgIGl0KGBzaG91bGQgaW5jbHVkZSBpc0NvbmRpdGlvbmFsIGlmIGEgZmllbGQgaW4gaW5zaWRlIGFuIGlubGluZSBmcmFnbWVudCB3aXRoIHNraXAgb3IgaW5jbHVkZSBkaXJlY3RpdmVzIHdpdGggdmFyaWFibGVzYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgcXVlcnkgSGVyb05hbWVDb25kaXRpb25hbEluY2x1c2lvbigkaW5jbHVkZU5hbWU6IEJvb2xlYW4hKSB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIC4uLiBAaW5jbHVkZShpZjogJGluY2x1ZGVOYW1lKSB7XG4gICAgICAgICAgICBuYW1lXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHF1ZXJ5IEhlcm9OYW1lQ29uZGl0aW9uYWxFeGNsdXNpb24oJHNraXBOYW1lOiBCb29sZWFuISkge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICAuLi4gQHNraXAoaWY6ICRza2lwTmFtZSkge1xuICAgICAgICAgICAgbmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZUNvbmRpdGlvbmFsSW5jbHVzaW9uJ10uZmllbGRzWzBdLmZpZWxkc1swXSkudG9NYXRjaE9iamVjdCh7XG4gICAgICBmaWVsZE5hbWU6ICduYW1lJyxcbiAgICAgIGlzQ29uZGl0aW9uYWw6IHRydWVcbiAgICB9KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZUNvbmRpdGlvbmFsRXhjbHVzaW9uJ10uZmllbGRzWzBdLmZpZWxkc1swXSkudG9NYXRjaE9iamVjdCh7XG4gICAgICBmaWVsZE5hbWU6ICduYW1lJyxcbiAgICAgIGlzQ29uZGl0aW9uYWw6IHRydWVcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBpbmNsdWRlIGlzQ29uZGl0aW9uYWwgaWYgYSBmaWVsZCBpbiBpbnNpZGUgYSBmcmFnbWVudCBzcHJlYWQgd2l0aCBza2lwIG9yIGluY2x1ZGUgZGlyZWN0aXZlcyB3aXRoIHZhcmlhYmxlc2AsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIHF1ZXJ5IEhlcm9OYW1lQ29uZGl0aW9uYWxJbmNsdXNpb24oJGluY2x1ZGVOYW1lOiBCb29sZWFuISkge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICAuLi5IZXJvTmFtZSBAaW5jbHVkZShpZjogJGluY2x1ZGVOYW1lKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHF1ZXJ5IEhlcm9OYW1lQ29uZGl0aW9uYWxFeGNsdXNpb24oJHNraXBOYW1lOiBCb29sZWFuISkge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICAuLi5IZXJvTmFtZSBAc2tpcChpZjogJHNraXBOYW1lKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZyYWdtZW50IEhlcm9OYW1lIG9uIENoYXJhY3RlciB7XG4gICAgICAgIG5hbWVcbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWVDb25kaXRpb25hbEluY2x1c2lvbiddLmZpZWxkc1swXS5maWVsZHNbMF0pLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgZmllbGROYW1lOiAnbmFtZScsXG4gICAgICBpc0NvbmRpdGlvbmFsOiB0cnVlXG4gICAgfSk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWVDb25kaXRpb25hbEV4Y2x1c2lvbiddLmZpZWxkc1swXS5maWVsZHNbMF0pLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgZmllbGROYW1lOiAnbmFtZScsXG4gICAgICBpc0NvbmRpdGlvbmFsOiB0cnVlXG4gICAgfSk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWVDb25kaXRpb25hbEluY2x1c2lvbiddLmZyYWdtZW50c1JlZmVyZW5jZWQpLnRvRXF1YWwoWydIZXJvTmFtZSddKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWVDb25kaXRpb25hbEluY2x1c2lvbiddLmZpZWxkc1swXS5mcmFnbWVudFNwcmVhZHMpLnRvRXF1YWwoWydIZXJvTmFtZSddKTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZUNvbmRpdGlvbmFsRXhjbHVzaW9uJ10uZnJhZ21lbnRzUmVmZXJlbmNlZCkudG9FcXVhbChbJ0hlcm9OYW1lJ10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZUNvbmRpdGlvbmFsRXhjbHVzaW9uJ10uZmllbGRzWzBdLmZyYWdtZW50U3ByZWFkcykudG9FcXVhbChbJ0hlcm9OYW1lJ10pO1xuICB9KTtcblxuICBpdChgc2hvdWxkIHJlY3Vyc2l2ZWx5IGZsYXR0ZW4gaW5saW5lIGZyYWdtZW50cyB3aXRoIHR5cGUgY29uZGl0aW9ucyB0aGF0IG1hdGNoIHRoZSBwYXJlbnQgdHlwZWAsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIHF1ZXJ5IEhlcm8ge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICBpZFxuICAgICAgICAgIC4uLiBvbiBDaGFyYWN0ZXIge1xuICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgLi4uIG9uIENoYXJhY3RlciB7XG4gICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgIGFwcGVhcnNJblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZpZWxkc1swXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbJ2lkJywgJ25hbWUnLCAnYXBwZWFyc0luJ10pO1xuICB9KTtcblxuICBpdChgc2hvdWxkIHJlY3Vyc2l2ZWx5IGluY2x1ZGUgZnJhZ21lbnQgc3ByZWFkcyB3aXRoIHR5cGUgY29uZGl0aW9ucyB0aGF0IG1hdGNoIHRoZSBwYXJlbnQgdHlwZWAsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIHF1ZXJ5IEhlcm8ge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICBpZFxuICAgICAgICAgIC4uLkhlcm9EZXRhaWxzXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnJhZ21lbnQgSGVyb0RldGFpbHMgb24gQ2hhcmFjdGVyIHtcbiAgICAgICAgbmFtZVxuICAgICAgICAuLi5Nb3JlSGVyb0RldGFpbHNcbiAgICAgICAgaWRcbiAgICAgIH1cblxuICAgICAgZnJhZ21lbnQgTW9yZUhlcm9EZXRhaWxzIG9uIENoYXJhY3RlciB7XG4gICAgICAgIGFwcGVhcnNJblxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zLCBmcmFnbWVudHMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoWydpZCcsICduYW1lJywgJ2FwcGVhcnNJbiddKTtcblxuICAgIGV4cGVjdChmcmFnbWVudHNbJ0hlcm9EZXRhaWxzJ10uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoWyduYW1lJywgJ2FwcGVhcnNJbicsICdpZCddKTtcblxuICAgIGV4cGVjdChmcmFnbWVudHNbJ01vcmVIZXJvRGV0YWlscyddLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgIC50b0VxdWFsKFsnYXBwZWFyc0luJ10pO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5mcmFnbWVudHNSZWZlcmVuY2VkKS50b0VxdWFsKFsnSGVyb0RldGFpbHMnLCAnTW9yZUhlcm9EZXRhaWxzJ10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmZyYWdtZW50U3ByZWFkcykudG9FcXVhbChbJ0hlcm9EZXRhaWxzJ10pO1xuICAgIGV4cGVjdChmcmFnbWVudHNbJ0hlcm9EZXRhaWxzJ10uZnJhZ21lbnRTcHJlYWRzKS50b0VxdWFsKFsnTW9yZUhlcm9EZXRhaWxzJ10pO1xuICB9KTtcblxuICBpdChgc2hvdWxkIGluY2x1ZGUgZnJhZ21lbnQgc3ByZWFkcyBmcm9tIHN1YnNlbGVjdGlvbnNgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvQW5kRnJpZW5kcyB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIC4uLkhlcm9EZXRhaWxzXG4gICAgICAgICAgYXBwZWFyc0luXG4gICAgICAgICAgaWRcbiAgICAgICAgICBmcmllbmRzIHtcbiAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAuLi5IZXJvRGV0YWlsc1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmcmFnbWVudCBIZXJvRGV0YWlscyBvbiBDaGFyYWN0ZXIge1xuICAgICAgXHRuYW1lXG4gICAgICAgIGlkXG4gICAgICB9XG4gICAgYCk7XG5cbiAgICBjb25zdCB7IG9wZXJhdGlvbnMsIGZyYWdtZW50cyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb0FuZEZyaWVuZHMnXS5maWVsZHNbMF0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoWyduYW1lJywgJ2lkJywgJ2FwcGVhcnNJbicsICdmcmllbmRzJ10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvQW5kRnJpZW5kcyddLmZpZWxkc1swXS5maWVsZHNbM10uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoWydpZCcsICduYW1lJ10pO1xuXG4gICAgZXhwZWN0KGZyYWdtZW50c1snSGVyb0RldGFpbHMnXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbJ25hbWUnLCAnaWQnXSk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb0FuZEZyaWVuZHMnXS5mcmFnbWVudHNSZWZlcmVuY2VkKS50b0VxdWFsKFsnSGVyb0RldGFpbHMnXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9BbmRGcmllbmRzJ10uZmllbGRzWzBdLmZyYWdtZW50U3ByZWFkcykudG9FcXVhbChbJ0hlcm9EZXRhaWxzJ10pO1xuICB9KTtcblxuICBpdChgc2hvdWxkIGluY2x1ZGUgdHlwZSBjb25kaXRpb25zIHdpdGggbWVyZ2VkIGZpZWxkcyBmb3IgaW5saW5lIGZyYWdtZW50c2AsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIHF1ZXJ5IEhlcm8ge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICBuYW1lXG4gICAgICAgICAgLi4uIG9uIERyb2lkIHtcbiAgICAgICAgICAgIHByaW1hcnlGdW5jdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgICAuLi4gb24gSHVtYW4ge1xuICAgICAgICAgICAgaGVpZ2h0XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYCk7XG5cbiAgICBjb25zdCB7IG9wZXJhdGlvbnMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoWyduYW1lJ10pO1xuXG4gICAgICByZXR1cm47XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudHNbXCJEcm9pZFwiXS50eXBlQ29uZGl0aW9uLnRvU3RyaW5nKCkpLnRvRXF1YWwoJ0Ryb2lkJyk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzW1wiRHJvaWRcIl0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgICAudG9FcXVhbChbJ25hbWUnLCAncHJpbWFyeUZ1bmN0aW9uJ10pO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzW1wiSHVtYW5cIl0udHlwZUNvbmRpdGlvbi50b1N0cmluZygpKS50b0VxdWFsKCdIdW1hbicpO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50c1tcIkh1bWFuXCJdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgICAgLnRvRXF1YWwoWyduYW1lJywgJ2hlaWdodCddKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBpbmNsdWRlIGZyYWdtZW50IHNwcmVhZHMgd2l0aCB0eXBlIGNvbmRpdGlvbnNgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgbmFtZVxuICAgICAgICAgIC4uLkRyb2lkRGV0YWlsc1xuICAgICAgICAgIC4uLkh1bWFuRGV0YWlsc1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZyYWdtZW50IERyb2lkRGV0YWlscyBvbiBEcm9pZCB7XG4gICAgICAgIHByaW1hcnlGdW5jdGlvblxuICAgICAgfVxuXG4gICAgICBmcmFnbWVudCBIdW1hbkRldGFpbHMgb24gSHVtYW4ge1xuICAgICAgICBoZWlnaHRcbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucywgZnJhZ21lbnRzIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgIC50b0VxdWFsKFsnbmFtZSddKTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50c1tcIkRyb2lkXCJdLnR5cGVDb25kaXRpb24udG9TdHJpbmcoKSkudG9FcXVhbCgnRHJvaWQnKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudHNbXCJEcm9pZFwiXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAgIC50b0VxdWFsKFsnbmFtZScsICdwcmltYXJ5RnVuY3Rpb24nXSk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudHNbJ0h1bWFuJ10udHlwZUNvbmRpdGlvbi50b1N0cmluZygpKS50b0VxdWFsKCdIdW1hbicpO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50c1snSHVtYW4nXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAgIC50b0VxdWFsKFsnbmFtZScsICdoZWlnaHQnXSk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZyYWdtZW50c1JlZmVyZW5jZWQpLnRvRXF1YWwoWydEcm9pZERldGFpbHMnLCAnSHVtYW5EZXRhaWxzJ10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmZyYWdtZW50U3ByZWFkcykudG9FcXVhbChbJ0Ryb2lkRGV0YWlscycsICdIdW1hbkRldGFpbHMnXSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgbm90IGluY2x1ZGUgdHlwZSBjb25kaXRpb25zIGZvciBmcmFnbWVudCBzcHJlYWRzIHdpdGggdHlwZSBjb25kaXRpb25zIHRoYXQgbWF0Y2ggdGhlIHBhcmVudCB0eXBlYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgcXVlcnkgSGVybyB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIG5hbWVcbiAgICAgICAgICAuLi5IZXJvRGV0YWlsc1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZyYWdtZW50IEhlcm9EZXRhaWxzIG9uIENoYXJhY3RlciB7XG4gICAgICAgIG5hbWVcbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZpZWxkc1swXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgLnRvRXF1YWwoWyduYW1lJ10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50cykudG9FcXVhbChbXSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgaW5jbHVkZSB0eXBlIGNvbmRpdGlvbnMgZm9yIGlubGluZSBmcmFnbWVudHMgaW4gZnJhZ21lbnRzYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgcXVlcnkgSGVybyB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIC4uLkhlcm9EZXRhaWxzXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnJhZ21lbnQgSGVyb0RldGFpbHMgb24gQ2hhcmFjdGVyIHtcbiAgICAgICAgbmFtZVxuICAgICAgICAuLi4gb24gRHJvaWQge1xuICAgICAgICAgIHByaW1hcnlGdW5jdGlvblxuICAgICAgICB9XG4gICAgICAgIC4uLiBvbiBIdW1hbiB7XG4gICAgICAgICAgaGVpZ2h0XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucywgZnJhZ21lbnRzIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgIC50b0VxdWFsKFsnbmFtZSddKTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50c1snRHJvaWQnXS50eXBlQ29uZGl0aW9uLnRvU3RyaW5nKCkpLnRvRXF1YWwoJ0Ryb2lkJyk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzWydEcm9pZCddLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgICAgLnRvRXF1YWwoWyduYW1lJywgJ3ByaW1hcnlGdW5jdGlvbiddKTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50c1snSHVtYW4nXS50eXBlQ29uZGl0aW9uLnRvU3RyaW5nKCkpLnRvRXF1YWwoJ0h1bWFuJyk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzWydIdW1hbiddLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgICAgLnRvRXF1YWwoWyduYW1lJywgJ2hlaWdodCddKTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZnJhZ21lbnRzUmVmZXJlbmNlZCkudG9FcXVhbChbJ0hlcm9EZXRhaWxzJ10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmZyYWdtZW50U3ByZWFkcykudG9FcXVhbChbJ0hlcm9EZXRhaWxzJ10pO1xuICB9KTtcblxuICBpdChgc2hvdWxkIGluaGVyaXQgdHlwZSBjb25kaXRpb24gd2hlbiBuZXN0aW5nIGFuIGlubGluZSBmcmFnbWVudCBpbiBhbiBpbmxpbmUgZnJhZ21lbnQgd2l0aCBhIG1vcmUgc3BlY2lmaWMgdHlwZSBjb25kaXRpb25gLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvTmFtZSB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIC4uLiBvbiBEcm9pZCB7XG4gICAgICAgICAgICAuLi4gb24gQ2hhcmFjdGVyIHtcbiAgICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZSddLmZpZWxkc1swXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50c1snRHJvaWQnXS50eXBlQ29uZGl0aW9uLnRvU3RyaW5nKCkpLnRvRXF1YWwoJ0Ryb2lkJyk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50c1snRHJvaWQnXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbJ25hbWUnXSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgbm90IGluaGVyaXQgdHlwZSBjb25kaXRpb24gd2hlbiBuZXN0aW5nIGFuIGlubGluZSBmcmFnbWVudCBpbiBhbiBpbmxpbmUgZnJhZ21lbnQgd2l0aCBhIGxlc3Mgc3BlY2lmaWMgdHlwZSBjb25kaXRpb25gLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvTmFtZSB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIC4uLiBvbiBDaGFyYWN0ZXIge1xuICAgICAgICAgICAgLi4uIG9uIERyb2lkIHtcbiAgICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZSddLmZpZWxkc1swXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50c1snRHJvaWQnXS50eXBlQ29uZGl0aW9uLnRvU3RyaW5nKCkpLnRvRXF1YWwoJ0Ryb2lkJyk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50c1snRHJvaWQnXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbJ25hbWUnXSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgaW5oZXJpdCB0eXBlIGNvbmRpdGlvbiB3aGVuIG5lc3RpbmcgYSBmcmFnbWVudCBzcHJlYWQgaW4gYW4gaW5saW5lIGZyYWdtZW50IHdpdGggYSBtb3JlIHNwZWNpZmljIHR5cGUgY29uZGl0aW9uYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgcXVlcnkgSGVyb05hbWUge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICAuLi4gb24gRHJvaWQge1xuICAgICAgICAgICAgLi4uQ2hhcmFjdGVyTmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmcmFnbWVudCBDaGFyYWN0ZXJOYW1lIG9uIENoYXJhY3RlciB7XG4gICAgICAgIG5hbWVcbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWUnXS5maWVsZHNbMF0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoW10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZSddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudHNbXCJEcm9pZFwiXS50eXBlQ29uZGl0aW9uLnRvU3RyaW5nKCkpLnRvRXF1YWwoJ0Ryb2lkJyk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50c1tcIkRyb2lkXCJdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgIC50b0VxdWFsKFsnbmFtZSddKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWUnXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzW1wiRHJvaWRcIl0uZnJhZ21lbnRTcHJlYWRzKS50b0VxdWFsKFsnQ2hhcmFjdGVyTmFtZSddKTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZSddLmZyYWdtZW50c1JlZmVyZW5jZWQpLnRvRXF1YWwoWydDaGFyYWN0ZXJOYW1lJ10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZSddLmZpZWxkc1swXS5mcmFnbWVudFNwcmVhZHMpLnRvRXF1YWwoW10pO1xuICB9KTtcblxuICBpdChgc2hvdWxkIG5vdCBpbmhlcml0IHR5cGUgY29uZGl0aW9uIHdoZW4gbmVzdGluZyBhIGZyYWdtZW50IHNwcmVhZCBpbiBhbiBpbmxpbmUgZnJhZ21lbnQgd2l0aCBhIGxlc3Mgc3BlY2lmaWMgdHlwZSBjb25kaXRpb25gLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvTmFtZSB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIC4uLiBvbiBDaGFyYWN0ZXIge1xuICAgICAgICAgICAgLi4uRHJvaWROYW1lXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZyYWdtZW50IERyb2lkTmFtZSBvbiBEcm9pZCB7XG4gICAgICAgIG5hbWVcbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWUnXS5maWVsZHNbMF0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoW10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZSddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudHNbXCJEcm9pZFwiXS50eXBlQ29uZGl0aW9uLnRvU3RyaW5nKCkpLnRvRXF1YWwoJ0Ryb2lkJyk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50c1tcIkRyb2lkXCJdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgIC50b0VxdWFsKFsnbmFtZSddKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWUnXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzW1wiRHJvaWRcIl0uZnJhZ21lbnRTcHJlYWRzKS50b0VxdWFsKFsnRHJvaWROYW1lJ10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZSddLmZyYWdtZW50c1JlZmVyZW5jZWQpLnRvRXF1YWwoWydEcm9pZE5hbWUnXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uZmllbGRzWzBdLmZyYWdtZW50U3ByZWFkcykudG9FcXVhbChbJ0Ryb2lkTmFtZSddKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBpZ25vcmUgaW5saW5lIGZyYWdtZW50IHdoZW4gdGhlIHR5cGUgY29uZGl0aW9uIGRvZXMgbm90IG92ZXJsYXAgd2l0aCB0aGUgY3VycmVudGx5IGVmZmVjdGl2ZSB0eXBlYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgZnJhZ21lbnQgQ2hhcmFjdGVyRGV0YWlscyBvbiBDaGFyYWN0ZXIge1xuICAgICAgICAuLi4gb24gRHJvaWQge1xuICAgICAgICAgIHByaW1hcnlGdW5jdGlvblxuICAgICAgICB9XG4gICAgICAgIC4uLiBvbiBIdW1hbiB7XG4gICAgICAgICAgaGVpZ2h0XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcXVlcnkgSHVtYW5BbmREcm9pZCB7XG4gICAgICAgIGh1bWFuKGlkOiBcImh1bWFuXCIpIHtcbiAgICAgICAgICAuLi5DaGFyYWN0ZXJEZXRhaWxzXG4gICAgICAgIH1cbiAgICAgICAgZHJvaWQoaWQ6IFwiZHJvaWRcIikge1xuICAgICAgICAgIC4uLkNoYXJhY3RlckRldGFpbHNcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIdW1hbkFuZERyb2lkJ10uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoWydodW1hbicsICdkcm9pZCddKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSHVtYW5BbmREcm9pZCddLmZpZWxkc1swXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbJ2hlaWdodCddKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSHVtYW5BbmREcm9pZCddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudHMpLnRvRXF1YWwoW10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIdW1hbkFuZERyb2lkJ10uZmllbGRzWzFdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgIC50b0VxdWFsKFsncHJpbWFyeUZ1bmN0aW9uJ10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIdW1hbkFuZERyb2lkJ10uZmllbGRzWzFdLmlubGluZUZyYWdtZW50cykudG9FcXVhbChbXSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgaWdub3JlIGZyYWdtZW50IHNwcmVhZCB3aGVuIHRoZSB0eXBlIGNvbmRpdGlvbiBkb2VzIG5vdCBvdmVybGFwIHdpdGggdGhlIGN1cnJlbnRseSBlZmZlY3RpdmUgdHlwZWAsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIGZyYWdtZW50IERyb2lkUHJpbWFyeUZ1bmN0aW9uIG9uIERyb2lkIHtcbiAgICAgICAgcHJpbWFyeUZ1bmN0aW9uXG4gICAgICB9XG5cbiAgICAgIGZyYWdtZW50IEh1bWFuSGVpZ2h0IG9uIEh1bWFuIHtcbiAgICAgICAgaGVpZ2h0XG4gICAgICB9XG5cbiAgICAgIGZyYWdtZW50IENoYXJhY3RlckRldGFpbHMgb24gQ2hhcmFjdGVyIHtcbiAgICAgICAgLi4uRHJvaWRQcmltYXJ5RnVuY3Rpb25cbiAgICAgICAgLi4uSHVtYW5IZWlnaHRcbiAgICAgIH1cblxuICAgICAgcXVlcnkgSHVtYW5BbmREcm9pZCB7XG4gICAgICAgIGh1bWFuKGlkOiBcImh1bWFuXCIpIHtcbiAgICAgICAgICAuLi5DaGFyYWN0ZXJEZXRhaWxzXG4gICAgICAgIH1cbiAgICAgICAgZHJvaWQoaWQ6IFwiZHJvaWRcIikge1xuICAgICAgICAgIC4uLkNoYXJhY3RlckRldGFpbHNcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIdW1hbkFuZERyb2lkJ10uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoWydodW1hbicsICdkcm9pZCddKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSHVtYW5BbmREcm9pZCddLmZpZWxkc1swXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbJ2hlaWdodCddKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSHVtYW5BbmREcm9pZCddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudHMpLnRvRXF1YWwoW10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIdW1hbkFuZERyb2lkJ10uZmllbGRzWzFdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgIC50b0VxdWFsKFsncHJpbWFyeUZ1bmN0aW9uJ10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIdW1hbkFuZERyb2lkJ10uZmllbGRzWzFdLmlubGluZUZyYWdtZW50cykudG9FcXVhbChbXSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgaW5jbHVkZSB0eXBlIGNvbmRpdGlvbnMgZm9yIGlubGluZSBmcmFnbWVudHMgb24gYSB1bmlvbiB0eXBlYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgcXVlcnkgU2VhcmNoIHtcbiAgICAgICAgc2VhcmNoKHRleHQ6IFwiYW5cIikge1xuICAgICAgICAgIC4uLiBvbiBDaGFyYWN0ZXIge1xuICAgICAgICAgICAgbmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgICAuLi4gb24gRHJvaWQge1xuICAgICAgICAgICAgcHJpbWFyeUZ1bmN0aW9uXG4gICAgICAgICAgfVxuICAgICAgICAgIC4uLiBvbiBIdW1hbiB7XG4gICAgICAgICAgICBoZWlnaHRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snU2VhcmNoJ10uZmllbGRzWzBdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgIC50b0VxdWFsKFtdKTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydTZWFyY2gnXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzW1wiRHJvaWRcIl0udHlwZUNvbmRpdGlvbi50b1N0cmluZygpKS50b0VxdWFsKCdEcm9pZCcpO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydTZWFyY2gnXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzW1wiRHJvaWRcIl0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoWyduYW1lJywgJ3ByaW1hcnlGdW5jdGlvbiddKTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydTZWFyY2gnXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzW1wiSHVtYW5cIl0udHlwZUNvbmRpdGlvbi50b1N0cmluZygpKS50b0VxdWFsKCdIdW1hbicpO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydTZWFyY2gnXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzW1wiSHVtYW5cIl0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoWyduYW1lJywgJ2hlaWdodCddKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBrZWVwIGNvcnJlY3QgZmllbGQgb3JkZXJpbmcgZXZlbiBpZiBmcmFnbWVudCBpcyB2aXNpdGVkIG11bHRpcGxlIHRpbWVzYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgcXVlcnkgSGVybyB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIC4uLkhlcm9OYW1lXG4gICAgICAgICAgYXBwZWFyc0luXG4gICAgICAgICAgLi4uSGVyb05hbWVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmcmFnbWVudCBIZXJvTmFtZSBvbiBDaGFyYWN0ZXIge1xuICAgICAgICBuYW1lXG4gICAgICB9XG4gICAgYCk7XG5cbiAgICBjb25zdCB7IG9wZXJhdGlvbnMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoWyduYW1lJywgJ2FwcGVhcnNJbiddKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBrZWVwIGNvcnJlY3QgZmllbGQgb3JkZXJpbmcgZXZlbiBpZiBmaWVsZCBoYXMgYmVlbiB2aXNpdGVkIGJlZm9yZSBmb3Igb3RoZXIgdHlwZSBjb25kaXRpb25gLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBmcmFnbWVudCBIZXJvRGV0YWlscyBvbiBDaGFyYWN0ZXIge1xuICAgICAgICAuLi4gb24gSHVtYW4ge1xuICAgICAgICAgIGFwcGVhcnNJblxuICAgICAgICB9XG5cbiAgICAgICAgLi4uIG9uIERyb2lkIHtcbiAgICAgICAgICBuYW1lXG4gICAgICAgICAgYXBwZWFyc0luXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgZnJhZ21lbnRzIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChmcmFnbWVudHNbJ0hlcm9EZXRhaWxzJ10uaW5saW5lRnJhZ21lbnRzWydEcm9pZCddLnR5cGVDb25kaXRpb24udG9TdHJpbmcoKSkudG9FcXVhbCgnRHJvaWQnKTtcbiAgICBleHBlY3QoZnJhZ21lbnRzWydIZXJvRGV0YWlscyddLmlubGluZUZyYWdtZW50c1snRHJvaWQnXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbJ25hbWUnLCAnYXBwZWFyc0luJ10pO1xuICB9KTtcblxuICBpdChgc2hvdWxkIGtlZXAgdHJhY2sgb2YgZnJhZ21lbnRzIHJlZmVyZW5jZWQgaW4gYSBzdWJzZWxlY3Rpb25gLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvQW5kRnJpZW5kcyB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIG5hbWVcbiAgICAgICAgICBmcmllbmRzIHtcbiAgICAgICAgICAgIC4uLkhlcm9EZXRhaWxzXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZyYWdtZW50IEhlcm9EZXRhaWxzIG9uIENoYXJhY3RlciB7XG4gICAgICAgIG5hbWVcbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb0FuZEZyaWVuZHMnXS5mcmFnbWVudHNSZWZlcmVuY2VkKS50b0VxdWFsKFsnSGVyb0RldGFpbHMnXSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQga2VlcCB0cmFjayBvZiBmcmFnbWVudHMgcmVmZXJlbmNlZCBpbiBhIGZyYWdtZW50IHdpdGhpbiBhIHN1YnNlbGVjdGlvbmAsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIHF1ZXJ5IEhlcm9BbmRGcmllbmRzIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgLi4uSGVyb0RldGFpbHNcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmcmFnbWVudCBIZXJvRGV0YWlscyBvbiBDaGFyYWN0ZXIge1xuICAgICAgICBmcmllbmRzIHtcbiAgICAgICAgICAuLi5IZXJvTmFtZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZyYWdtZW50IEhlcm9OYW1lIG9uIENoYXJhY3RlciB7XG4gICAgICAgIG5hbWVcbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb0FuZEZyaWVuZHMnXS5mcmFnbWVudHNSZWZlcmVuY2VkKS50b0VxdWFsKFsnSGVyb0RldGFpbHMnLCAnSGVyb05hbWUnXSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQga2VlcCB0cmFjayBvZiBmcmFnbWVudHMgcmVmZXJlbmNlZCBpbiBhIHN1YnNlbGVjdGlvbiBuZXN0ZWQgaW4gYW4gaW5saW5lIGZyYWdtZW50YCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgcXVlcnkgSGVyb0FuZEZyaWVuZHMge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICBuYW1lXG4gICAgICAgICAgLi4uIG9uIERyb2lkIHtcbiAgICAgICAgICAgIGZyaWVuZHMge1xuICAgICAgICAgICAgICAuLi5IZXJvRGV0YWlsc1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmcmFnbWVudCBIZXJvRGV0YWlscyBvbiBDaGFyYWN0ZXIge1xuICAgICAgICBuYW1lXG4gICAgICB9XG4gICAgYCk7XG5cbiAgICBjb25zdCB7IG9wZXJhdGlvbnMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9BbmRGcmllbmRzJ10uZnJhZ21lbnRzUmVmZXJlbmNlZCkudG9FcXVhbChbJ0hlcm9EZXRhaWxzJ10pO1xuICB9KTtcblxuICBkZXNjcmliZShcIndpdGggbWVyZ2VJbkZpZWxkc0Zyb21GcmFnbWVudFNwcmVhZHMgc2V0IHRvIGZhbHNlXCIsICgpID0+IHtcbiAgICBpdChgc2hvdWxkIG5vdCBtb3JnZSBmaWVsZHMgZnJvbSByZWN1cnNpdmVseSBpbmNsdWRlZCBmcmFnbWVudCBzcHJlYWRzIHdpdGggdHlwZSBjb25kaXRpb25zIHRoYXQgbWF0Y2ggdGhlIHBhcmVudCB0eXBlYCwgKCkgPT4ge1xuICAgICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICAgIHF1ZXJ5IEhlcm8ge1xuICAgICAgICAgIGhlcm8ge1xuICAgICAgICAgICAgaWRcbiAgICAgICAgICAgIC4uLkhlcm9EZXRhaWxzXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnJhZ21lbnQgSGVyb0RldGFpbHMgb24gQ2hhcmFjdGVyIHtcbiAgICAgICAgICBuYW1lXG4gICAgICAgICAgLi4uTW9yZUhlcm9EZXRhaWxzXG4gICAgICAgICAgaWRcbiAgICAgICAgfVxuXG4gICAgICAgIGZyYWdtZW50IE1vcmVIZXJvRGV0YWlscyBvbiBDaGFyYWN0ZXIge1xuICAgICAgICAgIGFwcGVhcnNJblxuICAgICAgICB9XG4gICAgICBgKTtcblxuICAgICAgY29uc3QgeyBvcGVyYXRpb25zLCBmcmFnbWVudHMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQsIHsgbWVyZ2VJbkZpZWxkc0Zyb21GcmFnbWVudFNwcmVhZHM6IGZhbHNlIH0pO1xuXG4gICAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZpZWxkc1swXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAgIC50b0VxdWFsKFsnaWQnXSk7XG5cbiAgICAgIGV4cGVjdChmcmFnbWVudHNbJ0hlcm9EZXRhaWxzJ10uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgICAudG9FcXVhbChbJ25hbWUnLCAnaWQnXSk7XG5cbiAgICAgIGV4cGVjdChmcmFnbWVudHNbJ01vcmVIZXJvRGV0YWlscyddLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgICAgLnRvRXF1YWwoWydhcHBlYXJzSW4nXSk7XG5cbiAgICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZnJhZ21lbnRzUmVmZXJlbmNlZCkudG9FcXVhbChbJ0hlcm9EZXRhaWxzJywgJ01vcmVIZXJvRGV0YWlscyddKTtcbiAgICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmZyYWdtZW50U3ByZWFkcykudG9FcXVhbChbJ0hlcm9EZXRhaWxzJ10pO1xuICAgICAgZXhwZWN0KGZyYWdtZW50c1snSGVyb0RldGFpbHMnXS5mcmFnbWVudFNwcmVhZHMpLnRvRXF1YWwoWydNb3JlSGVyb0RldGFpbHMnXSk7XG4gICAgfSk7XG5cbiAgICBpdChgc2hvdWxkIG5vdCBtZXJnZSBmaWVsZHMgZnJvbSBmcmFnbWVudCBzcHJlYWRzIGZyb20gc3Vic2VsZWN0aW9uc2AsICgpID0+IHtcbiAgICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgICBxdWVyeSBIZXJvQW5kRnJpZW5kcyB7XG4gICAgICAgICAgaGVybyB7XG4gICAgICAgICAgICAuLi5IZXJvRGV0YWlsc1xuICAgICAgICAgICAgYXBwZWFyc0luXG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgZnJpZW5kcyB7XG4gICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgIC4uLkhlcm9EZXRhaWxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnJhZ21lbnQgSGVyb0RldGFpbHMgb24gQ2hhcmFjdGVyIHtcbiAgICAgICAgICBuYW1lXG4gICAgICAgICAgaWRcbiAgICAgICAgfVxuICAgICAgYCk7XG5cbiAgICAgIGNvbnN0IHsgb3BlcmF0aW9ucywgZnJhZ21lbnRzIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50LCB7IG1lcmdlSW5GaWVsZHNGcm9tRnJhZ21lbnRTcHJlYWRzOiBmYWxzZSB9KTtcblxuICAgICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9BbmRGcmllbmRzJ10uZmllbGRzWzBdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgICAgLnRvRXF1YWwoWydhcHBlYXJzSW4nLCAnaWQnLCdmcmllbmRzJ10pO1xuICAgICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9BbmRGcmllbmRzJ10uZmllbGRzWzBdLmZpZWxkc1syXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAgIC50b0VxdWFsKFsnaWQnXSk7XG5cbiAgICAgIGV4cGVjdChmcmFnbWVudHNbJ0hlcm9EZXRhaWxzJ10uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgICAudG9FcXVhbChbJ25hbWUnLCAnaWQnXSk7XG5cbiAgICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvQW5kRnJpZW5kcyddLmZyYWdtZW50c1JlZmVyZW5jZWQpLnRvRXF1YWwoWydIZXJvRGV0YWlscyddKTtcbiAgICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvQW5kRnJpZW5kcyddLmZpZWxkc1swXS5mcmFnbWVudFNwcmVhZHMpLnRvRXF1YWwoWydIZXJvRGV0YWlscyddKTtcbiAgICB9KTtcblxuICAgIGl0KGBzaG91bGQgbm90IG1lcmdlIGZpZWxkcyBmcm9tIGZyYWdtZW50IHNwcmVhZHMgd2l0aCB0eXBlIGNvbmRpdGlvbnNgLCAoKSA9PiB7XG4gICAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgICAgcXVlcnkgSGVybyB7XG4gICAgICAgICAgaGVybyB7XG4gICAgICAgICAgICBuYW1lXG4gICAgICAgICAgICAuLi5Ecm9pZERldGFpbHNcbiAgICAgICAgICAgIC4uLkh1bWFuRGV0YWlsc1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZyYWdtZW50IERyb2lkRGV0YWlscyBvbiBEcm9pZCB7XG4gICAgICAgICAgcHJpbWFyeUZ1bmN0aW9uXG4gICAgICAgIH1cblxuICAgICAgICBmcmFnbWVudCBIdW1hbkRldGFpbHMgb24gSHVtYW4ge1xuICAgICAgICAgIGhlaWdodFxuICAgICAgICB9XG4gICAgICBgKTtcblxuICAgICAgY29uc3QgeyBvcGVyYXRpb25zLCBmcmFnbWVudHMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQsIHsgbWVyZ2VJbkZpZWxkc0Zyb21GcmFnbWVudFNwcmVhZHM6IGZhbHNlIH0pO1xuXG4gICAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZpZWxkc1swXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAgIC50b0VxdWFsKFsnbmFtZSddKTtcblxuICAgICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnQpLnRvQmVVbmRlZmluZWQoKTtcblxuICAgICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5mcmFnbWVudHNSZWZlcmVuY2VkKS50b0VxdWFsKFsnRHJvaWREZXRhaWxzJywgJ0h1bWFuRGV0YWlscyddKTtcbiAgICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmZyYWdtZW50U3ByZWFkcykudG9FcXVhbChbJ0Ryb2lkRGV0YWlscycsICdIdW1hbkRldGFpbHMnXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgaW5jbHVkZSB0aGUgc291cmNlIG9mIG9wZXJhdGlvbnNgLCAoKSA9PiB7XG4gICAgY29uc3Qgc291cmNlID0gc3RyaXBJbmRlbnRgXG4gICAgICBxdWVyeSBIZXJvTmFtZSB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIG5hbWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGBcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKHNvdXJjZSk7XG5cbiAgICBjb25zdCB7IG9wZXJhdGlvbnMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uc291cmNlKS50b0JlKHNvdXJjZSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgaW5jbHVkZSB0aGUgc291cmNlIG9mIGZyYWdtZW50c2AsICgpID0+IHtcbiAgICBjb25zdCBzb3VyY2UgPSBzdHJpcEluZGVudGBcbiAgICAgIGZyYWdtZW50IEhlcm9EZXRhaWxzIG9uIENoYXJhY3RlciB7XG4gICAgICAgIG5hbWVcbiAgICAgIH1cbiAgICBgXG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShzb3VyY2UpO1xuXG4gICAgY29uc3QgeyBmcmFnbWVudHMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KGZyYWdtZW50c1snSGVyb0RldGFpbHMnXS5zb3VyY2UpLnRvQmUoc291cmNlKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBpbmNsdWRlIHRoZSBzb3VyY2Ugb2Ygb3BlcmF0aW9ucyB3aXRoIF9fdHlwZW5hbWUgYWRkZWQgd2hlbiBhZGRUeXBlbmFtZSBpcyB0cnVlYCwgKCkgPT4ge1xuICAgIGNvbnN0IHNvdXJjZSA9IHN0cmlwSW5kZW50YFxuICAgICAgcXVlcnkgSGVyb05hbWUge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICBuYW1lXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgXG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShzb3VyY2UpO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50LCB7IGFkZFR5cGVuYW1lOiB0cnVlIH0pO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uc291cmNlKS50b0JlKHN0cmlwSW5kZW50YFxuICAgICAgcXVlcnkgSGVyb05hbWUge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICBfX3R5cGVuYW1lXG4gICAgICAgICAgbmFtZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYCk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgaW5jbHVkZSB0aGUgc291cmNlIG9mIGZyYWdtZW50cyB3aXRoIF9fdHlwZW5hbWUgYWRkZWQgd2hlbiBhZGRUeXBlbmFtZSBpcyB0cnVlYCwgKCkgPT4ge1xuICAgIGNvbnN0IHNvdXJjZSA9IHN0cmlwSW5kZW50YFxuICAgICAgZnJhZ21lbnQgSGVyb0RldGFpbHMgb24gQ2hhcmFjdGVyIHtcbiAgICAgICAgbmFtZVxuICAgICAgfVxuICAgIGBcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKHNvdXJjZSk7XG5cbiAgICBjb25zdCB7IGZyYWdtZW50cyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCwgeyBhZGRUeXBlbmFtZTogdHJ1ZSB9KTtcblxuICAgIGV4cGVjdChmcmFnbWVudHNbJ0hlcm9EZXRhaWxzJ10uc291cmNlKS50b0JlKHN0cmlwSW5kZW50YFxuICAgICAgZnJhZ21lbnQgSGVyb0RldGFpbHMgb24gQ2hhcmFjdGVyIHtcbiAgICAgICAgX190eXBlbmFtZVxuICAgICAgICBuYW1lXG4gICAgICB9XG4gICAgYCk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgaW5jbHVkZSB0aGUgb3BlcmF0aW9uVHlwZSBmb3IgYSBxdWVyeWAsICgpID0+IHtcbiAgICBjb25zdCBzb3VyY2UgPSBzdHJpcEluZGVudGBcbiAgICAgIHF1ZXJ5IEhlcm9OYW1lIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgbmFtZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYFxuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2Uoc291cmNlKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWUnXS5vcGVyYXRpb25UeXBlKS50b0JlKCdxdWVyeScpO1xuICB9KTtcblxuICBpdChgc2hvdWxkIGluY2x1ZGUgdGhlIG9wZXJhdGlvblR5cGUgZm9yIGEgbXV0YXRpb25gLCAoKSA9PiB7XG4gICAgY29uc3Qgc291cmNlID0gc3RyaXBJbmRlbnRgXG4gICAgICBtdXRhdGlvbiBDcmVhdGVSZXZpZXcge1xuICAgICAgICBjcmVhdGVSZXZpZXcge1xuICAgICAgICAgIHN0YXJzXG4gICAgICAgICAgY29tbWVudGFyeVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYFxuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2Uoc291cmNlKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snQ3JlYXRlUmV2aWV3J10ub3BlcmF0aW9uVHlwZSkudG9CZSgnbXV0YXRpb24nKTtcbiAgfSk7XG59KTtcbiJdfQ==");"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const common_tags_1 = require("common-tags");
const graphql_1 = require("graphql");
const loading_1 = require("../../src/loading");
const legacyIR_1 = require("../../src/compiler/legacyIR");
const serializeToJSON_1 = require("../../src/serializeToJSON");
function withStringifiedTypes(ir) {
  return JSON.parse(serializeToJSON_1.serializeAST(ir));
}
const schema = loading_1.loadSchema(require.resolve('../fixtures/starwars/schema.json'));
describe('Compiling query documents to the legacy IR', () => {
  it(`should include variables defined in operations`, () => {
    const document = graphql_1.parse(`
      query HeroName($episode: Episode) {
        hero(episode: $episode) {
          name
        }
      }

      query Search($text: String!) {
        search(text: $text) {
          ... on Character {
            name
          }
        }
      }

      mutation CreateReviewForEpisode($episode: Episode!, $review: ReviewInput!) {
        createReview(episode: $episode, review: $review) {
          stars
          commentary
        }
      }
    `);
    const { operations } = withStringifiedTypes(legacyIR_1.compileToLegacyIR(schema, document));
    expect(operations['HeroName'].variables).toEqual([
    { name: 'episode', type: 'Episode' }]);

    expect(operations['Search'].variables).toEqual([
    { name: 'text', type: 'String!' }]);

    expect(operations['CreateReviewForEpisode'].variables).toEqual([
    { name: 'episode', type: 'Episode!' },
    { name: 'review', type: 'ReviewInput!' }]);

  });
  it(`should keep track of enums and input object types used in variables`, () => {
    const document = graphql_1.parse(`
      query HeroName($episode: Episode) {
        hero(episode: $episode) {
          name
        }
      }

      query Search($text: String) {
        search(text: $text) {
          ... on Character {
            name
          }
        }
      }

      mutation CreateReviewForEpisode($episode: Episode!, $review: ReviewInput!) {
        createReview(episode: $episode, review: $review) {
          stars
          commentary
        }
      }
    `);
    const { typesUsed } = withStringifiedTypes(legacyIR_1.compileToLegacyIR(schema, document));
    expect(typesUsed).toEqual(['Episode', 'ReviewInput', 'ColorInput']);
  });
  it(`should keep track of enums used in fields`, () => {
    const document = graphql_1.parse(`
      query Hero {
        hero {
          name
          appearsIn
        }

        droid(id: "2001") {
          appearsIn
        }
      }
    `);
    const { typesUsed } = withStringifiedTypes(legacyIR_1.compileToLegacyIR(schema, document));
    expect(typesUsed).toEqual(['Episode']);
  });
  it(`should keep track of types used in fields of input objects`, () => {
    const document = graphql_1.parse(`
      mutation FieldArgumentsWithInputObjects($review: ReviewInput!) {
        createReview(episode: JEDI, review: $review) {
          commentary
        }
      }
      `);
    const { typesUsed } = withStringifiedTypes(legacyIR_1.compileToLegacyIR(schema, document));
    expect(typesUsed).toContain('ReviewInput');
    expect(typesUsed).toContain('ColorInput');
  });
  it(`should include the original field name for an aliased field`, () => {
    const document = graphql_1.parse(`
      query HeroName {
        r2: hero {
          name
        }
        luke: hero(episode: EMPIRE) {
          name
        }
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HeroName'].fields[0].fieldName).toBe("hero");
  });
  it(`should include field arguments`, () => {
    const document = graphql_1.parse(`
      query HeroName {
        hero(episode: EMPIRE) {
          name
        }
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HeroName'].fields[0].args).
    toEqual([{ name: "episode", value: "EMPIRE", type: schema.getType("Episode") }]);
  });
  it(`should include isConditional if a field has skip or include directives with variables`, () => {
    const document = graphql_1.parse(`
      query HeroNameConditionalInclusion($includeName: Boolean!) {
        hero {
          name @include(if: $includeName)
        }
      }

      query HeroNameConditionalExclusion($skipName: Boolean!) {
        hero {
          name @skip(if: $skipName)
        }
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HeroNameConditionalInclusion'].fields[0].fields[0]).toMatchObject({
      fieldName: 'name',
      isConditional: true });

    expect(operations['HeroNameConditionalExclusion'].fields[0].fields[0]).toMatchObject({
      fieldName: 'name',
      isConditional: true });

  });
  it(`should not include isConditional if a field has skip or include directives with a boolean literal that always passes`, () => {
    const document = graphql_1.parse(`
      query HeroNameConditionalInclusion {
        hero {
          name @include(if: true)
        }
      }

      query HeroNameConditionalExclusion {
        hero {
          name @skip(if: false)
        }
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HeroNameConditionalInclusion'].fields[0].fields[0]).toMatchObject({
      fieldName: 'name',
      isConditional: false });

    expect(operations['HeroNameConditionalExclusion'].fields[0].fields[0]).toMatchObject({
      fieldName: 'name',
      isConditional: false });

  });
  it(`should not include field if it has skip or include directives with a boolean literal that always fails`, () => {
    const document = graphql_1.parse(`
      query HeroNameConditionalInclusion {
        hero {
          name @include(if: false)
        }
      }

      query HeroNameConditionalExclusion {
        hero {
          name @skip(if: true)
        }
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HeroNameConditionalInclusion'].fields[0].fields).toHaveLength(0);
    expect(operations['HeroNameConditionalExclusion'].fields[0].fields).toHaveLength(0);
  });
  it(`should include isConditional if a field in inside an inline fragment with skip or include directives with variables`, () => {
    const document = graphql_1.parse(`
      query HeroNameConditionalInclusion($includeName: Boolean!) {
        hero {
          ... @include(if: $includeName) {
            name
          }
        }
      }

      query HeroNameConditionalExclusion($skipName: Boolean!) {
        hero {
          ... @skip(if: $skipName) {
            name
          }
        }
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HeroNameConditionalInclusion'].fields[0].fields[0]).toMatchObject({
      fieldName: 'name',
      isConditional: true });

    expect(operations['HeroNameConditionalExclusion'].fields[0].fields[0]).toMatchObject({
      fieldName: 'name',
      isConditional: true });

  });
  it(`should include isConditional if a field in inside a fragment spread with skip or include directives with variables`, () => {
    const document = graphql_1.parse(`
      query HeroNameConditionalInclusion($includeName: Boolean!) {
        hero {
          ...HeroName @include(if: $includeName)
        }
      }

      query HeroNameConditionalExclusion($skipName: Boolean!) {
        hero {
          ...HeroName @skip(if: $skipName)
        }
      }

      fragment HeroName on Character {
        name
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HeroNameConditionalInclusion'].fields[0].fields[0]).toMatchObject({
      fieldName: 'name',
      isConditional: true });

    expect(operations['HeroNameConditionalExclusion'].fields[0].fields[0]).toMatchObject({
      fieldName: 'name',
      isConditional: true });

    expect(operations['HeroNameConditionalInclusion'].fragmentsReferenced).toEqual(['HeroName']);
    expect(operations['HeroNameConditionalInclusion'].fields[0].fragmentSpreads).toEqual(['HeroName']);
    expect(operations['HeroNameConditionalExclusion'].fragmentsReferenced).toEqual(['HeroName']);
    expect(operations['HeroNameConditionalExclusion'].fields[0].fragmentSpreads).toEqual(['HeroName']);
  });
  it(`should recursively flatten inline fragments with type conditions that match the parent type`, () => {
    const document = graphql_1.parse(`
      query Hero {
        hero {
          id
          ... on Character {
            name
            ... on Character {
              id
              appearsIn
            }
            id
          }
        }
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['Hero'].fields[0].fields.map(field => field.fieldName)).
    toEqual(['id', 'name', 'appearsIn']);
  });
  it(`should recursively include fragment spreads with type conditions that match the parent type`, () => {
    const document = graphql_1.parse(`
      query Hero {
        hero {
          id
          ...HeroDetails
        }
      }

      fragment HeroDetails on Character {
        name
        ...MoreHeroDetails
        id
      }

      fragment MoreHeroDetails on Character {
        appearsIn
      }
    `);
    const { operations, fragments } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['Hero'].fields[0].fields.map(field => field.fieldName)).
    toEqual(['id', 'name', 'appearsIn']);
    expect(fragments['HeroDetails'].fields.map(field => field.fieldName)).
    toEqual(['name', 'appearsIn', 'id']);
    expect(fragments['MoreHeroDetails'].fields.map(field => field.fieldName)).
    toEqual(['appearsIn']);
    expect(operations['Hero'].fragmentsReferenced).toEqual(['HeroDetails', 'MoreHeroDetails']);
    expect(operations['Hero'].fields[0].fragmentSpreads).toEqual(['HeroDetails']);
    expect(fragments['HeroDetails'].fragmentSpreads).toEqual(['MoreHeroDetails']);
  });
  it(`should include fragment spreads from subselections`, () => {
    const document = graphql_1.parse(`
      query HeroAndFriends {
        hero {
          ...HeroDetails
          appearsIn
          id
          friends {
            id
            ...HeroDetails
          }
        }
      }

      fragment HeroDetails on Character {
      	name
        id
      }
    `);
    const { operations, fragments } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HeroAndFriends'].fields[0].fields.map(field => field.fieldName)).
    toEqual(['name', 'id', 'appearsIn', 'friends']);
    expect(operations['HeroAndFriends'].fields[0].fields[3].fields.map(field => field.fieldName)).
    toEqual(['id', 'name']);
    expect(fragments['HeroDetails'].fields.map(field => field.fieldName)).
    toEqual(['name', 'id']);
    expect(operations['HeroAndFriends'].fragmentsReferenced).toEqual(['HeroDetails']);
    expect(operations['HeroAndFriends'].fields[0].fragmentSpreads).toEqual(['HeroDetails']);
  });
  it(`should include type conditions with merged fields for inline fragments`, () => {
    const document = graphql_1.parse(`
      query Hero {
        hero {
          name
          ... on Droid {
            primaryFunction
          }
          ... on Human {
            height
          }
        }
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['Hero'].fields[0].fields.map(field => field.fieldName)).
    toEqual(['name']);
    return;
    expect(operations['Hero'].fields[0].inlineFragments["Droid"].typeCondition.toString()).toEqual('Droid');
    expect(operations['Hero'].fields[0].inlineFragments["Droid"].fields.map(field => field.fieldName)).
    toEqual(['name', 'primaryFunction']);
    expect(operations['Hero'].fields[0].inlineFragments["Human"].typeCondition.toString()).toEqual('Human');
    expect(operations['Hero'].fields[0].inlineFragments["Human"].fields.map(field => field.fieldName)).
    toEqual(['name', 'height']);
  });
  it(`should include fragment spreads with type conditions`, () => {
    const document = graphql_1.parse(`
      query Hero {
        hero {
          name
          ...DroidDetails
          ...HumanDetails
        }
      }

      fragment DroidDetails on Droid {
        primaryFunction
      }

      fragment HumanDetails on Human {
        height
      }
    `);
    const { operations, fragments } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['Hero'].fields[0].fields.map(field => field.fieldName)).
    toEqual(['name']);
    expect(operations['Hero'].fields[0].inlineFragments["Droid"].typeCondition.toString()).toEqual('Droid');
    expect(operations['Hero'].fields[0].inlineFragments["Droid"].fields.map(field => field.fieldName)).
    toEqual(['name', 'primaryFunction']);
    expect(operations['Hero'].fields[0].inlineFragments['Human'].typeCondition.toString()).toEqual('Human');
    expect(operations['Hero'].fields[0].inlineFragments['Human'].fields.map(field => field.fieldName)).
    toEqual(['name', 'height']);
    expect(operations['Hero'].fragmentsReferenced).toEqual(['DroidDetails', 'HumanDetails']);
    expect(operations['Hero'].fields[0].fragmentSpreads).toEqual(['DroidDetails', 'HumanDetails']);
  });
  it(`should not include type conditions for fragment spreads with type conditions that match the parent type`, () => {
    const document = graphql_1.parse(`
      query Hero {
        hero {
          name
          ...HeroDetails
        }
      }

      fragment HeroDetails on Character {
        name
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['Hero'].fields[0].fields.map(field => field.fieldName)).
    toEqual(['name']);
    expect(operations['Hero'].fields[0].inlineFragments).toEqual([]);
  });
  it(`should include type conditions for inline fragments in fragments`, () => {
    const document = graphql_1.parse(`
      query Hero {
        hero {
          ...HeroDetails
        }
      }

      fragment HeroDetails on Character {
        name
        ... on Droid {
          primaryFunction
        }
        ... on Human {
          height
        }
      }
    `);
    const { operations, fragments } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['Hero'].fields[0].fields.map(field => field.fieldName)).
    toEqual(['name']);
    expect(operations['Hero'].fields[0].inlineFragments['Droid'].typeCondition.toString()).toEqual('Droid');
    expect(operations['Hero'].fields[0].inlineFragments['Droid'].fields.map(field => field.fieldName)).
    toEqual(['name', 'primaryFunction']);
    expect(operations['Hero'].fields[0].inlineFragments['Human'].typeCondition.toString()).toEqual('Human');
    expect(operations['Hero'].fields[0].inlineFragments['Human'].fields.map(field => field.fieldName)).
    toEqual(['name', 'height']);
    expect(operations['Hero'].fragmentsReferenced).toEqual(['HeroDetails']);
    expect(operations['Hero'].fields[0].fragmentSpreads).toEqual(['HeroDetails']);
  });
  it(`should inherit type condition when nesting an inline fragment in an inline fragment with a more specific type condition`, () => {
    const document = graphql_1.parse(`
      query HeroName {
        hero {
          ... on Droid {
            ... on Character {
              name
            }
          }
        }
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HeroName'].fields[0].fields.map(field => field.fieldName)).
    toEqual([]);
    expect(operations['HeroName'].fields[0].inlineFragments['Droid'].typeCondition.toString()).toEqual('Droid');
    expect(operations['HeroName'].fields[0].inlineFragments['Droid'].fields.map(field => field.fieldName)).
    toEqual(['name']);
  });
  it(`should not inherit type condition when nesting an inline fragment in an inline fragment with a less specific type condition`, () => {
    const document = graphql_1.parse(`
      query HeroName {
        hero {
          ... on Character {
            ... on Droid {
              name
            }
          }
        }
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HeroName'].fields[0].fields.map(field => field.fieldName)).
    toEqual([]);
    expect(operations['HeroName'].fields[0].inlineFragments['Droid'].typeCondition.toString()).toEqual('Droid');
    expect(operations['HeroName'].fields[0].inlineFragments['Droid'].fields.map(field => field.fieldName)).
    toEqual(['name']);
  });
  it(`should inherit type condition when nesting a fragment spread in an inline fragment with a more specific type condition`, () => {
    const document = graphql_1.parse(`
      query HeroName {
        hero {
          ... on Droid {
            ...CharacterName
          }
        }
      }

      fragment CharacterName on Character {
        name
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HeroName'].fields[0].fields.map(field => field.fieldName)).
    toEqual([]);
    expect(operations['HeroName'].fields[0].inlineFragments["Droid"].typeCondition.toString()).toEqual('Droid');
    expect(operations['HeroName'].fields[0].inlineFragments["Droid"].fields.map(field => field.fieldName)).
    toEqual(['name']);
    expect(operations['HeroName'].fields[0].inlineFragments["Droid"].fragmentSpreads).toEqual(['CharacterName']);
    expect(operations['HeroName'].fragmentsReferenced).toEqual(['CharacterName']);
    expect(operations['HeroName'].fields[0].fragmentSpreads).toEqual([]);
  });
  it(`should not inherit type condition when nesting a fragment spread in an inline fragment with a less specific type condition`, () => {
    const document = graphql_1.parse(`
      query HeroName {
        hero {
          ... on Character {
            ...DroidName
          }
        }
      }

      fragment DroidName on Droid {
        name
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HeroName'].fields[0].fields.map(field => field.fieldName)).
    toEqual([]);
    expect(operations['HeroName'].fields[0].inlineFragments["Droid"].typeCondition.toString()).toEqual('Droid');
    expect(operations['HeroName'].fields[0].inlineFragments["Droid"].fields.map(field => field.fieldName)).
    toEqual(['name']);
    expect(operations['HeroName'].fields[0].inlineFragments["Droid"].fragmentSpreads).toEqual(['DroidName']);
    expect(operations['HeroName'].fragmentsReferenced).toEqual(['DroidName']);
    expect(operations['HeroName'].fields[0].fragmentSpreads).toEqual(['DroidName']);
  });
  it(`should ignore inline fragment when the type condition does not overlap with the currently effective type`, () => {
    const document = graphql_1.parse(`
      fragment CharacterDetails on Character {
        ... on Droid {
          primaryFunction
        }
        ... on Human {
          height
        }
      }

      query HumanAndDroid {
        human(id: "human") {
          ...CharacterDetails
        }
        droid(id: "droid") {
          ...CharacterDetails
        }
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HumanAndDroid'].fields.map(field => field.fieldName)).
    toEqual(['human', 'droid']);
    expect(operations['HumanAndDroid'].fields[0].fields.map(field => field.fieldName)).
    toEqual(['height']);
    expect(operations['HumanAndDroid'].fields[0].inlineFragments).toEqual([]);
    expect(operations['HumanAndDroid'].fields[1].fields.map(field => field.fieldName)).
    toEqual(['primaryFunction']);
    expect(operations['HumanAndDroid'].fields[1].inlineFragments).toEqual([]);
  });
  it(`should ignore fragment spread when the type condition does not overlap with the currently effective type`, () => {
    const document = graphql_1.parse(`
      fragment DroidPrimaryFunction on Droid {
        primaryFunction
      }

      fragment HumanHeight on Human {
        height
      }

      fragment CharacterDetails on Character {
        ...DroidPrimaryFunction
        ...HumanHeight
      }

      query HumanAndDroid {
        human(id: "human") {
          ...CharacterDetails
        }
        droid(id: "droid") {
          ...CharacterDetails
        }
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HumanAndDroid'].fields.map(field => field.fieldName)).
    toEqual(['human', 'droid']);
    expect(operations['HumanAndDroid'].fields[0].fields.map(field => field.fieldName)).
    toEqual(['height']);
    expect(operations['HumanAndDroid'].fields[0].inlineFragments).toEqual([]);
    expect(operations['HumanAndDroid'].fields[1].fields.map(field => field.fieldName)).
    toEqual(['primaryFunction']);
    expect(operations['HumanAndDroid'].fields[1].inlineFragments).toEqual([]);
  });
  it(`should include type conditions for inline fragments on a union type`, () => {
    const document = graphql_1.parse(`
      query Search {
        search(text: "an") {
          ... on Character {
            name
          }
          ... on Droid {
            primaryFunction
          }
          ... on Human {
            height
          }
        }
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['Search'].fields[0].fields.map(field => field.fieldName)).
    toEqual([]);
    expect(operations['Search'].fields[0].inlineFragments["Droid"].typeCondition.toString()).toEqual('Droid');
    expect(operations['Search'].fields[0].inlineFragments["Droid"].fields.map(field => field.fieldName)).
    toEqual(['name', 'primaryFunction']);
    expect(operations['Search'].fields[0].inlineFragments["Human"].typeCondition.toString()).toEqual('Human');
    expect(operations['Search'].fields[0].inlineFragments["Human"].fields.map(field => field.fieldName)).
    toEqual(['name', 'height']);
  });
  it(`should keep correct field ordering even if fragment is visited multiple times`, () => {
    const document = graphql_1.parse(`
      query Hero {
        hero {
          ...HeroName
          appearsIn
          ...HeroName
        }
      }

      fragment HeroName on Character {
        name
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['Hero'].fields[0].fields.map(field => field.fieldName)).
    toEqual(['name', 'appearsIn']);
  });
  it(`should keep correct field ordering even if field has been visited before for other type condition`, () => {
    const document = graphql_1.parse(`
      fragment HeroDetails on Character {
        ... on Human {
          appearsIn
        }

        ... on Droid {
          name
          appearsIn
        }
      }
    `);
    const { fragments } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(fragments['HeroDetails'].inlineFragments['Droid'].typeCondition.toString()).toEqual('Droid');
    expect(fragments['HeroDetails'].inlineFragments['Droid'].fields.map(field => field.fieldName)).
    toEqual(['name', 'appearsIn']);
  });
  it(`should keep track of fragments referenced in a subselection`, () => {
    const document = graphql_1.parse(`
      query HeroAndFriends {
        hero {
          name
          friends {
            ...HeroDetails
          }
        }
      }

      fragment HeroDetails on Character {
        name
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HeroAndFriends'].fragmentsReferenced).toEqual(['HeroDetails']);
  });
  it(`should keep track of fragments referenced in a fragment within a subselection`, () => {
    const document = graphql_1.parse(`
      query HeroAndFriends {
        hero {
          ...HeroDetails
        }
      }

      fragment HeroDetails on Character {
        friends {
          ...HeroName
        }
      }

      fragment HeroName on Character {
        name
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HeroAndFriends'].fragmentsReferenced).toEqual(['HeroDetails', 'HeroName']);
  });
  it(`should keep track of fragments referenced in a subselection nested in an inline fragment`, () => {
    const document = graphql_1.parse(`
      query HeroAndFriends {
        hero {
          name
          ... on Droid {
            friends {
              ...HeroDetails
            }
          }
        }
      }

      fragment HeroDetails on Character {
        name
      }
    `);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HeroAndFriends'].fragmentsReferenced).toEqual(['HeroDetails']);
  });
  describe("with mergeInFieldsFromFragmentSpreads set to false", () => {
    it(`should not morge fields from recursively included fragment spreads with type conditions that match the parent type`, () => {
      const document = graphql_1.parse(`
        query Hero {
          hero {
            id
            ...HeroDetails
          }
        }

        fragment HeroDetails on Character {
          name
          ...MoreHeroDetails
          id
        }

        fragment MoreHeroDetails on Character {
          appearsIn
        }
      `);
      const { operations, fragments } = legacyIR_1.compileToLegacyIR(schema, document, { mergeInFieldsFromFragmentSpreads: false });
      expect(operations['Hero'].fields[0].fields.map(field => field.fieldName)).
      toEqual(['id']);
      expect(fragments['HeroDetails'].fields.map(field => field.fieldName)).
      toEqual(['name', 'id']);
      expect(fragments['MoreHeroDetails'].fields.map(field => field.fieldName)).
      toEqual(['appearsIn']);
      expect(operations['Hero'].fragmentsReferenced).toEqual(['HeroDetails', 'MoreHeroDetails']);
      expect(operations['Hero'].fields[0].fragmentSpreads).toEqual(['HeroDetails']);
      expect(fragments['HeroDetails'].fragmentSpreads).toEqual(['MoreHeroDetails']);
    });
    it(`should not merge fields from fragment spreads from subselections`, () => {
      const document = graphql_1.parse(`
        query HeroAndFriends {
          hero {
            ...HeroDetails
            appearsIn
            id
            friends {
              id
              ...HeroDetails
            }
          }
        }

        fragment HeroDetails on Character {
          name
          id
        }
      `);
      const { operations, fragments } = legacyIR_1.compileToLegacyIR(schema, document, { mergeInFieldsFromFragmentSpreads: false });
      expect(operations['HeroAndFriends'].fields[0].fields.map(field => field.fieldName)).
      toEqual(['appearsIn', 'id', 'friends']);
      expect(operations['HeroAndFriends'].fields[0].fields[2].fields.map(field => field.fieldName)).
      toEqual(['id']);
      expect(fragments['HeroDetails'].fields.map(field => field.fieldName)).
      toEqual(['name', 'id']);
      expect(operations['HeroAndFriends'].fragmentsReferenced).toEqual(['HeroDetails']);
      expect(operations['HeroAndFriends'].fields[0].fragmentSpreads).toEqual(['HeroDetails']);
    });
    it(`should not merge fields from fragment spreads with type conditions`, () => {
      const document = graphql_1.parse(`
        query Hero {
          hero {
            name
            ...DroidDetails
            ...HumanDetails
          }
        }

        fragment DroidDetails on Droid {
          primaryFunction
        }

        fragment HumanDetails on Human {
          height
        }
      `);
      const { operations, fragments } = legacyIR_1.compileToLegacyIR(schema, document, { mergeInFieldsFromFragmentSpreads: false });
      expect(operations['Hero'].fields[0].fields.map(field => field.fieldName)).
      toEqual(['name']);
      expect(operations['Hero'].fields[0].inlineFragment).toBeUndefined();
      expect(operations['Hero'].fragmentsReferenced).toEqual(['DroidDetails', 'HumanDetails']);
      expect(operations['Hero'].fields[0].fragmentSpreads).toEqual(['DroidDetails', 'HumanDetails']);
    });
  });
  it(`should include the source of operations`, () => {
    const source = common_tags_1.stripIndent`
      query HeroName {
        hero {
          name
        }
      }
    `;
    const document = graphql_1.parse(source);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HeroName'].source).toBe(source);
  });
  it(`should include the source of fragments`, () => {
    const source = common_tags_1.stripIndent`
      fragment HeroDetails on Character {
        name
      }
    `;
    const document = graphql_1.parse(source);
    const { fragments } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(fragments['HeroDetails'].source).toBe(source);
  });
  it(`should include the source of operations with __typename added when addTypename is true`, () => {
    const source = common_tags_1.stripIndent`
      query HeroName {
        hero {
          name
        }
      }
    `;
    const document = graphql_1.parse(source);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document, { addTypename: true });
    expect(operations['HeroName'].source).toBe(common_tags_1.stripIndent`
      query HeroName {
        hero {
          __typename
          name
        }
      }
    `);
  });
  it(`should include the source of fragments with __typename added when addTypename is true`, () => {
    const source = common_tags_1.stripIndent`
      fragment HeroDetails on Character {
        name
      }
    `;
    const document = graphql_1.parse(source);
    const { fragments } = legacyIR_1.compileToLegacyIR(schema, document, { addTypename: true });
    expect(fragments['HeroDetails'].source).toBe(common_tags_1.stripIndent`
      fragment HeroDetails on Character {
        __typename
        name
      }
    `);
  });
  it(`should include the operationType for a query`, () => {
    const source = common_tags_1.stripIndent`
      query HeroName {
        hero {
          name
        }
      }
    `;
    const document = graphql_1.parse(source);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['HeroName'].operationType).toBe('query');
  });
  it(`should include the operationType for a mutation`, () => {
    const source = common_tags_1.stripIndent`
      mutation CreateReview {
        createReview {
          stars
          commentary
        }
      }
    `;
    const document = graphql_1.parse(source);
    const { operations } = legacyIR_1.compileToLegacyIR(schema, document);
    expect(operations['CreateReview'].operationType).toBe('mutation');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RDtBQXNCQSxLQUFHLHVGQUFILEVBQTRGLE1BQUs7QUFDL0YsVUFBTSxTQUFTLGNBQUEsV0FBVzs7OztLQUExQjtBQUtBLFVBQU0sV0FBVyxVQUFBLEtBQUEsQ0FBTSxNQUFOLENBQWpCO0FBRUEsVUFBTSxFQUFFLFNBQUYsS0FBZ0IsV0FBQSxpQkFBQSxDQUFrQixNQUFsQixFQUEwQixRQUExQixFQUFvQyxFQUFFLGFBQWEsSUFBZixFQUFwQyxDQUF0QjtBQUVBLFdBQU8sVUFBVSxhQUFWLEVBQXlCLE1BQWhDLEVBQXdDLElBQXhDLENBQTZDLGNBQUEsV0FBVzs7Ozs7S0FBeEQ7QUFNRCxHQWhCRDtBQWtCQSxLQUFHLDhDQUFILEVBQW1ELE1BQUs7QUFDdEQsVUFBTSxTQUFTLGNBQUEsV0FBVzs7Ozs7O0tBQTFCO0FBT0EsVUFBTSxXQUFXLFVBQUEsS0FBQSxDQUFNLE1BQU4sQ0FBakI7QUFFQSxVQUFNLEVBQUUsVUFBRixLQUFpQixXQUFBLGlCQUFBLENBQWtCLE1BQWxCLEVBQTBCLFFBQTFCLENBQXZCO0FBRUEsV0FBTyxXQUFXLFVBQVgsRUFBdUIsYUFBOUIsRUFBNkMsSUFBN0MsQ0FBa0QsT0FBbEQ7QUFDRCxHQWJEO0FBZUEsS0FBRyxpREFBSCxFQUFzRCxNQUFLO0FBQ3pELFVBQU0sU0FBUyxjQUFBLFdBQVc7Ozs7Ozs7S0FBMUI7QUFRQSxVQUFNLFdBQVcsVUFBQSxLQUFBLENBQU0sTUFBTixDQUFqQjtBQUVBLFVBQU0sRUFBRSxVQUFGLEtBQWlCLFdBQUEsaUJBQUEsQ0FBa0IsTUFBbEIsRUFBMEIsUUFBMUIsQ0FBdkI7QUFFQSxXQUFPLFdBQVcsY0FBWCxFQUEyQixhQUFsQyxFQUFpRCxJQUFqRCxDQUFzRCxVQUF0RDtBQUNELEdBZEQ7QUFlRCxDQXgvQkQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdHJpcEluZGVudCB9IGZyb20gJ2NvbW1vbi10YWdzJ1xuXG5pbXBvcnQge1xuICBwYXJzZSxcbiAgaXNUeXBlLFxuICBHcmFwaFFMSUQsXG4gIEdyYXBoUUxTdHJpbmcsXG4gIEdyYXBoUUxMaXN0LFxuICBHcmFwaFFMTm9uTnVsbFxufSBmcm9tICdncmFwaHFsJztcblxuaW1wb3J0IHsgbG9hZFNjaGVtYSB9IGZyb20gJy4uLy4uL3NyYy9sb2FkaW5nJ1xuXG5pbXBvcnQgeyBjb21waWxlVG9MZWdhY3lJUiB9IGZyb20gJy4uLy4uL3NyYy9jb21waWxlci9sZWdhY3lJUidcbmltcG9ydCB7IHNlcmlhbGl6ZUFTVCB9IGZyb20gJy4uLy4uL3NyYy9zZXJpYWxpemVUb0pTT04nXG5cbmZ1bmN0aW9uIHdpdGhTdHJpbmdpZmllZFR5cGVzKGlyKSB7XG4gIHJldHVybiBKU09OLnBhcnNlKHNlcmlhbGl6ZUFTVChpcikpO1xufVxuXG5jb25zdCBzY2hlbWEgPSBsb2FkU2NoZW1hKHJlcXVpcmUucmVzb2x2ZSgnLi4vZml4dHVyZXMvc3RhcndhcnMvc2NoZW1hLmpzb24nKSk7XG5cbmRlc2NyaWJlKCdDb21waWxpbmcgcXVlcnkgZG9jdW1lbnRzIHRvIHRoZSBsZWdhY3kgSVInLCAoKSA9PiB7XG4gIGl0KGBzaG91bGQgaW5jbHVkZSB2YXJpYWJsZXMgZGVmaW5lZCBpbiBvcGVyYXRpb25zYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgcXVlcnkgSGVyb05hbWUoJGVwaXNvZGU6IEVwaXNvZGUpIHtcbiAgICAgICAgaGVybyhlcGlzb2RlOiAkZXBpc29kZSkge1xuICAgICAgICAgIG5hbWVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBxdWVyeSBTZWFyY2goJHRleHQ6IFN0cmluZyEpIHtcbiAgICAgICAgc2VhcmNoKHRleHQ6ICR0ZXh0KSB7XG4gICAgICAgICAgLi4uIG9uIENoYXJhY3RlciB7XG4gICAgICAgICAgICBuYW1lXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG11dGF0aW9uIENyZWF0ZVJldmlld0ZvckVwaXNvZGUoJGVwaXNvZGU6IEVwaXNvZGUhLCAkcmV2aWV3OiBSZXZpZXdJbnB1dCEpIHtcbiAgICAgICAgY3JlYXRlUmV2aWV3KGVwaXNvZGU6ICRlcGlzb2RlLCByZXZpZXc6ICRyZXZpZXcpIHtcbiAgICAgICAgICBzdGFyc1xuICAgICAgICAgIGNvbW1lbnRhcnlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSB3aXRoU3RyaW5naWZpZWRUeXBlcyhjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KSk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWUnXS52YXJpYWJsZXMpLnRvRXF1YWwoXG4gICAgICBbXG4gICAgICAgIHsgbmFtZTogJ2VwaXNvZGUnLCB0eXBlOiAnRXBpc29kZScgfVxuICAgICAgXVxuICAgICk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snU2VhcmNoJ10udmFyaWFibGVzKS50b0VxdWFsKFxuICAgICAgW1xuICAgICAgICB7IG5hbWU6ICd0ZXh0JywgdHlwZTogJ1N0cmluZyEnIH1cbiAgICAgIF1cbiAgICApO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0NyZWF0ZVJldmlld0ZvckVwaXNvZGUnXS52YXJpYWJsZXMpLnRvRXF1YWwoXG4gICAgICBbXG4gICAgICAgIHsgbmFtZTogJ2VwaXNvZGUnLCB0eXBlOiAnRXBpc29kZSEnIH0sXG4gICAgICAgIHsgbmFtZTogJ3JldmlldycsIHR5cGU6ICdSZXZpZXdJbnB1dCEnIH1cbiAgICAgIF1cbiAgICApO1xuICB9KTtcblxuICBpdChgc2hvdWxkIGtlZXAgdHJhY2sgb2YgZW51bXMgYW5kIGlucHV0IG9iamVjdCB0eXBlcyB1c2VkIGluIHZhcmlhYmxlc2AsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIHF1ZXJ5IEhlcm9OYW1lKCRlcGlzb2RlOiBFcGlzb2RlKSB7XG4gICAgICAgIGhlcm8oZXBpc29kZTogJGVwaXNvZGUpIHtcbiAgICAgICAgICBuYW1lXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcXVlcnkgU2VhcmNoKCR0ZXh0OiBTdHJpbmcpIHtcbiAgICAgICAgc2VhcmNoKHRleHQ6ICR0ZXh0KSB7XG4gICAgICAgICAgLi4uIG9uIENoYXJhY3RlciB7XG4gICAgICAgICAgICBuYW1lXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG11dGF0aW9uIENyZWF0ZVJldmlld0ZvckVwaXNvZGUoJGVwaXNvZGU6IEVwaXNvZGUhLCAkcmV2aWV3OiBSZXZpZXdJbnB1dCEpIHtcbiAgICAgICAgY3JlYXRlUmV2aWV3KGVwaXNvZGU6ICRlcGlzb2RlLCByZXZpZXc6ICRyZXZpZXcpIHtcbiAgICAgICAgICBzdGFyc1xuICAgICAgICAgIGNvbW1lbnRhcnlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyB0eXBlc1VzZWQgfSA9IHdpdGhTdHJpbmdpZmllZFR5cGVzKGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpKTtcblxuICAgIGV4cGVjdCh0eXBlc1VzZWQpLnRvRXF1YWwoWydFcGlzb2RlJywgJ1Jldmlld0lucHV0JywgJ0NvbG9ySW5wdXQnXSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQga2VlcCB0cmFjayBvZiBlbnVtcyB1c2VkIGluIGZpZWxkc2AsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIHF1ZXJ5IEhlcm8ge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICBuYW1lXG4gICAgICAgICAgYXBwZWFyc0luXG4gICAgICAgIH1cblxuICAgICAgICBkcm9pZChpZDogXCIyMDAxXCIpIHtcbiAgICAgICAgICBhcHBlYXJzSW5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyB0eXBlc1VzZWQgfSA9IHdpdGhTdHJpbmdpZmllZFR5cGVzKGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpKTtcblxuICAgIGV4cGVjdCh0eXBlc1VzZWQpLnRvRXF1YWwoWydFcGlzb2RlJ10pO1xuICB9KTtcblxuICBpdChgc2hvdWxkIGtlZXAgdHJhY2sgb2YgdHlwZXMgdXNlZCBpbiBmaWVsZHMgb2YgaW5wdXQgb2JqZWN0c2AsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIG11dGF0aW9uIEZpZWxkQXJndW1lbnRzV2l0aElucHV0T2JqZWN0cygkcmV2aWV3OiBSZXZpZXdJbnB1dCEpIHtcbiAgICAgICAgY3JlYXRlUmV2aWV3KGVwaXNvZGU6IEpFREksIHJldmlldzogJHJldmlldykge1xuICAgICAgICAgIGNvbW1lbnRhcnlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYCk7XG5cbiAgICBjb25zdCB7IHR5cGVzVXNlZCB9ID0gd2l0aFN0cmluZ2lmaWVkVHlwZXMoY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCkpO1xuXG4gICAgZXhwZWN0KHR5cGVzVXNlZCkudG9Db250YWluKCdSZXZpZXdJbnB1dCcpO1xuICAgIGV4cGVjdCh0eXBlc1VzZWQpLnRvQ29udGFpbignQ29sb3JJbnB1dCcpO1xuICB9KTtcblxuICBpdChgc2hvdWxkIGluY2x1ZGUgdGhlIG9yaWdpbmFsIGZpZWxkIG5hbWUgZm9yIGFuIGFsaWFzZWQgZmllbGRgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvTmFtZSB7XG4gICAgICAgIHIyOiBoZXJvIHtcbiAgICAgICAgICBuYW1lXG4gICAgICAgIH1cbiAgICAgICAgbHVrZTogaGVybyhlcGlzb2RlOiBFTVBJUkUpIHtcbiAgICAgICAgICBuYW1lXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWUnXS5maWVsZHNbMF0uZmllbGROYW1lKS50b0JlKFwiaGVyb1wiKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBpbmNsdWRlIGZpZWxkIGFyZ3VtZW50c2AsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIHF1ZXJ5IEhlcm9OYW1lIHtcbiAgICAgICAgaGVybyhlcGlzb2RlOiBFTVBJUkUpIHtcbiAgICAgICAgICBuYW1lXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWUnXS5maWVsZHNbMF0uYXJncylcbiAgICAgIC50b0VxdWFsKFt7IG5hbWU6IFwiZXBpc29kZVwiLCB2YWx1ZTogXCJFTVBJUkVcIiwgdHlwZTogc2NoZW1hLmdldFR5cGUoXCJFcGlzb2RlXCIpIH1dKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBpbmNsdWRlIGlzQ29uZGl0aW9uYWwgaWYgYSBmaWVsZCBoYXMgc2tpcCBvciBpbmNsdWRlIGRpcmVjdGl2ZXMgd2l0aCB2YXJpYWJsZXNgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvTmFtZUNvbmRpdGlvbmFsSW5jbHVzaW9uKCRpbmNsdWRlTmFtZTogQm9vbGVhbiEpIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgbmFtZSBAaW5jbHVkZShpZjogJGluY2x1ZGVOYW1lKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHF1ZXJ5IEhlcm9OYW1lQ29uZGl0aW9uYWxFeGNsdXNpb24oJHNraXBOYW1lOiBCb29sZWFuISkge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICBuYW1lIEBza2lwKGlmOiAkc2tpcE5hbWUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWVDb25kaXRpb25hbEluY2x1c2lvbiddLmZpZWxkc1swXS5maWVsZHNbMF0pLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgZmllbGROYW1lOiAnbmFtZScsXG4gICAgICBpc0NvbmRpdGlvbmFsOiB0cnVlXG4gICAgfSk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWVDb25kaXRpb25hbEV4Y2x1c2lvbiddLmZpZWxkc1swXS5maWVsZHNbMF0pLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgZmllbGROYW1lOiAnbmFtZScsXG4gICAgICBpc0NvbmRpdGlvbmFsOiB0cnVlXG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgbm90IGluY2x1ZGUgaXNDb25kaXRpb25hbCBpZiBhIGZpZWxkIGhhcyBza2lwIG9yIGluY2x1ZGUgZGlyZWN0aXZlcyB3aXRoIGEgYm9vbGVhbiBsaXRlcmFsIHRoYXQgYWx3YXlzIHBhc3Nlc2AsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIHF1ZXJ5IEhlcm9OYW1lQ29uZGl0aW9uYWxJbmNsdXNpb24ge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICBuYW1lIEBpbmNsdWRlKGlmOiB0cnVlKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHF1ZXJ5IEhlcm9OYW1lQ29uZGl0aW9uYWxFeGNsdXNpb24ge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICBuYW1lIEBza2lwKGlmOiBmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZUNvbmRpdGlvbmFsSW5jbHVzaW9uJ10uZmllbGRzWzBdLmZpZWxkc1swXSkudG9NYXRjaE9iamVjdCh7XG4gICAgICBmaWVsZE5hbWU6ICduYW1lJyxcbiAgICAgIGlzQ29uZGl0aW9uYWw6IGZhbHNlXG4gICAgfSk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWVDb25kaXRpb25hbEV4Y2x1c2lvbiddLmZpZWxkc1swXS5maWVsZHNbMF0pLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgZmllbGROYW1lOiAnbmFtZScsXG4gICAgICBpc0NvbmRpdGlvbmFsOiBmYWxzZVxuICAgIH0pO1xuICB9KTtcblxuICBpdChgc2hvdWxkIG5vdCBpbmNsdWRlIGZpZWxkIGlmIGl0IGhhcyBza2lwIG9yIGluY2x1ZGUgZGlyZWN0aXZlcyB3aXRoIGEgYm9vbGVhbiBsaXRlcmFsIHRoYXQgYWx3YXlzIGZhaWxzYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgcXVlcnkgSGVyb05hbWVDb25kaXRpb25hbEluY2x1c2lvbiB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIG5hbWUgQGluY2x1ZGUoaWY6IGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHF1ZXJ5IEhlcm9OYW1lQ29uZGl0aW9uYWxFeGNsdXNpb24ge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICBuYW1lIEBza2lwKGlmOiB0cnVlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYCk7XG5cbiAgICBjb25zdCB7IG9wZXJhdGlvbnMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lQ29uZGl0aW9uYWxJbmNsdXNpb24nXS5maWVsZHNbMF0uZmllbGRzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lQ29uZGl0aW9uYWxFeGNsdXNpb24nXS5maWVsZHNbMF0uZmllbGRzKS50b0hhdmVMZW5ndGgoMCk7XG4gIH0pO1xuXG4gICAgaXQoYHNob3VsZCBpbmNsdWRlIGlzQ29uZGl0aW9uYWwgaWYgYSBmaWVsZCBpbiBpbnNpZGUgYW4gaW5saW5lIGZyYWdtZW50IHdpdGggc2tpcCBvciBpbmNsdWRlIGRpcmVjdGl2ZXMgd2l0aCB2YXJpYWJsZXNgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvTmFtZUNvbmRpdGlvbmFsSW5jbHVzaW9uKCRpbmNsdWRlTmFtZTogQm9vbGVhbiEpIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgLi4uIEBpbmNsdWRlKGlmOiAkaW5jbHVkZU5hbWUpIHtcbiAgICAgICAgICAgIG5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcXVlcnkgSGVyb05hbWVDb25kaXRpb25hbEV4Y2x1c2lvbigkc2tpcE5hbWU6IEJvb2xlYW4hKSB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIC4uLiBAc2tpcChpZjogJHNraXBOYW1lKSB7XG4gICAgICAgICAgICBuYW1lXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYCk7XG5cbiAgICBjb25zdCB7IG9wZXJhdGlvbnMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lQ29uZGl0aW9uYWxJbmNsdXNpb24nXS5maWVsZHNbMF0uZmllbGRzWzBdKS50b01hdGNoT2JqZWN0KHtcbiAgICAgIGZpZWxkTmFtZTogJ25hbWUnLFxuICAgICAgaXNDb25kaXRpb25hbDogdHJ1ZVxuICAgIH0pO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lQ29uZGl0aW9uYWxFeGNsdXNpb24nXS5maWVsZHNbMF0uZmllbGRzWzBdKS50b01hdGNoT2JqZWN0KHtcbiAgICAgIGZpZWxkTmFtZTogJ25hbWUnLFxuICAgICAgaXNDb25kaXRpb25hbDogdHJ1ZVxuICAgIH0pO1xuICB9KTtcblxuICBpdChgc2hvdWxkIGluY2x1ZGUgaXNDb25kaXRpb25hbCBpZiBhIGZpZWxkIGluIGluc2lkZSBhIGZyYWdtZW50IHNwcmVhZCB3aXRoIHNraXAgb3IgaW5jbHVkZSBkaXJlY3RpdmVzIHdpdGggdmFyaWFibGVzYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgcXVlcnkgSGVyb05hbWVDb25kaXRpb25hbEluY2x1c2lvbigkaW5jbHVkZU5hbWU6IEJvb2xlYW4hKSB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIC4uLkhlcm9OYW1lIEBpbmNsdWRlKGlmOiAkaW5jbHVkZU5hbWUpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcXVlcnkgSGVyb05hbWVDb25kaXRpb25hbEV4Y2x1c2lvbigkc2tpcE5hbWU6IEJvb2xlYW4hKSB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIC4uLkhlcm9OYW1lIEBza2lwKGlmOiAkc2tpcE5hbWUpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnJhZ21lbnQgSGVyb05hbWUgb24gQ2hhcmFjdGVyIHtcbiAgICAgICAgbmFtZVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZUNvbmRpdGlvbmFsSW5jbHVzaW9uJ10uZmllbGRzWzBdLmZpZWxkc1swXSkudG9NYXRjaE9iamVjdCh7XG4gICAgICBmaWVsZE5hbWU6ICduYW1lJyxcbiAgICAgIGlzQ29uZGl0aW9uYWw6IHRydWVcbiAgICB9KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZUNvbmRpdGlvbmFsRXhjbHVzaW9uJ10uZmllbGRzWzBdLmZpZWxkc1swXSkudG9NYXRjaE9iamVjdCh7XG4gICAgICBmaWVsZE5hbWU6ICduYW1lJyxcbiAgICAgIGlzQ29uZGl0aW9uYWw6IHRydWVcbiAgICB9KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZUNvbmRpdGlvbmFsSW5jbHVzaW9uJ10uZnJhZ21lbnRzUmVmZXJlbmNlZCkudG9FcXVhbChbJ0hlcm9OYW1lJ10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZUNvbmRpdGlvbmFsSW5jbHVzaW9uJ10uZmllbGRzWzBdLmZyYWdtZW50U3ByZWFkcykudG9FcXVhbChbJ0hlcm9OYW1lJ10pO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lQ29uZGl0aW9uYWxFeGNsdXNpb24nXS5mcmFnbWVudHNSZWZlcmVuY2VkKS50b0VxdWFsKFsnSGVyb05hbWUnXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lQ29uZGl0aW9uYWxFeGNsdXNpb24nXS5maWVsZHNbMF0uZnJhZ21lbnRTcHJlYWRzKS50b0VxdWFsKFsnSGVyb05hbWUnXSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgcmVjdXJzaXZlbHkgZmxhdHRlbiBpbmxpbmUgZnJhZ21lbnRzIHdpdGggdHlwZSBjb25kaXRpb25zIHRoYXQgbWF0Y2ggdGhlIHBhcmVudCB0eXBlYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgcXVlcnkgSGVybyB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIGlkXG4gICAgICAgICAgLi4uIG9uIENoYXJhY3RlciB7XG4gICAgICAgICAgICBuYW1lXG4gICAgICAgICAgICAuLi4gb24gQ2hhcmFjdGVyIHtcbiAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgYXBwZWFyc0luXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgIC50b0VxdWFsKFsnaWQnLCAnbmFtZScsICdhcHBlYXJzSW4nXSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgcmVjdXJzaXZlbHkgaW5jbHVkZSBmcmFnbWVudCBzcHJlYWRzIHdpdGggdHlwZSBjb25kaXRpb25zIHRoYXQgbWF0Y2ggdGhlIHBhcmVudCB0eXBlYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgcXVlcnkgSGVybyB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIGlkXG4gICAgICAgICAgLi4uSGVyb0RldGFpbHNcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmcmFnbWVudCBIZXJvRGV0YWlscyBvbiBDaGFyYWN0ZXIge1xuICAgICAgICBuYW1lXG4gICAgICAgIC4uLk1vcmVIZXJvRGV0YWlsc1xuICAgICAgICBpZFxuICAgICAgfVxuXG4gICAgICBmcmFnbWVudCBNb3JlSGVyb0RldGFpbHMgb24gQ2hhcmFjdGVyIHtcbiAgICAgICAgYXBwZWFyc0luXG4gICAgICB9XG4gICAgYCk7XG5cbiAgICBjb25zdCB7IG9wZXJhdGlvbnMsIGZyYWdtZW50cyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZpZWxkc1swXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbJ2lkJywgJ25hbWUnLCAnYXBwZWFyc0luJ10pO1xuXG4gICAgZXhwZWN0KGZyYWdtZW50c1snSGVyb0RldGFpbHMnXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbJ25hbWUnLCAnYXBwZWFyc0luJywgJ2lkJ10pO1xuXG4gICAgZXhwZWN0KGZyYWdtZW50c1snTW9yZUhlcm9EZXRhaWxzJ10uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoWydhcHBlYXJzSW4nXSk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZyYWdtZW50c1JlZmVyZW5jZWQpLnRvRXF1YWwoWydIZXJvRGV0YWlscycsICdNb3JlSGVyb0RldGFpbHMnXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uZnJhZ21lbnRTcHJlYWRzKS50b0VxdWFsKFsnSGVyb0RldGFpbHMnXSk7XG4gICAgZXhwZWN0KGZyYWdtZW50c1snSGVyb0RldGFpbHMnXS5mcmFnbWVudFNwcmVhZHMpLnRvRXF1YWwoWydNb3JlSGVyb0RldGFpbHMnXSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgaW5jbHVkZSBmcmFnbWVudCBzcHJlYWRzIGZyb20gc3Vic2VsZWN0aW9uc2AsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIHF1ZXJ5IEhlcm9BbmRGcmllbmRzIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgLi4uSGVyb0RldGFpbHNcbiAgICAgICAgICBhcHBlYXJzSW5cbiAgICAgICAgICBpZFxuICAgICAgICAgIGZyaWVuZHMge1xuICAgICAgICAgICAgaWRcbiAgICAgICAgICAgIC4uLkhlcm9EZXRhaWxzXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZyYWdtZW50IEhlcm9EZXRhaWxzIG9uIENoYXJhY3RlciB7XG4gICAgICBcdG5hbWVcbiAgICAgICAgaWRcbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucywgZnJhZ21lbnRzIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvQW5kRnJpZW5kcyddLmZpZWxkc1swXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbJ25hbWUnLCAnaWQnLCAnYXBwZWFyc0luJywgJ2ZyaWVuZHMnXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9BbmRGcmllbmRzJ10uZmllbGRzWzBdLmZpZWxkc1szXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbJ2lkJywgJ25hbWUnXSk7XG5cbiAgICBleHBlY3QoZnJhZ21lbnRzWydIZXJvRGV0YWlscyddLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgIC50b0VxdWFsKFsnbmFtZScsICdpZCddKTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvQW5kRnJpZW5kcyddLmZyYWdtZW50c1JlZmVyZW5jZWQpLnRvRXF1YWwoWydIZXJvRGV0YWlscyddKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb0FuZEZyaWVuZHMnXS5maWVsZHNbMF0uZnJhZ21lbnRTcHJlYWRzKS50b0VxdWFsKFsnSGVyb0RldGFpbHMnXSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgaW5jbHVkZSB0eXBlIGNvbmRpdGlvbnMgd2l0aCBtZXJnZWQgZmllbGRzIGZvciBpbmxpbmUgZnJhZ21lbnRzYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgcXVlcnkgSGVybyB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIG5hbWVcbiAgICAgICAgICAuLi4gb24gRHJvaWQge1xuICAgICAgICAgICAgcHJpbWFyeUZ1bmN0aW9uXG4gICAgICAgICAgfVxuICAgICAgICAgIC4uLiBvbiBIdW1hbiB7XG4gICAgICAgICAgICBoZWlnaHRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZpZWxkc1swXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbJ25hbWUnXSk7XG5cbiAgICAgIHJldHVybjtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50c1tcIkRyb2lkXCJdLnR5cGVDb25kaXRpb24udG9TdHJpbmcoKSkudG9FcXVhbCgnRHJvaWQnKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudHNbXCJEcm9pZFwiXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAgIC50b0VxdWFsKFsnbmFtZScsICdwcmltYXJ5RnVuY3Rpb24nXSk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudHNbXCJIdW1hblwiXS50eXBlQ29uZGl0aW9uLnRvU3RyaW5nKCkpLnRvRXF1YWwoJ0h1bWFuJyk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzW1wiSHVtYW5cIl0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgICAudG9FcXVhbChbJ25hbWUnLCAnaGVpZ2h0J10pO1xuICB9KTtcblxuICBpdChgc2hvdWxkIGluY2x1ZGUgZnJhZ21lbnQgc3ByZWFkcyB3aXRoIHR5cGUgY29uZGl0aW9uc2AsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIHF1ZXJ5IEhlcm8ge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICBuYW1lXG4gICAgICAgICAgLi4uRHJvaWREZXRhaWxzXG4gICAgICAgICAgLi4uSHVtYW5EZXRhaWxzXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnJhZ21lbnQgRHJvaWREZXRhaWxzIG9uIERyb2lkIHtcbiAgICAgICAgcHJpbWFyeUZ1bmN0aW9uXG4gICAgICB9XG5cbiAgICAgIGZyYWdtZW50IEh1bWFuRGV0YWlscyBvbiBIdW1hbiB7XG4gICAgICAgIGhlaWdodFxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zLCBmcmFnbWVudHMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoWyduYW1lJ10pO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzW1wiRHJvaWRcIl0udHlwZUNvbmRpdGlvbi50b1N0cmluZygpKS50b0VxdWFsKCdEcm9pZCcpO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50c1tcIkRyb2lkXCJdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgICAgLnRvRXF1YWwoWyduYW1lJywgJ3ByaW1hcnlGdW5jdGlvbiddKTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50c1snSHVtYW4nXS50eXBlQ29uZGl0aW9uLnRvU3RyaW5nKCkpLnRvRXF1YWwoJ0h1bWFuJyk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzWydIdW1hbiddLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgICAgLnRvRXF1YWwoWyduYW1lJywgJ2hlaWdodCddKTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZnJhZ21lbnRzUmVmZXJlbmNlZCkudG9FcXVhbChbJ0Ryb2lkRGV0YWlscycsICdIdW1hbkRldGFpbHMnXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uZnJhZ21lbnRTcHJlYWRzKS50b0VxdWFsKFsnRHJvaWREZXRhaWxzJywgJ0h1bWFuRGV0YWlscyddKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBub3QgaW5jbHVkZSB0eXBlIGNvbmRpdGlvbnMgZm9yIGZyYWdtZW50IHNwcmVhZHMgd2l0aCB0eXBlIGNvbmRpdGlvbnMgdGhhdCBtYXRjaCB0aGUgcGFyZW50IHR5cGVgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgbmFtZVxuICAgICAgICAgIC4uLkhlcm9EZXRhaWxzXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnJhZ21lbnQgSGVyb0RldGFpbHMgb24gQ2hhcmFjdGVyIHtcbiAgICAgICAgbmFtZVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAudG9FcXVhbChbJ25hbWUnXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzKS50b0VxdWFsKFtdKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBpbmNsdWRlIHR5cGUgY29uZGl0aW9ucyBmb3IgaW5saW5lIGZyYWdtZW50cyBpbiBmcmFnbWVudHNgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgLi4uSGVyb0RldGFpbHNcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmcmFnbWVudCBIZXJvRGV0YWlscyBvbiBDaGFyYWN0ZXIge1xuICAgICAgICBuYW1lXG4gICAgICAgIC4uLiBvbiBEcm9pZCB7XG4gICAgICAgICAgcHJpbWFyeUZ1bmN0aW9uXG4gICAgICAgIH1cbiAgICAgICAgLi4uIG9uIEh1bWFuIHtcbiAgICAgICAgICBoZWlnaHRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zLCBmcmFnbWVudHMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoWyduYW1lJ10pO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzWydEcm9pZCddLnR5cGVDb25kaXRpb24udG9TdHJpbmcoKSkudG9FcXVhbCgnRHJvaWQnKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudHNbJ0Ryb2lkJ10uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgICAudG9FcXVhbChbJ25hbWUnLCAncHJpbWFyeUZ1bmN0aW9uJ10pO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzWydIdW1hbiddLnR5cGVDb25kaXRpb24udG9TdHJpbmcoKSkudG9FcXVhbCgnSHVtYW4nKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudHNbJ0h1bWFuJ10uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgICAudG9FcXVhbChbJ25hbWUnLCAnaGVpZ2h0J10pO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5mcmFnbWVudHNSZWZlcmVuY2VkKS50b0VxdWFsKFsnSGVyb0RldGFpbHMnXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uZnJhZ21lbnRTcHJlYWRzKS50b0VxdWFsKFsnSGVyb0RldGFpbHMnXSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgaW5oZXJpdCB0eXBlIGNvbmRpdGlvbiB3aGVuIG5lc3RpbmcgYW4gaW5saW5lIGZyYWdtZW50IGluIGFuIGlubGluZSBmcmFnbWVudCB3aXRoIGEgbW9yZSBzcGVjaWZpYyB0eXBlIGNvbmRpdGlvbmAsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIHF1ZXJ5IEhlcm9OYW1lIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgLi4uIG9uIERyb2lkIHtcbiAgICAgICAgICAgIC4uLiBvbiBDaGFyYWN0ZXIge1xuICAgICAgICAgICAgICBuYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYCk7XG5cbiAgICBjb25zdCB7IG9wZXJhdGlvbnMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uZmllbGRzWzBdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgIC50b0VxdWFsKFtdKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWUnXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzWydEcm9pZCddLnR5cGVDb25kaXRpb24udG9TdHJpbmcoKSkudG9FcXVhbCgnRHJvaWQnKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWUnXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzWydEcm9pZCddLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgIC50b0VxdWFsKFsnbmFtZSddKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBub3QgaW5oZXJpdCB0eXBlIGNvbmRpdGlvbiB3aGVuIG5lc3RpbmcgYW4gaW5saW5lIGZyYWdtZW50IGluIGFuIGlubGluZSBmcmFnbWVudCB3aXRoIGEgbGVzcyBzcGVjaWZpYyB0eXBlIGNvbmRpdGlvbmAsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIHF1ZXJ5IEhlcm9OYW1lIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgLi4uIG9uIENoYXJhY3RlciB7XG4gICAgICAgICAgICAuLi4gb24gRHJvaWQge1xuICAgICAgICAgICAgICBuYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYCk7XG5cbiAgICBjb25zdCB7IG9wZXJhdGlvbnMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uZmllbGRzWzBdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgIC50b0VxdWFsKFtdKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWUnXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzWydEcm9pZCddLnR5cGVDb25kaXRpb24udG9TdHJpbmcoKSkudG9FcXVhbCgnRHJvaWQnKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWUnXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzWydEcm9pZCddLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgIC50b0VxdWFsKFsnbmFtZSddKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBpbmhlcml0IHR5cGUgY29uZGl0aW9uIHdoZW4gbmVzdGluZyBhIGZyYWdtZW50IHNwcmVhZCBpbiBhbiBpbmxpbmUgZnJhZ21lbnQgd2l0aCBhIG1vcmUgc3BlY2lmaWMgdHlwZSBjb25kaXRpb25gLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvTmFtZSB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIC4uLiBvbiBEcm9pZCB7XG4gICAgICAgICAgICAuLi5DaGFyYWN0ZXJOYW1lXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZyYWdtZW50IENoYXJhY3Rlck5hbWUgb24gQ2hhcmFjdGVyIHtcbiAgICAgICAgbmFtZVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZSddLmZpZWxkc1swXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50c1tcIkRyb2lkXCJdLnR5cGVDb25kaXRpb24udG9TdHJpbmcoKSkudG9FcXVhbCgnRHJvaWQnKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWUnXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzW1wiRHJvaWRcIl0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoWyduYW1lJ10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZSddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudHNbXCJEcm9pZFwiXS5mcmFnbWVudFNwcmVhZHMpLnRvRXF1YWwoWydDaGFyYWN0ZXJOYW1lJ10pO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uZnJhZ21lbnRzUmVmZXJlbmNlZCkudG9FcXVhbChbJ0NoYXJhY3Rlck5hbWUnXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uZmllbGRzWzBdLmZyYWdtZW50U3ByZWFkcykudG9FcXVhbChbXSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgbm90IGluaGVyaXQgdHlwZSBjb25kaXRpb24gd2hlbiBuZXN0aW5nIGEgZnJhZ21lbnQgc3ByZWFkIGluIGFuIGlubGluZSBmcmFnbWVudCB3aXRoIGEgbGVzcyBzcGVjaWZpYyB0eXBlIGNvbmRpdGlvbmAsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIHF1ZXJ5IEhlcm9OYW1lIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgLi4uIG9uIENoYXJhY3RlciB7XG4gICAgICAgICAgICAuLi5Ecm9pZE5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnJhZ21lbnQgRHJvaWROYW1lIG9uIERyb2lkIHtcbiAgICAgICAgbmFtZVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZSddLmZpZWxkc1swXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50c1tcIkRyb2lkXCJdLnR5cGVDb25kaXRpb24udG9TdHJpbmcoKSkudG9FcXVhbCgnRHJvaWQnKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWUnXS5maWVsZHNbMF0uaW5saW5lRnJhZ21lbnRzW1wiRHJvaWRcIl0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoWyduYW1lJ10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZSddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudHNbXCJEcm9pZFwiXS5mcmFnbWVudFNwcmVhZHMpLnRvRXF1YWwoWydEcm9pZE5hbWUnXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9OYW1lJ10uZnJhZ21lbnRzUmVmZXJlbmNlZCkudG9FcXVhbChbJ0Ryb2lkTmFtZSddKTtcbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWUnXS5maWVsZHNbMF0uZnJhZ21lbnRTcHJlYWRzKS50b0VxdWFsKFsnRHJvaWROYW1lJ10pO1xuICB9KTtcblxuICBpdChgc2hvdWxkIGlnbm9yZSBpbmxpbmUgZnJhZ21lbnQgd2hlbiB0aGUgdHlwZSBjb25kaXRpb24gZG9lcyBub3Qgb3ZlcmxhcCB3aXRoIHRoZSBjdXJyZW50bHkgZWZmZWN0aXZlIHR5cGVgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBmcmFnbWVudCBDaGFyYWN0ZXJEZXRhaWxzIG9uIENoYXJhY3RlciB7XG4gICAgICAgIC4uLiBvbiBEcm9pZCB7XG4gICAgICAgICAgcHJpbWFyeUZ1bmN0aW9uXG4gICAgICAgIH1cbiAgICAgICAgLi4uIG9uIEh1bWFuIHtcbiAgICAgICAgICBoZWlnaHRcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBxdWVyeSBIdW1hbkFuZERyb2lkIHtcbiAgICAgICAgaHVtYW4oaWQ6IFwiaHVtYW5cIikge1xuICAgICAgICAgIC4uLkNoYXJhY3RlckRldGFpbHNcbiAgICAgICAgfVxuICAgICAgICBkcm9pZChpZDogXCJkcm9pZFwiKSB7XG4gICAgICAgICAgLi4uQ2hhcmFjdGVyRGV0YWlsc1xuICAgICAgICB9XG4gICAgICB9XG4gICAgYCk7XG5cbiAgICBjb25zdCB7IG9wZXJhdGlvbnMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0h1bWFuQW5kRHJvaWQnXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbJ2h1bWFuJywgJ2Ryb2lkJ10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIdW1hbkFuZERyb2lkJ10uZmllbGRzWzBdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgIC50b0VxdWFsKFsnaGVpZ2h0J10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIdW1hbkFuZERyb2lkJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50cykudG9FcXVhbChbXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0h1bWFuQW5kRHJvaWQnXS5maWVsZHNbMV0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoWydwcmltYXJ5RnVuY3Rpb24nXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0h1bWFuQW5kRHJvaWQnXS5maWVsZHNbMV0uaW5saW5lRnJhZ21lbnRzKS50b0VxdWFsKFtdKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBpZ25vcmUgZnJhZ21lbnQgc3ByZWFkIHdoZW4gdGhlIHR5cGUgY29uZGl0aW9uIGRvZXMgbm90IG92ZXJsYXAgd2l0aCB0aGUgY3VycmVudGx5IGVmZmVjdGl2ZSB0eXBlYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgZnJhZ21lbnQgRHJvaWRQcmltYXJ5RnVuY3Rpb24gb24gRHJvaWQge1xuICAgICAgICBwcmltYXJ5RnVuY3Rpb25cbiAgICAgIH1cblxuICAgICAgZnJhZ21lbnQgSHVtYW5IZWlnaHQgb24gSHVtYW4ge1xuICAgICAgICBoZWlnaHRcbiAgICAgIH1cblxuICAgICAgZnJhZ21lbnQgQ2hhcmFjdGVyRGV0YWlscyBvbiBDaGFyYWN0ZXIge1xuICAgICAgICAuLi5Ecm9pZFByaW1hcnlGdW5jdGlvblxuICAgICAgICAuLi5IdW1hbkhlaWdodFxuICAgICAgfVxuXG4gICAgICBxdWVyeSBIdW1hbkFuZERyb2lkIHtcbiAgICAgICAgaHVtYW4oaWQ6IFwiaHVtYW5cIikge1xuICAgICAgICAgIC4uLkNoYXJhY3RlckRldGFpbHNcbiAgICAgICAgfVxuICAgICAgICBkcm9pZChpZDogXCJkcm9pZFwiKSB7XG4gICAgICAgICAgLi4uQ2hhcmFjdGVyRGV0YWlsc1xuICAgICAgICB9XG4gICAgICB9XG4gICAgYCk7XG5cbiAgICBjb25zdCB7IG9wZXJhdGlvbnMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0h1bWFuQW5kRHJvaWQnXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbJ2h1bWFuJywgJ2Ryb2lkJ10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIdW1hbkFuZERyb2lkJ10uZmllbGRzWzBdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgIC50b0VxdWFsKFsnaGVpZ2h0J10pO1xuICAgIGV4cGVjdChvcGVyYXRpb25zWydIdW1hbkFuZERyb2lkJ10uZmllbGRzWzBdLmlubGluZUZyYWdtZW50cykudG9FcXVhbChbXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0h1bWFuQW5kRHJvaWQnXS5maWVsZHNbMV0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoWydwcmltYXJ5RnVuY3Rpb24nXSk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0h1bWFuQW5kRHJvaWQnXS5maWVsZHNbMV0uaW5saW5lRnJhZ21lbnRzKS50b0VxdWFsKFtdKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBpbmNsdWRlIHR5cGUgY29uZGl0aW9ucyBmb3IgaW5saW5lIGZyYWdtZW50cyBvbiBhIHVuaW9uIHR5cGVgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBTZWFyY2gge1xuICAgICAgICBzZWFyY2godGV4dDogXCJhblwiKSB7XG4gICAgICAgICAgLi4uIG9uIENoYXJhY3RlciB7XG4gICAgICAgICAgICBuYW1lXG4gICAgICAgICAgfVxuICAgICAgICAgIC4uLiBvbiBEcm9pZCB7XG4gICAgICAgICAgICBwcmltYXJ5RnVuY3Rpb25cbiAgICAgICAgICB9XG4gICAgICAgICAgLi4uIG9uIEh1bWFuIHtcbiAgICAgICAgICAgIGhlaWdodFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydTZWFyY2gnXS5maWVsZHNbMF0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgLnRvRXF1YWwoW10pO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ1NlYXJjaCddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudHNbXCJEcm9pZFwiXS50eXBlQ29uZGl0aW9uLnRvU3RyaW5nKCkpLnRvRXF1YWwoJ0Ryb2lkJyk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ1NlYXJjaCddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudHNbXCJEcm9pZFwiXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbJ25hbWUnLCAncHJpbWFyeUZ1bmN0aW9uJ10pO1xuXG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ1NlYXJjaCddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudHNbXCJIdW1hblwiXS50eXBlQ29uZGl0aW9uLnRvU3RyaW5nKCkpLnRvRXF1YWwoJ0h1bWFuJyk7XG4gICAgZXhwZWN0KG9wZXJhdGlvbnNbJ1NlYXJjaCddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudHNbXCJIdW1hblwiXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbJ25hbWUnLCAnaGVpZ2h0J10pO1xuICB9KTtcblxuICBpdChgc2hvdWxkIGtlZXAgY29ycmVjdCBmaWVsZCBvcmRlcmluZyBldmVuIGlmIGZyYWdtZW50IGlzIHZpc2l0ZWQgbXVsdGlwbGUgdGltZXNgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgLi4uSGVyb05hbWVcbiAgICAgICAgICBhcHBlYXJzSW5cbiAgICAgICAgICAuLi5IZXJvTmFtZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZyYWdtZW50IEhlcm9OYW1lIG9uIENoYXJhY3RlciB7XG4gICAgICAgIG5hbWVcbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZpZWxkc1swXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAudG9FcXVhbChbJ25hbWUnLCAnYXBwZWFyc0luJ10pO1xuICB9KTtcblxuICBpdChgc2hvdWxkIGtlZXAgY29ycmVjdCBmaWVsZCBvcmRlcmluZyBldmVuIGlmIGZpZWxkIGhhcyBiZWVuIHZpc2l0ZWQgYmVmb3JlIGZvciBvdGhlciB0eXBlIGNvbmRpdGlvbmAsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIGZyYWdtZW50IEhlcm9EZXRhaWxzIG9uIENoYXJhY3RlciB7XG4gICAgICAgIC4uLiBvbiBIdW1hbiB7XG4gICAgICAgICAgYXBwZWFyc0luXG4gICAgICAgIH1cblxuICAgICAgICAuLi4gb24gRHJvaWQge1xuICAgICAgICAgIG5hbWVcbiAgICAgICAgICBhcHBlYXJzSW5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBmcmFnbWVudHMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQpO1xuXG4gICAgZXhwZWN0KGZyYWdtZW50c1snSGVyb0RldGFpbHMnXS5pbmxpbmVGcmFnbWVudHNbJ0Ryb2lkJ10udHlwZUNvbmRpdGlvbi50b1N0cmluZygpKS50b0VxdWFsKCdEcm9pZCcpO1xuICAgIGV4cGVjdChmcmFnbWVudHNbJ0hlcm9EZXRhaWxzJ10uaW5saW5lRnJhZ21lbnRzWydEcm9pZCddLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgIC50b0VxdWFsKFsnbmFtZScsICdhcHBlYXJzSW4nXSk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQga2VlcCB0cmFjayBvZiBmcmFnbWVudHMgcmVmZXJlbmNlZCBpbiBhIHN1YnNlbGVjdGlvbmAsICgpID0+IHtcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgIHF1ZXJ5IEhlcm9BbmRGcmllbmRzIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgbmFtZVxuICAgICAgICAgIGZyaWVuZHMge1xuICAgICAgICAgICAgLi4uSGVyb0RldGFpbHNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnJhZ21lbnQgSGVyb0RldGFpbHMgb24gQ2hhcmFjdGVyIHtcbiAgICAgICAgbmFtZVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvQW5kRnJpZW5kcyddLmZyYWdtZW50c1JlZmVyZW5jZWQpLnRvRXF1YWwoWydIZXJvRGV0YWlscyddKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBrZWVwIHRyYWNrIG9mIGZyYWdtZW50cyByZWZlcmVuY2VkIGluIGEgZnJhZ21lbnQgd2l0aGluIGEgc3Vic2VsZWN0aW9uYCwgKCkgPT4ge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgcXVlcnkgSGVyb0FuZEZyaWVuZHMge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICAuLi5IZXJvRGV0YWlsc1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZyYWdtZW50IEhlcm9EZXRhaWxzIG9uIENoYXJhY3RlciB7XG4gICAgICAgIGZyaWVuZHMge1xuICAgICAgICAgIC4uLkhlcm9OYW1lXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnJhZ21lbnQgSGVyb05hbWUgb24gQ2hhcmFjdGVyIHtcbiAgICAgICAgbmFtZVxuICAgICAgfVxuICAgIGApO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvQW5kRnJpZW5kcyddLmZyYWdtZW50c1JlZmVyZW5jZWQpLnRvRXF1YWwoWydIZXJvRGV0YWlscycsICdIZXJvTmFtZSddKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBrZWVwIHRyYWNrIG9mIGZyYWdtZW50cyByZWZlcmVuY2VkIGluIGEgc3Vic2VsZWN0aW9uIG5lc3RlZCBpbiBhbiBpbmxpbmUgZnJhZ21lbnRgLCAoKSA9PiB7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICBxdWVyeSBIZXJvQW5kRnJpZW5kcyB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIG5hbWVcbiAgICAgICAgICAuLi4gb24gRHJvaWQge1xuICAgICAgICAgICAgZnJpZW5kcyB7XG4gICAgICAgICAgICAgIC4uLkhlcm9EZXRhaWxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZyYWdtZW50IEhlcm9EZXRhaWxzIG9uIENoYXJhY3RlciB7XG4gICAgICAgIG5hbWVcbiAgICAgIH1cbiAgICBgKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb0FuZEZyaWVuZHMnXS5mcmFnbWVudHNSZWZlcmVuY2VkKS50b0VxdWFsKFsnSGVyb0RldGFpbHMnXSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwid2l0aCBtZXJnZUluRmllbGRzRnJvbUZyYWdtZW50U3ByZWFkcyBzZXQgdG8gZmFsc2VcIiwgKCkgPT4ge1xuICAgIGl0KGBzaG91bGQgbm90IG1vcmdlIGZpZWxkcyBmcm9tIHJlY3Vyc2l2ZWx5IGluY2x1ZGVkIGZyYWdtZW50IHNwcmVhZHMgd2l0aCB0eXBlIGNvbmRpdGlvbnMgdGhhdCBtYXRjaCB0aGUgcGFyZW50IHR5cGVgLCAoKSA9PiB7XG4gICAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKGBcbiAgICAgICAgcXVlcnkgSGVybyB7XG4gICAgICAgICAgaGVybyB7XG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgLi4uSGVyb0RldGFpbHNcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmcmFnbWVudCBIZXJvRGV0YWlscyBvbiBDaGFyYWN0ZXIge1xuICAgICAgICAgIG5hbWVcbiAgICAgICAgICAuLi5Nb3JlSGVyb0RldGFpbHNcbiAgICAgICAgICBpZFxuICAgICAgICB9XG5cbiAgICAgICAgZnJhZ21lbnQgTW9yZUhlcm9EZXRhaWxzIG9uIENoYXJhY3RlciB7XG4gICAgICAgICAgYXBwZWFyc0luXG4gICAgICAgIH1cbiAgICAgIGApO1xuXG4gICAgICBjb25zdCB7IG9wZXJhdGlvbnMsIGZyYWdtZW50cyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCwgeyBtZXJnZUluRmllbGRzRnJvbUZyYWdtZW50U3ByZWFkczogZmFsc2UgfSk7XG5cbiAgICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgICAgLnRvRXF1YWwoWydpZCddKTtcblxuICAgICAgZXhwZWN0KGZyYWdtZW50c1snSGVyb0RldGFpbHMnXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAgIC50b0VxdWFsKFsnbmFtZScsICdpZCddKTtcblxuICAgICAgZXhwZWN0KGZyYWdtZW50c1snTW9yZUhlcm9EZXRhaWxzJ10uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgICAudG9FcXVhbChbJ2FwcGVhcnNJbiddKTtcblxuICAgICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5mcmFnbWVudHNSZWZlcmVuY2VkKS50b0VxdWFsKFsnSGVyb0RldGFpbHMnLCAnTW9yZUhlcm9EZXRhaWxzJ10pO1xuICAgICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uZnJhZ21lbnRTcHJlYWRzKS50b0VxdWFsKFsnSGVyb0RldGFpbHMnXSk7XG4gICAgICBleHBlY3QoZnJhZ21lbnRzWydIZXJvRGV0YWlscyddLmZyYWdtZW50U3ByZWFkcykudG9FcXVhbChbJ01vcmVIZXJvRGV0YWlscyddKTtcbiAgICB9KTtcblxuICAgIGl0KGBzaG91bGQgbm90IG1lcmdlIGZpZWxkcyBmcm9tIGZyYWdtZW50IHNwcmVhZHMgZnJvbSBzdWJzZWxlY3Rpb25zYCwgKCkgPT4ge1xuICAgICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShgXG4gICAgICAgIHF1ZXJ5IEhlcm9BbmRGcmllbmRzIHtcbiAgICAgICAgICBoZXJvIHtcbiAgICAgICAgICAgIC4uLkhlcm9EZXRhaWxzXG4gICAgICAgICAgICBhcHBlYXJzSW5cbiAgICAgICAgICAgIGlkXG4gICAgICAgICAgICBmcmllbmRzIHtcbiAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgLi4uSGVyb0RldGFpbHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmcmFnbWVudCBIZXJvRGV0YWlscyBvbiBDaGFyYWN0ZXIge1xuICAgICAgICAgIG5hbWVcbiAgICAgICAgICBpZFxuICAgICAgICB9XG4gICAgICBgKTtcblxuICAgICAgY29uc3QgeyBvcGVyYXRpb25zLCBmcmFnbWVudHMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQsIHsgbWVyZ2VJbkZpZWxkc0Zyb21GcmFnbWVudFNwcmVhZHM6IGZhbHNlIH0pO1xuXG4gICAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb0FuZEZyaWVuZHMnXS5maWVsZHNbMF0uZmllbGRzLm1hcChmaWVsZCA9PiBmaWVsZC5maWVsZE5hbWUpKVxuICAgICAgICAudG9FcXVhbChbJ2FwcGVhcnNJbicsICdpZCcsJ2ZyaWVuZHMnXSk7XG4gICAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb0FuZEZyaWVuZHMnXS5maWVsZHNbMF0uZmllbGRzWzJdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgICAgLnRvRXF1YWwoWydpZCddKTtcblxuICAgICAgZXhwZWN0KGZyYWdtZW50c1snSGVyb0RldGFpbHMnXS5maWVsZHMubWFwKGZpZWxkID0+IGZpZWxkLmZpZWxkTmFtZSkpXG4gICAgICAgIC50b0VxdWFsKFsnbmFtZScsICdpZCddKTtcblxuICAgICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9BbmRGcmllbmRzJ10uZnJhZ21lbnRzUmVmZXJlbmNlZCkudG9FcXVhbChbJ0hlcm9EZXRhaWxzJ10pO1xuICAgICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm9BbmRGcmllbmRzJ10uZmllbGRzWzBdLmZyYWdtZW50U3ByZWFkcykudG9FcXVhbChbJ0hlcm9EZXRhaWxzJ10pO1xuICAgIH0pO1xuXG4gICAgaXQoYHNob3VsZCBub3QgbWVyZ2UgZmllbGRzIGZyb20gZnJhZ21lbnQgc3ByZWFkcyB3aXRoIHR5cGUgY29uZGl0aW9uc2AsICgpID0+IHtcbiAgICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2UoYFxuICAgICAgICBxdWVyeSBIZXJvIHtcbiAgICAgICAgICBoZXJvIHtcbiAgICAgICAgICAgIG5hbWVcbiAgICAgICAgICAgIC4uLkRyb2lkRGV0YWlsc1xuICAgICAgICAgICAgLi4uSHVtYW5EZXRhaWxzXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnJhZ21lbnQgRHJvaWREZXRhaWxzIG9uIERyb2lkIHtcbiAgICAgICAgICBwcmltYXJ5RnVuY3Rpb25cbiAgICAgICAgfVxuXG4gICAgICAgIGZyYWdtZW50IEh1bWFuRGV0YWlscyBvbiBIdW1hbiB7XG4gICAgICAgICAgaGVpZ2h0XG4gICAgICAgIH1cbiAgICAgIGApO1xuXG4gICAgICBjb25zdCB7IG9wZXJhdGlvbnMsIGZyYWdtZW50cyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCwgeyBtZXJnZUluRmllbGRzRnJvbUZyYWdtZW50U3ByZWFkczogZmFsc2UgfSk7XG5cbiAgICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvJ10uZmllbGRzWzBdLmZpZWxkcy5tYXAoZmllbGQgPT4gZmllbGQuZmllbGROYW1lKSlcbiAgICAgICAgLnRvRXF1YWwoWyduYW1lJ10pO1xuXG4gICAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZpZWxkc1swXS5pbmxpbmVGcmFnbWVudCkudG9CZVVuZGVmaW5lZCgpO1xuXG4gICAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVybyddLmZyYWdtZW50c1JlZmVyZW5jZWQpLnRvRXF1YWwoWydEcm9pZERldGFpbHMnLCAnSHVtYW5EZXRhaWxzJ10pO1xuICAgICAgZXhwZWN0KG9wZXJhdGlvbnNbJ0hlcm8nXS5maWVsZHNbMF0uZnJhZ21lbnRTcHJlYWRzKS50b0VxdWFsKFsnRHJvaWREZXRhaWxzJywgJ0h1bWFuRGV0YWlscyddKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBpbmNsdWRlIHRoZSBzb3VyY2Ugb2Ygb3BlcmF0aW9uc2AsICgpID0+IHtcbiAgICBjb25zdCBzb3VyY2UgPSBzdHJpcEluZGVudGBcbiAgICAgIHF1ZXJ5IEhlcm9OYW1lIHtcbiAgICAgICAgaGVybyB7XG4gICAgICAgICAgbmFtZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYFxuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2Uoc291cmNlKTtcblxuICAgIGNvbnN0IHsgb3BlcmF0aW9ucyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWUnXS5zb3VyY2UpLnRvQmUoc291cmNlKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBpbmNsdWRlIHRoZSBzb3VyY2Ugb2YgZnJhZ21lbnRzYCwgKCkgPT4ge1xuICAgIGNvbnN0IHNvdXJjZSA9IHN0cmlwSW5kZW50YFxuICAgICAgZnJhZ21lbnQgSGVyb0RldGFpbHMgb24gQ2hhcmFjdGVyIHtcbiAgICAgICAgbmFtZVxuICAgICAgfVxuICAgIGBcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKHNvdXJjZSk7XG5cbiAgICBjb25zdCB7IGZyYWdtZW50cyB9ID0gY29tcGlsZVRvTGVnYWN5SVIoc2NoZW1hLCBkb2N1bWVudCk7XG5cbiAgICBleHBlY3QoZnJhZ21lbnRzWydIZXJvRGV0YWlscyddLnNvdXJjZSkudG9CZShzb3VyY2UpO1xuICB9KTtcblxuICBpdChgc2hvdWxkIGluY2x1ZGUgdGhlIHNvdXJjZSBvZiBvcGVyYXRpb25zIHdpdGggX190eXBlbmFtZSBhZGRlZCB3aGVuIGFkZFR5cGVuYW1lIGlzIHRydWVgLCAoKSA9PiB7XG4gICAgY29uc3Qgc291cmNlID0gc3RyaXBJbmRlbnRgXG4gICAgICBxdWVyeSBIZXJvTmFtZSB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIG5hbWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGBcbiAgICBjb25zdCBkb2N1bWVudCA9IHBhcnNlKHNvdXJjZSk7XG5cbiAgICBjb25zdCB7IG9wZXJhdGlvbnMgfSA9IGNvbXBpbGVUb0xlZ2FjeUlSKHNjaGVtYSwgZG9jdW1lbnQsIHsgYWRkVHlwZW5hbWU6IHRydWUgfSk7XG5cbiAgICBleHBlY3Qob3BlcmF0aW9uc1snSGVyb05hbWUnXS5zb3VyY2UpLnRvQmUoc3RyaXBJbmRlbnRgXG4gICAgICBxdWVyeSBIZXJvTmFtZSB7XG4gICAgICAgIGhlcm8ge1xuICAgICAgICAgIF9fdHlwZW5hbWVcbiAgICAgICAgICBuYW1lXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBpbmNsdWRlIHRoZSBzb3VyY2Ugb2YgZnJhZ21lbnRzIHdpdGggX190eXBlbmFtZSBhZGRlZCB3aGVuIGFkZFR5cGVuYW1lIGlzIHRydWVgLCAoKSA9PiB7XG4gICAgY29uc3Qgc291cmNlID0gc3RyaXBJbmRlbnRgXG4gICAgICBmcmFnbWVudCBIZXJvRGV0YWlscyBvbiBDaGFyYWN0ZXIge1xuICAgICAgICBuYW1lXG4gICAgICB9XG4gICAgYFxuICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2Uoc291cmNlKTtcblxuICAgIGNvbnN0IHsgZnJhZ21lbnRzIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50LCB7IGFkZFR5cGVuYW1lOiB0cnVlIH0pO1xuXG4gICAgZXhwZWN0KGZyYWdtZW50c1snSGVyb0RldGFpbHMnXS5zb3VyY2UpLnRvQmUoc3RyaXBJbmRlbnRgXG4gICAgICBmcmFnbWVudCBIZXJvRGV0YWlscyBvbiBDaGFyYWN0ZXIge1xuICAgICAgICBfX3R5cGVuYW1lXG4gICAgICAgIG5hbWVcbiAgICAgIH1cbiAgICBgKTtcbiAgfSk7XG5cbiAgaXQoYHNob3VsZCBpbmNsdWRlIHRoZSBvcGVyYXRpb25UeXBlIGZvciBhIHF1ZXJ5YCwgKCkgPT4ge1xuICAgIGNvbnN0IHNvdXJjZSA9IHN0cmlwSW5kZW50YFxuICAgICAgcXVlcnkgSGVyb05hbWUge1xuICAgICAgICBoZXJvIHtcbiAgICAgICAgICBuYW1lXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgXG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShzb3VyY2UpO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydIZXJvTmFtZSddLm9wZXJhdGlvblR5cGUpLnRvQmUoJ3F1ZXJ5Jyk7XG4gIH0pO1xuXG4gIGl0KGBzaG91bGQgaW5jbHVkZSB0aGUgb3BlcmF0aW9uVHlwZSBmb3IgYSBtdXRhdGlvbmAsICgpID0+IHtcbiAgICBjb25zdCBzb3VyY2UgPSBzdHJpcEluZGVudGBcbiAgICAgIG11dGF0aW9uIENyZWF0ZVJldmlldyB7XG4gICAgICAgIGNyZWF0ZVJldmlldyB7XG4gICAgICAgICAgc3RhcnNcbiAgICAgICAgICBjb21tZW50YXJ5XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgXG4gICAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZShzb3VyY2UpO1xuXG4gICAgY29uc3QgeyBvcGVyYXRpb25zIH0gPSBjb21waWxlVG9MZWdhY3lJUihzY2hlbWEsIGRvY3VtZW50KTtcblxuICAgIGV4cGVjdChvcGVyYXRpb25zWydDcmVhdGVSZXZpZXcnXS5vcGVyYXRpb25UeXBlKS50b0JlKCdtdXRhdGlvbicpO1xuICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==