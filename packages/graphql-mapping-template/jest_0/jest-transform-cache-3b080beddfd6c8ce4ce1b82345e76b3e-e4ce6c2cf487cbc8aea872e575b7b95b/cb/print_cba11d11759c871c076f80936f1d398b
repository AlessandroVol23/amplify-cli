91fbeed72ce845d9f04dd53e46e493a3
'use strict';require('ts-jest').install("/c/Users/Sandro/repo/amplify-cli/packages/graphql-mapping-template/src/print.ts", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ast_1 = require(\"./ast\");\nvar TAB = '  ';\nfunction printIf(node, indent) {\n    if (indent === void 0) { indent = ''; }\n    if (node.inline) {\n        return \"#if( \" + printExpr(node.predicate, '') + \" ) \" + printExpr(node.expr, '') + \" #end\";\n    }\n    return indent + \"#if( \" + printExpr(node.predicate, '') + \" )\\n\" + printExpr(node.expr, indent + TAB) + \"\\n\" + indent + \"#end\";\n}\nfunction printIfElse(node, indent) {\n    if (indent === void 0) { indent = ''; }\n    if (node.inline) {\n        return \"#if( \" + printExpr(node.predicate) + \" ) \" +\n            (printExpr(node.ifExpr) + \" \") +\n            \"#else \" +\n            (printExpr(node.elseExpr) + \" \") +\n            \"#end\";\n    }\n    return indent + \"#if( \" + printExpr(node.predicate) + \" )\\n\" +\n        (printExpr(node.ifExpr, indent + TAB) + \"\\n\") +\n        (indent + \"#else\\n\") +\n        (printExpr(node.elseExpr, indent + TAB) + \"\\n\") +\n        (indent + \"#end\");\n}\nfunction printAnd(node, indent) {\n    if (indent === void 0) { indent = ''; }\n    return indent + node.expressions.map(function (e) { return printExpr(e); }).join(' && ');\n}\nfunction printOr(node, indent) {\n    if (indent === void 0) { indent = ''; }\n    return indent + node.expressions.map(function (e) { return printExpr(e); }).join(' || ');\n}\nfunction printParens(node, indent) {\n    if (indent === void 0) { indent = ''; }\n    return indent + \"(\" + printExpr(node.expr) + \")\";\n}\nfunction printEquals(node, indent) {\n    if (indent === void 0) { indent = ''; }\n    return \"\" + indent + printExpr(node.leftExpr) + \" == \" + printExpr(node.rightExpr);\n}\nfunction printNotEquals(node, indent) {\n    if (indent === void 0) { indent = ''; }\n    return \"\" + indent + printExpr(node.leftExpr) + \" != \" + printExpr(node.rightExpr);\n}\nfunction printForEach(node, indent) {\n    if (indent === void 0) { indent = ''; }\n    return indent + \"#foreach( \" + printExpr(node.key) + \" in \" + printExpr(node.collection) + \" )\\n\" +\n        node.expressions.map(function (e) { return printExpr(e, indent + TAB); }).join('\\n') +\n        (\"\\n\" + indent + \"#end\");\n}\nfunction printString(node) {\n    return \"\\\"\" + node.value + \"\\\"\";\n}\nfunction printBool(node) {\n    return \"\" + node.value;\n}\nfunction printRaw(node, indent) {\n    if (indent === void 0) { indent = ''; }\n    return \"\" + indent + node.value;\n}\nfunction printQuotes(node) {\n    return \"\\\"\" + printExpr(node.expr) + \"\\\"\";\n}\nfunction printInt(node) {\n    return \"\" + node.value;\n}\nfunction printFloat(node) {\n    return \"\" + node.value;\n}\nfunction printNull(node) {\n    return \"null\";\n}\nfunction printReference(node) {\n    return \"$\" + node.value;\n}\nfunction printQuietReference(node, indent) {\n    if (indent === void 0) { indent = ''; }\n    return indent + \"$util.qr(\" + node.value + \")\";\n}\nfunction printObject(node, indent) {\n    if (indent === void 0) { indent = ''; }\n    var attributes = node.attributes.map(function (attr, i) {\n        return \"\" + indent + TAB + \"\\\"\" + attr[0] + \"\\\": \" + printExpr(attr[1], indent + TAB) + (i < node.attributes.length - 1 ? ',' : '');\n    });\n    var divider = attributes.length > 0 ? \"\\n\" + indent : '';\n    return \"{\" + divider + attributes.join(divider) + divider + \"}\";\n}\nexports.printObject = printObject;\nfunction printList(node, indent) {\n    if (indent === void 0) { indent = ''; }\n    var values = node.expressions.map(function (e) { return printExpr(e, ''); }).join(', ');\n    return indent + \"[\" + values + \"]\";\n}\nfunction printSet(node, indent) {\n    if (indent === void 0) { indent = ''; }\n    return indent + \"#set( \" + printReference(node.key) + \" = \" + printExpr(node.value, '') + \" )\";\n}\nfunction printComment(node, indent) {\n    if (indent === void 0) { indent = ''; }\n    return indent + \"## \" + node.text + \" **\";\n}\nfunction printCompoundExpression(node, indent) {\n    if (indent === void 0) { indent = ''; }\n    return node.expressions.map(function (node) { return printExpr(node, indent); }).join(\"\\n\");\n}\nfunction printToJson(node, indent) {\n    if (indent === void 0) { indent = ''; }\n    return indent + \"$util.toJson(\" + printExpr(node.expr, '') + \")\";\n}\nfunction printNot(node, indent) {\n    if (indent === void 0) { indent = ''; }\n    return indent + \"!\" + printExpr(node.expr, '');\n}\nfunction printNewLine(node) {\n    return '\\n';\n}\nfunction printExpr(expr, indent) {\n    if (indent === void 0) { indent = ''; }\n    if (!expr) {\n        return '';\n    }\n    switch (expr.kind) {\n        case 'If':\n            return printIf(expr, indent);\n        case 'IfElse':\n            return printIfElse(expr, indent);\n        case 'And':\n            return printAnd(expr, indent);\n        case 'Or':\n            return printOr(expr, indent);\n        case 'Parens':\n            return printParens(expr, indent);\n        case 'Equals':\n            return printEquals(expr, indent);\n        case 'NotEquals':\n            return printNotEquals(expr, indent);\n        case 'ForEach':\n            return printForEach(expr, indent);\n        case 'String':\n            return printString(expr);\n        case 'Raw':\n            return printRaw(expr, indent);\n        case 'Quotes':\n            return printQuotes(expr);\n        case 'Float':\n            return printFloat(expr);\n        case 'Int':\n            return printInt(expr);\n        case 'Boolean':\n            return printBool(expr);\n        case 'Null':\n            return printNull(expr);\n        case 'Reference':\n            return printReference(expr);\n        case 'QuietReference':\n            return printQuietReference(expr, indent);\n        case 'Object':\n            return printObject(expr, indent);\n        case 'List':\n            return printList(expr, indent);\n        case 'Set':\n            return printSet(expr, indent);\n        case 'Comment':\n            return printComment(expr, indent);\n        case 'CompoundExpression':\n            return printCompoundExpression(expr, indent);\n        case 'Util.ToJson':\n            return printToJson(expr, indent);\n        case 'Not':\n            return printNot(expr, indent);\n        case 'NewLine':\n            return printNewLine(expr);\n        default:\n            return '';\n    }\n}\nfunction print(expr) {\n    return printExpr(expr);\n}\nexports.print = print;\nfunction printBlock(name) {\n    return function (expr) {\n        var wrappedExpr = ast_1.compoundExpression([\n            ast_1.comment(\"[Start] \" + name + \".\"),\n            expr,\n            ast_1.comment(\"[End] \" + name + \".\")\n        ]);\n        return printExpr(wrappedExpr);\n    };\n}\nexports.printBlock = printBlock;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJwcmludC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDZCQU1lO0FBRWYsSUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDO0FBRWpCLGlCQUFpQixJQUFZLEVBQUUsTUFBbUI7SUFBbkIsdUJBQUEsRUFBQSxXQUFtQjtJQUM5QyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7UUFDYixPQUFPLFVBQVEsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLFdBQU0sU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLFVBQU8sQ0FBQztLQUNyRjtJQUNELE9BQVUsTUFBTSxhQUFRLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxZQUFPLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLE1BQU0sR0FBRyxHQUFHLENBQUMsVUFBSyxNQUFNLFNBQU0sQ0FBQztBQUNwSCxDQUFDO0FBRUQscUJBQXFCLElBQWdCLEVBQUUsTUFBbUI7SUFBbkIsdUJBQUEsRUFBQSxXQUFtQjtJQUN0RCxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7UUFDYixPQUFPLFVBQVEsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBSzthQUN0QyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFHLENBQUE7WUFDNUIsUUFBUTthQUNMLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQUcsQ0FBQTtZQUM5QixNQUFNLENBQUM7S0FDZDtJQUNELE9BQVUsTUFBTSxhQUFRLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQU07U0FDaEQsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsTUFBTSxHQUFHLEdBQUcsQ0FBQyxPQUFJLENBQUE7U0FDeEMsTUFBTSxZQUFTLENBQUE7U0FDZixTQUFTLENBQUMsSUFBSSxD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U0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ2xDLENBQUMsQ0FBQTtBQUNMLENBQUM7QUFURCxnQ0FTQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgRXhwcmVzc2lvbiwgSWZOb2RlLCBJZkVsc2VOb2RlLCBBbmROb2RlLCBPck5vZGUsXG4gICAgUGFyZW5zTm9kZSwgRXF1YWxzTm9kZSwgTm90RXF1YWxzTm9kZSwgRm9yRWFjaE5vZGUsXG4gICAgU3RyaW5nTm9kZSwgSW50Tm9kZSwgTnVsbE5vZGUsIFJlZmVyZW5jZU5vZGUsIFF1aWV0UmVmZXJlbmNlTm9kZSxcbiAgICBPYmplY3ROb2RlLCBMaXN0Tm9kZSwgRmxvYXROb2RlLCBRdW90ZXNOb2RlLCBSYXdOb2RlLCBTZXROb2RlLCBDb21wb3VuZEV4cHJlc3Npb25Ob2RlLFxuICAgIENvbW1lbnROb2RlLCBUb0pzb25Ob2RlLCBCb29sZWFuTm9kZSwgY29tcG91bmRFeHByZXNzaW9uLCBjb21tZW50LCBOb3ROb2RlLCBOZXdMaW5lTm9kZVxufSBmcm9tICcuL2FzdCc7XG5cbmNvbnN0IFRBQiA9ICcgICc7XG5cbmZ1bmN0aW9uIHByaW50SWYobm9kZTogSWZOb2RlLCBpbmRlbnQ6IHN0cmluZyA9ICcnKSB7XG4gICAgaWYgKG5vZGUuaW5saW5lKSB7XG4gICAgICAgIHJldHVybiBgI2lmKCAke3ByaW50RXhwcihub2RlLnByZWRpY2F0ZSwgJycpfSApICR7cHJpbnRFeHByKG5vZGUuZXhwciwgJycpfSAjZW5kYDtcbiAgICB9XG4gICAgcmV0dXJuIGAke2luZGVudH0jaWYoICR7cHJpbnRFeHByKG5vZGUucHJlZGljYXRlLCAnJyl9IClcXG4ke3ByaW50RXhwcihub2RlLmV4cHIsIGluZGVudCArIFRBQil9XFxuJHtpbmRlbnR9I2VuZGA7XG59XG5cbmZ1bmN0aW9uIHByaW50SWZFbHNlKG5vZGU6IElmRWxzZU5vZGUsIGluZGVudDogc3RyaW5nID0gJycpIHtcbiAgICBpZiAobm9kZS5pbmxpbmUpIHtcbiAgICAgICAgcmV0dXJuIGAjaWYoICR7cHJpbnRFeHByKG5vZGUucHJlZGljYXRlKX0gKSBgICtcbiAgICAgICAgICAgIGAke3ByaW50RXhwcihub2RlLmlmRXhwcil9IGAgK1xuICAgICAgICAgICAgYCNlbHNlIGAgK1xuICAgICAgICAgICAgYCR7cHJpbnRFeHByKG5vZGUuZWxzZUV4cHIpfSBgICtcbiAgICAgICAgICAgIGAjZW5kYDtcbiAgICB9XG4gICAgcmV0dXJuIGAke2luZGVudH0jaWYoICR7cHJpbnRFeHByKG5vZGUucHJlZGljYXRlKX0gKVxcbmAgK1xuICAgICAgICBgJHtwcmludEV4cHIobm9kZS5pZkV4cHIsIGluZGVudCArIFRBQil9XFxuYCArXG4gICAgICAgIGAke2luZGVudH0jZWxzZVxcbmAgK1xuICAgICAgICBgJHtwcmludEV4cHIobm9kZS5lbHNlRXhwciwgaW5kZW50ICsgVEFCKX1cXG5gICtcbiAgICAgICAgYCR7aW5kZW50fSNlbmRgO1xufVxuXG5mdW5jdGlvbiBwcmludEFuZChub2RlOiBBbmROb2RlLCBpbmRlbnQ6IHN0cmluZyA9ICcnKTogc3RyaW5nIHtcbiAgICByZXR1cm4gaW5kZW50ICsgbm9kZS5leHByZXNzaW9ucy5tYXAoKGU6IEV4cHJlc3Npb24pID0+IHByaW50RXhwcihlKSkuam9pbignICYmICcpO1xufVxuXG5mdW5jdGlvbiBwcmludE9yKG5vZGU6IE9yTm9kZSwgaW5kZW50OiBzdHJpbmcgPSAnJyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGluZGVudCArIG5vZGUuZXhwcmVzc2lvbnMubWFwKChlOiBFeHByZXNzaW9uKSA9PiBwcmludEV4cHIoZSkpLmpvaW4oJyB8fCAnKTtcbn1cblxuZnVuY3Rpb24gcHJpbnRQYXJlbnMobm9kZTogUGFyZW5zTm9kZSwgaW5kZW50OiBzdHJpbmcgPSAnJyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke2luZGVudH0oJHtwcmludEV4cHIobm9kZS5leHByKX0pYDtcbn1cblxuZnVuY3Rpb24gcHJpbnRFcXVhbHMobm9kZTogRXF1YWxzTm9kZSwgaW5kZW50OiBzdHJpbmcgPSAnJyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke2luZGVudH0ke3ByaW50RXhwcihub2RlLmxlZnRFeHByKX0gPT0gJHtwcmludEV4cHIobm9kZS5yaWdodEV4cHIpfWA7XG59XG5cbmZ1bmN0aW9uIHByaW50Tm90RXF1YWxzKG5vZGU6IE5vdEVxdWFsc05vZGUsIGluZGVudDogc3RyaW5nID0gJycpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHtpbmRlbnR9JHtwcmludEV4cHIobm9kZS5sZWZ0RXhwcil9ICE9ICR7cHJpbnRFeHByKG5vZGUucmlnaHRFeHByKX1gO1xufVxuXG5mdW5jdGlvbiBwcmludEZvckVhY2gobm9kZTogRm9yRWFjaE5vZGUsIGluZGVudDogc3RyaW5nID0gJycpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHtpbmRlbnR9I2ZvcmVhY2goICR7cHJpbnRFeHByKG5vZGUua2V5KX0gaW4gJHtwcmludEV4cHIobm9kZS5jb2xsZWN0aW9uKX0gKVxcbmAgK1xuICAgICAgICBub2RlLmV4cHJlc3Npb25zLm1hcCgoZTogRXhwcmVzc2lvbikgPT4gcHJpbnRFeHByKGUsIGluZGVudCArIFRBQikpLmpvaW4oJ1xcbicpICtcbiAgICAgICAgYFxcbiR7aW5kZW50fSNlbmRgO1xufVxuXG5mdW5jdGlvbiBwcmludFN0cmluZyhub2RlOiBTdHJpbmdOb2RlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFwiJHtub2RlLnZhbHVlfVwiYDtcbn1cblxuZnVuY3Rpb24gcHJpbnRCb29sKG5vZGU6IEJvb2xlYW5Ob2RlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7bm9kZS52YWx1ZX1gO1xufVxuXG5mdW5jdGlvbiBwcmludFJhdyhub2RlOiBSYXdOb2RlLCBpbmRlbnQ6IHN0cmluZyA9ICcnKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7aW5kZW50fSR7bm9kZS52YWx1ZX1gO1xufVxuXG5mdW5jdGlvbiBwcmludFF1b3Rlcyhub2RlOiBRdW90ZXNOb2RlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFwiJHtwcmludEV4cHIobm9kZS5leHByKX1cImA7XG59XG5cbmZ1bmN0aW9uIHByaW50SW50KG5vZGU6IEludE5vZGUpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHtub2RlLnZhbHVlfWA7XG59XG5cbmZ1bmN0aW9uIHByaW50RmxvYXQobm9kZTogRmxvYXROb2RlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7bm9kZS52YWx1ZX1gO1xufVxuXG5mdW5jdGlvbiBwcmludE51bGwobm9kZTogTnVsbE5vZGUpOiBzdHJpbmcge1xuICAgIHJldHVybiBgbnVsbGA7XG59XG5cbmZ1bmN0aW9uIHByaW50UmVmZXJlbmNlKG5vZGU6IFJlZmVyZW5jZU5vZGUpOiBzdHJpbmcge1xuICAgIHJldHVybiBgXFwkJHtub2RlLnZhbHVlfWA7XG59XG5cbmZ1bmN0aW9uIHByaW50UXVpZXRSZWZlcmVuY2Uobm9kZTogUXVpZXRSZWZlcmVuY2VOb2RlLCBpbmRlbnQ6IHN0cmluZyA9ICcnKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7aW5kZW50fSR1dGlsLnFyKCR7bm9kZS52YWx1ZX0pYDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByaW50T2JqZWN0KG5vZGU6IE9iamVjdE5vZGUsIGluZGVudDogc3RyaW5nID0gJycpOiBzdHJpbmcge1xuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBub2RlLmF0dHJpYnV0ZXMubWFwKChhdHRyOiBbc3RyaW5nLCBFeHByZXNzaW9uXSwgaTogbnVtYmVyKSA9PiB7XG4gICAgICAgIHJldHVybiBgJHtpbmRlbnR9JHtUQUJ9XCIke2F0dHJbMF19XCI6ICR7cHJpbnRFeHByKGF0dHJbMV0sIGluZGVudCArIFRBQil9JHtpIDwgbm9kZS5hdHRyaWJ1dGVzLmxlbmd0aCAtIDEgPyAnLCcgOiAnJ31gO1xuICAgIH0pO1xuICAgIGNvbnN0IGRpdmlkZXIgPSBhdHRyaWJ1dGVzLmxlbmd0aCA+IDAgPyBgXFxuJHtpbmRlbnR9YCA6ICcnXG4gICAgcmV0dXJuIGB7JHtkaXZpZGVyfSR7YXR0cmlidXRlcy5qb2luKGRpdmlkZXIpfSR7ZGl2aWRlcn19YDtcbn1cblxuZnVuY3Rpb24gcHJpbnRMaXN0KG5vZGU6IExpc3ROb2RlLCBpbmRlbnQ6IHN0cmluZyA9ICcnKTogc3RyaW5nIHtcbiAgICBjb25zdCB2YWx1ZXMgPSBub2RlLmV4cHJlc3Npb25zLm1hcCgoZTogRXhwcmVzc2lvbikgPT4gcHJpbnRFeHByKGUsICcnKSkuam9pbignLCAnKTtcbiAgICByZXR1cm4gYCR7aW5kZW50fVske3ZhbHVlc31dYDtcbn1cblxuZnVuY3Rpb24gcHJpbnRTZXQobm9kZTogU2V0Tm9kZSwgaW5kZW50OiBzdHJpbmcgPSAnJyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke2luZGVudH0jc2V0KCAke3ByaW50UmVmZXJlbmNlKG5vZGUua2V5KX0gPSAke3ByaW50RXhwcihub2RlLnZhbHVlLCAnJyl9IClgXG59XG5cbmZ1bmN0aW9uIHByaW50Q29tbWVudChub2RlOiBDb21tZW50Tm9kZSwgaW5kZW50OiBzdHJpbmcgPSAnJyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke2luZGVudH0jIyAke25vZGUudGV4dH0gKipgXG59XG5cbmZ1bmN0aW9uIHByaW50Q29tcG91bmRFeHByZXNzaW9uKG5vZGU6IENvbXBvdW5kRXhwcmVzc2lvbk5vZGUsIGluZGVudDogc3RyaW5nID0gJycpOiBzdHJpbmcge1xuICAgIHJldHVybiBub2RlLmV4cHJlc3Npb25zLm1hcCgobm9kZTogRXhwcmVzc2lvbikgPT4gcHJpbnRFeHByKG5vZGUsIGluZGVudCkpLmpvaW4oYFxcbmApXG59XG5cbmZ1bmN0aW9uIHByaW50VG9Kc29uKG5vZGU6IFRvSnNvbk5vZGUsIGluZGVudDogc3RyaW5nID0gJycpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHtpbmRlbnR9JHV0aWwudG9Kc29uKCR7cHJpbnRFeHByKG5vZGUuZXhwciwgJycpfSlgXG59XG5cbmZ1bmN0aW9uIHByaW50Tm90KG5vZGU6IE5vdE5vZGUsIGluZGVudDogc3RyaW5nID0gJycpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHtpbmRlbnR9ISR7cHJpbnRFeHByKG5vZGUuZXhwciwgJycpfWBcbn1cblxuZnVuY3Rpb24gcHJpbnROZXdMaW5lKG5vZGU6IE5ld0xpbmVOb2RlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ1xcbidcbn1cblxuZnVuY3Rpb24gcHJpbnRFeHByKGV4cHI6IEV4cHJlc3Npb24sIGluZGVudDogc3RyaW5nID0gJycpOiBzdHJpbmcge1xuICAgIGlmICghZXhwcikgeyByZXR1cm4gJyc7IH1cbiAgICBzd2l0Y2ggKGV4cHIua2luZCkge1xuICAgICAgICBjYXNlICdJZic6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnRJZihleHByLCBpbmRlbnQpO1xuICAgICAgICBjYXNlICdJZkVsc2UnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50SWZFbHNlKGV4cHIsIGluZGVudCk7XG4gICAgICAgIGNhc2UgJ0FuZCc6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnRBbmQoZXhwciwgaW5kZW50KTtcbiAgICAgICAgY2FzZSAnT3InOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50T3IoZXhwciwgaW5kZW50KTtcbiAgICAgICAgY2FzZSAnUGFyZW5zJzpcbiAgICAgICAgICAgIHJldHVybiBwcmludFBhcmVucyhleHByLCBpbmRlbnQpO1xuICAgICAgICBjYXNlICdFcXVhbHMnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50RXF1YWxzKGV4cHIsIGluZGVudCk7XG4gICAgICAgIGNhc2UgJ05vdEVxdWFscyc6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnROb3RFcXVhbHMoZXhwciwgaW5kZW50KTtcbiAgICAgICAgY2FzZSAnRm9yRWFjaCc6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnRGb3JFYWNoKGV4cHIsIGluZGVudCk7XG4gICAgICAgIGNhc2UgJ1N0cmluZyc6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnRTdHJpbmcoZXhwcik7XG4gICAgICAgIGNhc2UgJ1Jhdyc6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnRSYXcoZXhwciwgaW5kZW50KTtcbiAgICAgICAgY2FzZSAnUXVvdGVzJzpcbiAgICAgICAgICAgIHJldHVybiBwcmludFF1b3RlcyhleHByKTtcbiAgICAgICAgY2FzZSAnRmxvYXQnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50RmxvYXQoZXhwcik7XG4gICAgICAgIGNhc2UgJ0ludCc6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnRJbnQoZXhwcik7XG4gICAgICAgIGNhc2UgJ0Jvb2xlYW4nOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50Qm9vbChleHByKTtcbiAgICAgICAgY2FzZSAnTnVsbCc6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnROdWxsKGV4cHIpO1xuICAgICAgICBjYXNlICdSZWZlcmVuY2UnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50UmVmZXJlbmNlKGV4cHIpO1xuICAgICAgICBjYXNlICdRdWlldFJlZmVyZW5jZSc6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnRRdWlldFJlZmVyZW5jZShleHByLCBpbmRlbnQpO1xuICAgICAgICBjYXNlICdPYmplY3QnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50T2JqZWN0KGV4cHIsIGluZGVudCk7XG4gICAgICAgIGNhc2UgJ0xpc3QnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50TGlzdChleHByLCBpbmRlbnQpO1xuICAgICAgICBjYXNlICdTZXQnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50U2V0KGV4cHIsIGluZGVudCk7XG4gICAgICAgIGNhc2UgJ0NvbW1lbnQnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50Q29tbWVudChleHByLCBpbmRlbnQpO1xuICAgICAgICBjYXNlICdDb21wb3VuZEV4cHJlc3Npb24nOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50Q29tcG91bmRFeHByZXNzaW9uKGV4cHIsIGluZGVudClcbiAgICAgICAgY2FzZSAnVXRpbC5Ub0pzb24nOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50VG9Kc29uKGV4cHIsIGluZGVudClcbiAgICAgICAgY2FzZSAnTm90JzpcbiAgICAgICAgICAgIHJldHVybiBwcmludE5vdChleHByLCBpbmRlbnQpXG4gICAgICAgIGNhc2UgJ05ld0xpbmUnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50TmV3TGluZShleHByKVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByaW50KGV4cHI6IEV4cHJlc3Npb24pOiBzdHJpbmcge1xuICAgIHJldHVybiBwcmludEV4cHIoZXhwcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmludEJsb2NrKG5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiAoZXhwcjogRXhwcmVzc2lvbik6IHN0cmluZyA9PiB7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRFeHByID0gY29tcG91bmRFeHByZXNzaW9uKFtcbiAgICAgICAgICAgIGNvbW1lbnQoYFtTdGFydF0gJHtuYW1lfS5gKSxcbiAgICAgICAgICAgIGV4cHIsXG4gICAgICAgICAgICBjb21tZW50KGBbRW5kXSAke25hbWV9LmApXG4gICAgICAgIF0pXG4gICAgICAgIHJldHVybiBwcmludEV4cHIod3JhcHBlZEV4cHIpO1xuICAgIH1cbn1cbiJdfQ==");"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ast_1 = require("./ast");
var TAB = '  ';
function printIf(node, indent) {
    if (indent === void 0) {indent = '';}
    if (node.inline) {
        return "#if( " + printExpr(node.predicate, '') + " ) " + printExpr(node.expr, '') + " #end";
    }
    return indent + "#if( " + printExpr(node.predicate, '') + " )\n" + printExpr(node.expr, indent + TAB) + "\n" + indent + "#end";
}
function printIfElse(node, indent) {
    if (indent === void 0) {indent = '';}
    if (node.inline) {
        return "#if( " + printExpr(node.predicate) + " ) " + (
        printExpr(node.ifExpr) + " ") +
        "#else " + (
        printExpr(node.elseExpr) + " ") +
        "#end";
    }
    return indent + "#if( " + printExpr(node.predicate) + " )\n" + (
    printExpr(node.ifExpr, indent + TAB) + "\n") + (
    indent + "#else\n") + (
    printExpr(node.elseExpr, indent + TAB) + "\n") + (
    indent + "#end");
}
function printAnd(node, indent) {
    if (indent === void 0) {indent = '';}
    return indent + node.expressions.map(function (e) {return printExpr(e);}).join(' && ');
}
function printOr(node, indent) {
    if (indent === void 0) {indent = '';}
    return indent + node.expressions.map(function (e) {return printExpr(e);}).join(' || ');
}
function printParens(node, indent) {
    if (indent === void 0) {indent = '';}
    return indent + "(" + printExpr(node.expr) + ")";
}
function printEquals(node, indent) {
    if (indent === void 0) {indent = '';}
    return "" + indent + printExpr(node.leftExpr) + " == " + printExpr(node.rightExpr);
}
function printNotEquals(node, indent) {
    if (indent === void 0) {indent = '';}
    return "" + indent + printExpr(node.leftExpr) + " != " + printExpr(node.rightExpr);
}
function printForEach(node, indent) {
    if (indent === void 0) {indent = '';}
    return indent + "#foreach( " + printExpr(node.key) + " in " + printExpr(node.collection) + " )\n" +
    node.expressions.map(function (e) {return printExpr(e, indent + TAB);}).join('\n') + (
    "\n" + indent + "#end");
}
function printString(node) {
    return "\"" + node.value + "\"";
}
function printBool(node) {
    return "" + node.value;
}
function printRaw(node, indent) {
    if (indent === void 0) {indent = '';}
    return "" + indent + node.value;
}
function printQuotes(node) {
    return "\"" + printExpr(node.expr) + "\"";
}
function printInt(node) {
    return "" + node.value;
}
function printFloat(node) {
    return "" + node.value;
}
function printNull(node) {
    return "null";
}
function printReference(node) {
    return "$" + node.value;
}
function printQuietReference(node, indent) {
    if (indent === void 0) {indent = '';}
    return indent + "$util.qr(" + node.value + ")";
}
function printObject(node, indent) {
    if (indent === void 0) {indent = '';}
    var attributes = node.attributes.map(function (attr, i) {
        return "" + indent + TAB + "\"" + attr[0] + "\": " + printExpr(attr[1], indent + TAB) + (i < node.attributes.length - 1 ? ',' : '');
    });
    var divider = attributes.length > 0 ? "\n" + indent : '';
    return "{" + divider + attributes.join(divider) + divider + "}";
}
exports.printObject = printObject;
function printList(node, indent) {
    if (indent === void 0) {indent = '';}
    var values = node.expressions.map(function (e) {return printExpr(e, '');}).join(', ');
    return indent + "[" + values + "]";
}
function printSet(node, indent) {
    if (indent === void 0) {indent = '';}
    return indent + "#set( " + printReference(node.key) + " = " + printExpr(node.value, '') + " )";
}
function printComment(node, indent) {
    if (indent === void 0) {indent = '';}
    return indent + "## " + node.text + " **";
}
function printCompoundExpression(node, indent) {
    if (indent === void 0) {indent = '';}
    return node.expressions.map(function (node) {return printExpr(node, indent);}).join("\n");
}
function printToJson(node, indent) {
    if (indent === void 0) {indent = '';}
    return indent + "$util.toJson(" + printExpr(node.expr, '') + ")";
}
function printNot(node, indent) {
    if (indent === void 0) {indent = '';}
    return indent + "!" + printExpr(node.expr, '');
}
function printNewLine(node) {
    return '\n';
}
function printExpr(expr, indent) {
    if (indent === void 0) {indent = '';}
    if (!expr) {
        return '';
    }
    switch (expr.kind) {
        case 'If':
            return printIf(expr, indent);
        case 'IfElse':
            return printIfElse(expr, indent);
        case 'And':
            return printAnd(expr, indent);
        case 'Or':
            return printOr(expr, indent);
        case 'Parens':
            return printParens(expr, indent);
        case 'Equals':
            return printEquals(expr, indent);
        case 'NotEquals':
            return printNotEquals(expr, indent);
        case 'ForEach':
            return printForEach(expr, indent);
        case 'String':
            return printString(expr);
        case 'Raw':
            return printRaw(expr, indent);
        case 'Quotes':
            return printQuotes(expr);
        case 'Float':
            return printFloat(expr);
        case 'Int':
            return printInt(expr);
        case 'Boolean':
            return printBool(expr);
        case 'Null':
            return printNull(expr);
        case 'Reference':
            return printReference(expr);
        case 'QuietReference':
            return printQuietReference(expr, indent);
        case 'Object':
            return printObject(expr, indent);
        case 'List':
            return printList(expr, indent);
        case 'Set':
            return printSet(expr, indent);
        case 'Comment':
            return printComment(expr, indent);
        case 'CompoundExpression':
            return printCompoundExpression(expr, indent);
        case 'Util.ToJson':
            return printToJson(expr, indent);
        case 'Not':
            return printNot(expr, indent);
        case 'NewLine':
            return printNewLine(expr);
        default:
            return '';}

}
function print(expr) {
    return printExpr(expr);
}
exports.print = print;
function printBlock(name) {
    return function (expr) {
        var wrappedExpr = ast_1.compoundExpression([
        ast_1.comment("[Start] " + name + "."),
        expr,
        ast_1.comment("[End] " + name + ".")]);

        return printExpr(wrappedExpr);
    };
}
exports.printBlock = printBlock;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBUCxDQXBEUjs7QUFzREg7QUFFRCxTQUFBLEtBQUEsQ0FBc0IsSUFBdEIsRUFBc0M7QUFDbEMsV0FBTyxVQUFVLElBQVYsQ0FBUDtBQUNIO0FBRkQsUUFBQSxLQUFBLEdBQUEsS0FBQTtBQUlBLFNBQUEsVUFBQSxDQUEyQixJQUEzQixFQUF1QztBQUNuQyxXQUFPLFVBQUMsSUFBRCxFQUFpQjtBQUNwQixZQUFNLGNBQWMsTUFBQSxrQkFBQSxDQUFtQjtBQUNuQyxjQUFBLE9BQUEsQ0FBUSxhQUFXLElBQVgsR0FBZSxHQUF2QixDQURtQztBQUVuQyxZQUZtQztBQUduQyxjQUFBLE9BQUEsQ0FBUSxXQUFTLElBQVQsR0FBYSxHQUFyQixDQUhtQyxDQUFuQixDQUFwQjs7QUFLQSxlQUFPLFVBQVUsV0FBVixDQUFQO0FBQ0gsS0FQRDtBQVFIO0FBVEQsUUFBQSxVQUFBLEdBQUEsVUFBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgRXhwcmVzc2lvbiwgSWZOb2RlLCBJZkVsc2VOb2RlLCBBbmROb2RlLCBPck5vZGUsXG4gICAgUGFyZW5zTm9kZSwgRXF1YWxzTm9kZSwgTm90RXF1YWxzTm9kZSwgRm9yRWFjaE5vZGUsXG4gICAgU3RyaW5nTm9kZSwgSW50Tm9kZSwgTnVsbE5vZGUsIFJlZmVyZW5jZU5vZGUsIFF1aWV0UmVmZXJlbmNlTm9kZSxcbiAgICBPYmplY3ROb2RlLCBMaXN0Tm9kZSwgRmxvYXROb2RlLCBRdW90ZXNOb2RlLCBSYXdOb2RlLCBTZXROb2RlLCBDb21wb3VuZEV4cHJlc3Npb25Ob2RlLFxuICAgIENvbW1lbnROb2RlLCBUb0pzb25Ob2RlLCBCb29sZWFuTm9kZSwgY29tcG91bmRFeHByZXNzaW9uLCBjb21tZW50LCBOb3ROb2RlLCBOZXdMaW5lTm9kZVxufSBmcm9tICcuL2FzdCc7XG5cbmNvbnN0IFRBQiA9ICcgICc7XG5cbmZ1bmN0aW9uIHByaW50SWYobm9kZTogSWZOb2RlLCBpbmRlbnQ6IHN0cmluZyA9ICcnKSB7XG4gICAgaWYgKG5vZGUuaW5saW5lKSB7XG4gICAgICAgIHJldHVybiBgI2lmKCAke3ByaW50RXhwcihub2RlLnByZWRpY2F0ZSwgJycpfSApICR7cHJpbnRFeHByKG5vZGUuZXhwciwgJycpfSAjZW5kYDtcbiAgICB9XG4gICAgcmV0dXJuIGAke2luZGVudH0jaWYoICR7cHJpbnRFeHByKG5vZGUucHJlZGljYXRlLCAnJyl9IClcXG4ke3ByaW50RXhwcihub2RlLmV4cHIsIGluZGVudCArIFRBQil9XFxuJHtpbmRlbnR9I2VuZGA7XG59XG5cbmZ1bmN0aW9uIHByaW50SWZFbHNlKG5vZGU6IElmRWxzZU5vZGUsIGluZGVudDogc3RyaW5nID0gJycpIHtcbiAgICBpZiAobm9kZS5pbmxpbmUpIHtcbiAgICAgICAgcmV0dXJuIGAjaWYoICR7cHJpbnRFeHByKG5vZGUucHJlZGljYXRlKX0gKSBgICtcbiAgICAgICAgICAgIGAke3ByaW50RXhwcihub2RlLmlmRXhwcil9IGAgK1xuICAgICAgICAgICAgYCNlbHNlIGAgK1xuICAgICAgICAgICAgYCR7cHJpbnRFeHByKG5vZGUuZWxzZUV4cHIpfSBgICtcbiAgICAgICAgICAgIGAjZW5kYDtcbiAgICB9XG4gICAgcmV0dXJuIGAke2luZGVudH0jaWYoICR7cHJpbnRFeHByKG5vZGUucHJlZGljYXRlKX0gKVxcbmAgK1xuICAgICAgICBgJHtwcmludEV4cHIobm9kZS5pZkV4cHIsIGluZGVudCArIFRBQil9XFxuYCArXG4gICAgICAgIGAke2luZGVudH0jZWxzZVxcbmAgK1xuICAgICAgICBgJHtwcmludEV4cHIobm9kZS5lbHNlRXhwciwgaW5kZW50ICsgVEFCKX1cXG5gICtcbiAgICAgICAgYCR7aW5kZW50fSNlbmRgO1xufVxuXG5mdW5jdGlvbiBwcmludEFuZChub2RlOiBBbmROb2RlLCBpbmRlbnQ6IHN0cmluZyA9ICcnKTogc3RyaW5nIHtcbiAgICByZXR1cm4gaW5kZW50ICsgbm9kZS5leHByZXNzaW9ucy5tYXAoKGU6IEV4cHJlc3Npb24pID0+IHByaW50RXhwcihlKSkuam9pbignICYmICcpO1xufVxuXG5mdW5jdGlvbiBwcmludE9yKG5vZGU6IE9yTm9kZSwgaW5kZW50OiBzdHJpbmcgPSAnJyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGluZGVudCArIG5vZGUuZXhwcmVzc2lvbnMubWFwKChlOiBFeHByZXNzaW9uKSA9PiBwcmludEV4cHIoZSkpLmpvaW4oJyB8fCAnKTtcbn1cblxuZnVuY3Rpb24gcHJpbnRQYXJlbnMobm9kZTogUGFyZW5zTm9kZSwgaW5kZW50OiBzdHJpbmcgPSAnJyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke2luZGVudH0oJHtwcmludEV4cHIobm9kZS5leHByKX0pYDtcbn1cblxuZnVuY3Rpb24gcHJpbnRFcXVhbHMobm9kZTogRXF1YWxzTm9kZSwgaW5kZW50OiBzdHJpbmcgPSAnJyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke2luZGVudH0ke3ByaW50RXhwcihub2RlLmxlZnRFeHByKX0gPT0gJHtwcmludEV4cHIobm9kZS5yaWdodEV4cHIpfWA7XG59XG5cbmZ1bmN0aW9uIHByaW50Tm90RXF1YWxzKG5vZGU6IE5vdEVxdWFsc05vZGUsIGluZGVudDogc3RyaW5nID0gJycpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHtpbmRlbnR9JHtwcmludEV4cHIobm9kZS5sZWZ0RXhwcil9ICE9ICR7cHJpbnRFeHByKG5vZGUucmlnaHRFeHByKX1gO1xufVxuXG5mdW5jdGlvbiBwcmludEZvckVhY2gobm9kZTogRm9yRWFjaE5vZGUsIGluZGVudDogc3RyaW5nID0gJycpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHtpbmRlbnR9I2ZvcmVhY2goICR7cHJpbnRFeHByKG5vZGUua2V5KX0gaW4gJHtwcmludEV4cHIobm9kZS5jb2xsZWN0aW9uKX0gKVxcbmAgK1xuICAgICAgICBub2RlLmV4cHJlc3Npb25zLm1hcCgoZTogRXhwcmVzc2lvbikgPT4gcHJpbnRFeHByKGUsIGluZGVudCArIFRBQikpLmpvaW4oJ1xcbicpICtcbiAgICAgICAgYFxcbiR7aW5kZW50fSNlbmRgO1xufVxuXG5mdW5jdGlvbiBwcmludFN0cmluZyhub2RlOiBTdHJpbmdOb2RlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFwiJHtub2RlLnZhbHVlfVwiYDtcbn1cblxuZnVuY3Rpb24gcHJpbnRCb29sKG5vZGU6IEJvb2xlYW5Ob2RlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7bm9kZS52YWx1ZX1gO1xufVxuXG5mdW5jdGlvbiBwcmludFJhdyhub2RlOiBSYXdOb2RlLCBpbmRlbnQ6IHN0cmluZyA9ICcnKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7aW5kZW50fSR7bm9kZS52YWx1ZX1gO1xufVxuXG5mdW5jdGlvbiBwcmludFF1b3Rlcyhub2RlOiBRdW90ZXNOb2RlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFwiJHtwcmludEV4cHIobm9kZS5leHByKX1cImA7XG59XG5cbmZ1bmN0aW9uIHByaW50SW50KG5vZGU6IEludE5vZGUpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHtub2RlLnZhbHVlfWA7XG59XG5cbmZ1bmN0aW9uIHByaW50RmxvYXQobm9kZTogRmxvYXROb2RlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7bm9kZS52YWx1ZX1gO1xufVxuXG5mdW5jdGlvbiBwcmludE51bGwobm9kZTogTnVsbE5vZGUpOiBzdHJpbmcge1xuICAgIHJldHVybiBgbnVsbGA7XG59XG5cbmZ1bmN0aW9uIHByaW50UmVmZXJlbmNlKG5vZGU6IFJlZmVyZW5jZU5vZGUpOiBzdHJpbmcge1xuICAgIHJldHVybiBgXFwkJHtub2RlLnZhbHVlfWA7XG59XG5cbmZ1bmN0aW9uIHByaW50UXVpZXRSZWZlcmVuY2Uobm9kZTogUXVpZXRSZWZlcmVuY2VOb2RlLCBpbmRlbnQ6IHN0cmluZyA9ICcnKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7aW5kZW50fSR1dGlsLnFyKCR7bm9kZS52YWx1ZX0pYDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByaW50T2JqZWN0KG5vZGU6IE9iamVjdE5vZGUsIGluZGVudDogc3RyaW5nID0gJycpOiBzdHJpbmcge1xuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBub2RlLmF0dHJpYnV0ZXMubWFwKChhdHRyOiBbc3RyaW5nLCBFeHByZXNzaW9uXSwgaTogbnVtYmVyKSA9PiB7XG4gICAgICAgIHJldHVybiBgJHtpbmRlbnR9JHtUQUJ9XCIke2F0dHJbMF19XCI6ICR7cHJpbnRFeHByKGF0dHJbMV0sIGluZGVudCArIFRBQil9JHtpIDwgbm9kZS5hdHRyaWJ1dGVzLmxlbmd0aCAtIDEgPyAnLCcgOiAnJ31gO1xuICAgIH0pO1xuICAgIGNvbnN0IGRpdmlkZXIgPSBhdHRyaWJ1dGVzLmxlbmd0aCA+IDAgPyBgXFxuJHtpbmRlbnR9YCA6ICcnXG4gICAgcmV0dXJuIGB7JHtkaXZpZGVyfSR7YXR0cmlidXRlcy5qb2luKGRpdmlkZXIpfSR7ZGl2aWRlcn19YDtcbn1cblxuZnVuY3Rpb24gcHJpbnRMaXN0KG5vZGU6IExpc3ROb2RlLCBpbmRlbnQ6IHN0cmluZyA9ICcnKTogc3RyaW5nIHtcbiAgICBjb25zdCB2YWx1ZXMgPSBub2RlLmV4cHJlc3Npb25zLm1hcCgoZTogRXhwcmVzc2lvbikgPT4gcHJpbnRFeHByKGUsICcnKSkuam9pbignLCAnKTtcbiAgICByZXR1cm4gYCR7aW5kZW50fVske3ZhbHVlc31dYDtcbn1cblxuZnVuY3Rpb24gcHJpbnRTZXQobm9kZTogU2V0Tm9kZSwgaW5kZW50OiBzdHJpbmcgPSAnJyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke2luZGVudH0jc2V0KCAke3ByaW50UmVmZXJlbmNlKG5vZGUua2V5KX0gPSAke3ByaW50RXhwcihub2RlLnZhbHVlLCAnJyl9IClgXG59XG5cbmZ1bmN0aW9uIHByaW50Q29tbWVudChub2RlOiBDb21tZW50Tm9kZSwgaW5kZW50OiBzdHJpbmcgPSAnJyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke2luZGVudH0jIyAke25vZGUudGV4dH0gKipgXG59XG5cbmZ1bmN0aW9uIHByaW50Q29tcG91bmRFeHByZXNzaW9uKG5vZGU6IENvbXBvdW5kRXhwcmVzc2lvbk5vZGUsIGluZGVudDogc3RyaW5nID0gJycpOiBzdHJpbmcge1xuICAgIHJldHVybiBub2RlLmV4cHJlc3Npb25zLm1hcCgobm9kZTogRXhwcmVzc2lvbikgPT4gcHJpbnRFeHByKG5vZGUsIGluZGVudCkpLmpvaW4oYFxcbmApXG59XG5cbmZ1bmN0aW9uIHByaW50VG9Kc29uKG5vZGU6IFRvSnNvbk5vZGUsIGluZGVudDogc3RyaW5nID0gJycpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHtpbmRlbnR9JHV0aWwudG9Kc29uKCR7cHJpbnRFeHByKG5vZGUuZXhwciwgJycpfSlgXG59XG5cbmZ1bmN0aW9uIHByaW50Tm90KG5vZGU6IE5vdE5vZGUsIGluZGVudDogc3RyaW5nID0gJycpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHtpbmRlbnR9ISR7cHJpbnRFeHByKG5vZGUuZXhwciwgJycpfWBcbn1cblxuZnVuY3Rpb24gcHJpbnROZXdMaW5lKG5vZGU6IE5ld0xpbmVOb2RlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ1xcbidcbn1cblxuZnVuY3Rpb24gcHJpbnRFeHByKGV4cHI6IEV4cHJlc3Npb24sIGluZGVudDogc3RyaW5nID0gJycpOiBzdHJpbmcge1xuICAgIGlmICghZXhwcikgeyByZXR1cm4gJyc7IH1cbiAgICBzd2l0Y2ggKGV4cHIua2luZCkge1xuICAgICAgICBjYXNlICdJZic6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnRJZihleHByLCBpbmRlbnQpO1xuICAgICAgICBjYXNlICdJZkVsc2UnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50SWZFbHNlKGV4cHIsIGluZGVudCk7XG4gICAgICAgIGNhc2UgJ0FuZCc6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnRBbmQoZXhwciwgaW5kZW50KTtcbiAgICAgICAgY2FzZSAnT3InOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50T3IoZXhwciwgaW5kZW50KTtcbiAgICAgICAgY2FzZSAnUGFyZW5zJzpcbiAgICAgICAgICAgIHJldHVybiBwcmludFBhcmVucyhleHByLCBpbmRlbnQpO1xuICAgICAgICBjYXNlICdFcXVhbHMnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50RXF1YWxzKGV4cHIsIGluZGVudCk7XG4gICAgICAgIGNhc2UgJ05vdEVxdWFscyc6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnROb3RFcXVhbHMoZXhwciwgaW5kZW50KTtcbiAgICAgICAgY2FzZSAnRm9yRWFjaCc6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnRGb3JFYWNoKGV4cHIsIGluZGVudCk7XG4gICAgICAgIGNhc2UgJ1N0cmluZyc6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnRTdHJpbmcoZXhwcik7XG4gICAgICAgIGNhc2UgJ1Jhdyc6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnRSYXcoZXhwciwgaW5kZW50KTtcbiAgICAgICAgY2FzZSAnUXVvdGVzJzpcbiAgICAgICAgICAgIHJldHVybiBwcmludFF1b3RlcyhleHByKTtcbiAgICAgICAgY2FzZSAnRmxvYXQnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50RmxvYXQoZXhwcik7XG4gICAgICAgIGNhc2UgJ0ludCc6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnRJbnQoZXhwcik7XG4gICAgICAgIGNhc2UgJ0Jvb2xlYW4nOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50Qm9vbChleHByKTtcbiAgICAgICAgY2FzZSAnTnVsbCc6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnROdWxsKGV4cHIpO1xuICAgICAgICBjYXNlICdSZWZlcmVuY2UnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50UmVmZXJlbmNlKGV4cHIpO1xuICAgICAgICBjYXNlICdRdWlldFJlZmVyZW5jZSc6XG4gICAgICAgICAgICByZXR1cm4gcHJpbnRRdWlldFJlZmVyZW5jZShleHByLCBpbmRlbnQpO1xuICAgICAgICBjYXNlICdPYmplY3QnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50T2JqZWN0KGV4cHIsIGluZGVudCk7XG4gICAgICAgIGNhc2UgJ0xpc3QnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50TGlzdChleHByLCBpbmRlbnQpO1xuICAgICAgICBjYXNlICdTZXQnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50U2V0KGV4cHIsIGluZGVudCk7XG4gICAgICAgIGNhc2UgJ0NvbW1lbnQnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50Q29tbWVudChleHByLCBpbmRlbnQpO1xuICAgICAgICBjYXNlICdDb21wb3VuZEV4cHJlc3Npb24nOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50Q29tcG91bmRFeHByZXNzaW9uKGV4cHIsIGluZGVudClcbiAgICAgICAgY2FzZSAnVXRpbC5Ub0pzb24nOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50VG9Kc29uKGV4cHIsIGluZGVudClcbiAgICAgICAgY2FzZSAnTm90JzpcbiAgICAgICAgICAgIHJldHVybiBwcmludE5vdChleHByLCBpbmRlbnQpXG4gICAgICAgIGNhc2UgJ05ld0xpbmUnOlxuICAgICAgICAgICAgcmV0dXJuIHByaW50TmV3TGluZShleHByKVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByaW50KGV4cHI6IEV4cHJlc3Npb24pOiBzdHJpbmcge1xuICAgIHJldHVybiBwcmludEV4cHIoZXhwcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmludEJsb2NrKG5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiAoZXhwcjogRXhwcmVzc2lvbik6IHN0cmluZyA9PiB7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRFeHByID0gY29tcG91bmRFeHByZXNzaW9uKFtcbiAgICAgICAgICAgIGNvbW1lbnQoYFtTdGFydF0gJHtuYW1lfS5gKSxcbiAgICAgICAgICAgIGV4cHIsXG4gICAgICAgICAgICBjb21tZW50KGBbRW5kXSAke25hbWV9LmApXG4gICAgICAgIF0pXG4gICAgICAgIHJldHVybiBwcmludEV4cHIod3JhcHBlZEV4cHIpO1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=