{"version":3,"sources":["remove.js"],"names":["subcommand","category","messages","require","module","exports","name","run","context","amplify","parameters","resourceName","first","meta","getProjectDetails","amplifyMeta","dependentResources","Object","keys","some","e","includes","length","print","info","dependenciesExists","removeResource","catch","err","stack","error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAMA,+DAAa,QAAb,CAAN;AACA,MAAMC,6DAAW,MAAX,CAAN;AACA,MAAM,EAAEC,QAAF,uDAAeC,QAAQ,2DAAR,CAAf,CAAN;;;AAGAC,OAAOC,OAAP,GAAiB;AACfC,QAAMN,UADS;AAEfO,OAAK,MAAOC,OAAP,IAAmB;AAAA;;AACtB,UAAM,EAAEC,OAAF,EAAWC,UAAX,uDAA0BF,OAA1B,CAAN;AACA,UAAMG,iEAAeD,WAAWE,KAA1B,CAAN;;AAEA,UAAMC,yDAAOJ,QAAQK,iBAAR,GAA4BC,WAAnC,CAAN;AACA,UAAMC,uEAAqBC,OAAOC,IAAP,CAAYL,IAAZ,EACxBM,IADwB,CAClBC,CAAD,IAAO;AAAA;AAAA;AAAE;AACb,aAAO,uDAAC,WAAD,EAAc,KAAd,EAAqB,SAArB,EAAgC,UAAhC,EAA4CC,QAA5C,CAAqDD,CAArD,2DAA2DH,OAAOC,IAAP,CAAYL,KAAKO,CAAL,CAAZ,EAAqBE,MAArB,GAA8B,CAAzF;AAAP;AACD,KAHwB,CAArB,CAAN;;AALsB;AAUtB,QAAIN,kBAAJ,EAAwB;AAAA;AAAA;;AACtBR,cAAQe,KAAR,CAAcC,IAAd,CAAmBtB,SAASuB,kBAA5B;AACD,KAFD;AAAA;AAAA;;AAVsB;AActB,WAAOhB,QAAQiB,cAAR,CAAuBlB,OAAvB,EAAgCP,QAAhC,EAA0CU,YAA1C,EACJgB,KADI,CACGC,GAAD,IAAS;AAAA;AAAA;;AACdpB,cAAQe,KAAR,CAAcC,IAAd,CAAmBI,IAAIC,KAAvB;AADc;AAEdrB,cAAQe,KAAR,CAAcO,KAAd,CAAoB,+CAApB;AACD,KAJI,CAAP;AAKD;AArBc,CAAjB","file":"remove.js","sourcesContent":["const subcommand = 'remove';\nconst category = 'auth';\nconst { messages } = require('../../provider-utils/awscloudformation/assets/string-maps');\n\n\nmodule.exports = {\n  name: subcommand,\n  run: async (context) => {\n    const { amplify, parameters } = context;\n    const resourceName = parameters.first;\n\n    const meta = amplify.getProjectDetails().amplifyMeta;\n    const dependentResources = Object.keys(meta)\n      .some((e) => { //eslint-disable-line\n        return ['analytics', 'api', 'storage', 'function'].includes(e) && Object.keys(meta[e]).length > 0;\n      });\n\n    if (dependentResources) {\n      context.print.info(messages.dependenciesExists);\n    }\n\n    return amplify.removeResource(context, category, resourceName)\n      .catch((err) => {\n        context.print.info(err.stack);\n        context.print.error('There was an error removing the auth resource');\n      });\n  },\n};\n"]}